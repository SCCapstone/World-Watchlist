{"version":3,"sources":["firebase.js","pages/Landing.tsx","components/SubscriptionParent.tsx","components/WeatherSubChild.tsx","components/WeatherSubChildren.tsx","pages/Weather.tsx","config/config.js","components/Article.tsx","components/ArticleList.tsx","components/FeedList.tsx","components/FeedToolbar.tsx","components/TempFunctions.ts","components/SubscriptionChild.tsx","components/SubscriptionChildren.tsx","components/SubscriptionModal.tsx","pages/Feed.tsx","components/Message.tsx","components/GroupFeed.tsx","components/SearchModal.tsx","pages/GroupView.tsx","pages/AddFriends.tsx","pages/PendingRequests.tsx","pages/FriendView.tsx","pages/Social.tsx","pages/Settings.tsx","pages/Tabs.tsx","App.tsx","serviceWorker.ts","index.tsx","images/placeholder.png","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","db","firestore","Landing","props","state","loginEmail","loginPassword","registerEmail","registerPassword","registerConfirmPassword","shouldLoginShow","username","btnText","login","bind","register","guard","this","setPersistence","Auth","Persistence","LOCAL","then","signInWithEmailAndPassword","console","log","currentUser","history","push","catch","error","message","createUserWithEmailAndPassword","uploadDataToFirebase","result","a","createProfile","collection","doc","uid","set","blockedSources","groups","displayName","photo","notifications","createEmail","userid","createOutgoingFriendRequests","outgoingFriendRequests","createIncomingFriendRequests","incomingFriendRequests","createFriends","friendsList","Promise","all","className","class","id","lines","position","value","type","placeholder","onIonChange","e","setState","target","onClick","React","Component","ParentComponent","children","WeatherSubChild","location","temp","weather_code","expand","fill","shape","func","index","WeatherSubChildren","subs","map","item","key","Weather","lat","long","name","req","showLoading","subscription","isUnsubscribing","CurrentUser","isweatherOpen","ChildComponent","color","unsubscribe","onAuthStateChanged","get","data","exists","subscriptionField","splice","update","axios","response","new_location","some","el","main","weather","description","lon","display_name","err","isOpen","slot","toggleWeatherModal","icon","closeCircleOutline","onIonInput","animated","size","geocode","onDidDismiss","subscribe","duration","handleUnsub","secondaryApp","settings","cacheSizeBytes","CACHE_SIZE_UNLIMITED","enablePersistence","code","NewsDB","Browser","Plugins","url","open","Article","httpEquiv","content","theArticle","title","pubDate","source","FieldValue","arrayUnion","openURL","link","ArticleList","articles","theArticleList","x","FeedList","headerName","articleList","FeedToolbar","openWeather","cloud","showSubs","bookmarks","showModal","search","tempaddSubscription","Storage","sub","userId","subList","tempremoveSubscription","arrayRemove","tempsubscribe","topic","undefined","toLowerCase","snapshot","empty","tempapiSearch","metadata","fromCache","aList","method","forEach","articleItem","html","document","createElement","innerHTML","text","textContent","innerText","pathArray","split","baseUrl","newsItem","protocol","host","Title","Link","Description","tempsearchTopic","validTopic","docChanges","change","ChildrenComponent","length","toString","SubscriptionModal","closeButton","subscriptions","unsubButton","Feed","articlesSearched","subscribedArticles","topicSearched","showSubscription","allArticles","locationBased","isWeatherModalOpen","isSearchingModal","showSearchAlert","showSubscribeAlert","isChanging","onSnapshot","sub_list","getSubscribedArticles","getId","i","checkCollection","articlesLocal","JSON","parse","domain","includes","stringify","event","setTimeout","detail","complete","where","querySnapshot","LocalNotifications","getPending","LocalNotificationPendingList","clear","requestPermission","granted","schedule","body","at","Date","getTime","repeats","cancel","toggleNewsModal","apiSearch","addSubscription","removeSubscription","pullFactor","pullMin","pullMax","onIonRefresh","doRefresh","searchTopic","addCircle","Message","sender","src","Placeholder","GroupFeed","SearchModal","closeModal","handleTopicChange","searchTopicButton","dismissSearchAlertButton","showSearchingModal","closeSearchingModal","addTopicButton","dismissSubscribeAlertButton","GroupView","showSubscriptionModal","showSearchModal","groupSegment","groupViewPopoverEvent","isGroupViewPopoverOpen","isSettingsModalOpen","isMembersModalOpen","isFriendsListModalOpen","isNicknameReadOnly","tempNickname","groupDetails","nickname","members","owner","messages","photoDictionary","currentMessage","nameDictionary","blockedList","realtime_db","database","anchorRef","pullImage","createRef","memberUid","member","prevProps","blocked","Object","ref","orderByKey","on","val","current","scrollIntoView","storage","storageRef","pathName","child","getDownloadURL","img","getElementById","setAttribute","selectorFiles","file","newPicRef","put","r","profilePicture","timestamp","now","segmentValue","searched","swipeToClose","chevronDownOutline","onChange","uploadImage","files","cloudUploadOutline","readonly","pencilOutline","checkmarkOutline","deleteGroup","friendList","FriendObj","addFriendToGroup","addOutline","subscribeCloseButton","unsubscribeButton","searchCloseButton","handleSearchTopic","handleDismissSearch","handleCloseSearchModal","handleAddTopic","handleDismissSubscribe","cssClass","button","peopleOutline","settingsOutline","leaveGroup","exitOutline","isGroupModalOpen","toggleGroupModal","persist","handleSegmentSwitch","scrollY","sendMessage","sendOutline","AddFriends","targetUserId","isAddFriendModalOpen","toggleAddFriendModal","addFriend","addCircleOutline","PendingRequests","incomingFriends","outgoingFriends","incomingRequests","IncomingFriend","outgoingRequests","OutgoingFriend","isPendingRequestsModalOpen","togglePendingRequestsModal","acceptFriend","declineFriend","cancelOutgingRequest","FriendView","friendViewPopoverEvent","isFriendViewPopoverOpen","friendDetails","uuid","removeFriend","personRemoveOutline","isFriendModalOpen","toggleFriendModal","Social","targetUsername","blockedUsers","isMessengerModalOpen","messageRef","isSocialPopoverOpen","socialPopoverEvent","isCreateGroupModalOpen","groupNickname","groupArray","numGroups","unsubscribeGroupArray","unsubscribeFriendsList","unsubscribeBlockedUsers","unsubscribeIncomingRequests","unsubscribeOutgoingRequests","unsubscribeIndiviudalFriends","segmentSelected","activeMessages","unsubscribeGroups","blockUser","generateUniqueFriendId","generateUniqueGroupId","createGroup","generateRandomString","friendsListSnapshot","friend","profileSnapshot","uuidDoc","stateFriendsList","friendObj","sentinel","stateFriend","unsubscribeIndividualGroup","group","email","possible","charAt","Math","floor","random","generateUniqueFriendIdPromise","resolve","reject","inUse","generateUniqueGroupIdPromise","uniqueFriendId","delete","targetUid","personAddOutline","listOutline","displayGroup","PushNotifications","Toast","isPushAvailable","Capacitor","isPluginAvailable","FCMPlugin","Settings","isBlockSourceModalOpen","isAccountSettingsModalOpen","isChangePasswordModalOpen","signOutAlert","isChangeUsernameModalOpen","isSignOutModalOpen","topics","currentUserName","sourceToBlock","sourceToUnBlock","localList","isSubbed","newPassword","newUsername","handleChange","blockSource","show","subscribeTo","addListener","token","alert","notification","notif","sourceName","addToList","isValidSite","anEmail","newEmail","isEmailAddress","updateEmail","signOut","password","updatePassword","newName","addEventListener","evt","list","entry","appendChild","createTextNode","siteName","substring","domainType","populate","arrowBackOutline","unBlockSource","Blocked","changePassword","arrowForwardOutline","changeUsername","header","buttons","role","handler","blah","signOutUser","personCircleOutline","mailOutline","checked","notify","newspaperOutline","Tabs","path","exact","render","to","component","tab","href","INITIAL_STATE","App","Boolean","window","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister","module","exports","webpackAsyncContext","__webpack_require__","o","Error","ids","keys"],"mappings":"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AcC,MAAMjgB,MAAK,SAAAkgB,GACjCA,EAAaC,iB,iBE7InBC,EAAOC,QAAU,swP,6ECAjB,IAAIvc,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,GAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASwc,EAAoBjc,GAC5B,IAAIkc,EAAoBC,EAAE1c,EAAKO,GAC9B,OAAOrC,QAAQkY,UAAUla,MAAK,WAC7B,IAAI2C,EAAI,IAAI8d,MAAM,uBAAyBpc,EAAM,KAEjD,MADA1B,EAAEuE,KAAO,mBACHvE,KAIR,IAAI+d,EAAM5c,EAAIO,GAAMjC,EAAKse,EAAI,GAC7B,OAAOH,EAAoB5d,EAAE+d,EAAI,IAAI1gB,MAAK,WACzC,OAAOugB,EAAoBne,MAG7Bke,EAAoBK,KAAO,WAC1B,OAAO1O,OAAO0O,KAAK7c,IAEpBwc,EAAoBle,GAAK,GACzBge,EAAOC,QAAUC,G,mBChMjB,IAAIxc,EAAM,CACT,sBAAuB,CACtB,IACA,KAGF,SAASwc,EAAoBjc,GAC5B,IAAIkc,EAAoBC,EAAE1c,EAAKO,GAC9B,OAAOrC,QAAQkY,UAAUla,MAAK,WAC7B,IAAI2C,EAAI,IAAI8d,MAAM,uBAAyBpc,EAAM,KAEjD,MADA1B,EAAEuE,KAAO,mBACHvE,KAIR,IAAI+d,EAAM5c,EAAIO,GAAMjC,EAAKse,EAAI,GAC7B,OAAOH,EAAoB5d,EAAE+d,EAAI,IAAI1gB,MAAK,WACzC,OAAOugB,EAAoBne,MAG7Bke,EAAoBK,KAAO,WAC1B,OAAO1O,OAAO0O,KAAK7c,IAEpBwc,EAAoBle,GAAK,GACzBge,EAAOC,QAAUC,G","file":"static/js/main.fa57bbd1.chunk.js","sourcesContent":["\r\nimport firebase from 'firebase';\r\n\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyCAmbJVaYRk_N6RBcg_VnH865_9FzstE_I\",\r\n  authDomain: \"worldwatchlist.firebaseapp.com\",\r\n  databaseURL: \"https://worldwatchlist.firebaseio.com\",\r\n  projectId: \"worldwatchlist\",\r\n  storageBucket: \"worldwatchlist.appspot.com\",\r\n  messagingSenderId: \"106343909885\",\r\n  appId: \"1:106343909885:web:5cd924b3087d5e5b483194\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nexport const auth = firebase.auth();\r\nexport const db = firebase.firestore();\r\nexport default firebase;\r\n","import React from 'react';\r\nimport {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonItemDivider,\r\n  IonList,\r\n  IonItem,\r\n  IonContent,\r\n  IonInput,\r\n  IonTitle,\r\n  IonButton,\r\n  IonLabel\r\n} from '@ionic/react'\r\n\r\nimport './Landing.css'\r\nimport firebase, {auth, db} from '../firebase.js'\r\n\r\ntype MyState = {\r\n  loginEmail: string;\r\n  loginPassword: string;\r\n  registerEmail: string;\r\n  registerPassword: string;\r\n  registerConfirmPassword: string;\r\n  shouldLoginShow: boolean;\r\n  username: string;\r\n  btnText: string;\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n}\r\n\r\n\r\n\r\nclass Landing extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    loginEmail: '',\r\n    loginPassword: '',\r\n    registerEmail: '',\r\n    registerPassword: '',\r\n    registerConfirmPassword: '',\r\n    shouldLoginShow: true,\r\n    username: '',\r\n    btnText: ''\r\n  };\r\n\r\n\r\n\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n\r\n    this.login = this.login.bind(this);\r\n    this.register = this.register.bind(this);\r\n    this.state.btnText = 'Create an Account';\r\n  }\r\n\r\n  login() {\r\n    //attempts to sign a user into the app\r\n    //field checks\r\n    let guard = true\r\n    if(this.state.loginEmail === '') {\r\n      guard = false\r\n    }\r\n    if(this.state.loginPassword === '') {\r\n      guard = false\r\n    }\r\n    if(guard) {\r\n      firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(() => {\r\n        auth.signInWithEmailAndPassword(this.state.loginEmail, this.state.loginPassword).then(() => {\r\n          //user successfully logs in\r\n          //reroute here\r\n          console.log(auth.currentUser)\r\n          if(auth.currentUser) {\r\n            this.props.history.push(\"/main\")\r\n          }\r\n        }).catch((error) => {\r\n          //error handling\r\n          console.log(error.message)\r\n\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  register() {\r\n    let guard = true\r\n    if(this.state.registerEmail ==='') {\r\n      guard = false\r\n    }\r\n    if(this.state.registerPassword === '') {\r\n      guard = false\r\n    }\r\n    if(this.state.registerConfirmPassword !== this.state.registerPassword) {\r\n      guard = false\r\n    }\r\n    //attempts to register a user\r\n    //field checks\r\n\r\n    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(() => {\r\n      auth.createUserWithEmailAndPassword(this.state.registerEmail, this.state.registerPassword).then(() => {\r\n        //user successfully registers\r\n        //reroute here\r\n        this.uploadDataToFirebase().then((result) => {\r\n          this.props.history.push(\"/main\")\r\n        })\r\n       //admin.storage.ref().child(this.state.username+'#'+this.state.usernameIdentifier.toString() + '/new.jpg').put('../images/placeholder.png')\r\n       //firebase.put('asdf');\r\n\r\n      }).catch((error) => {\r\n        //error handling\r\n        console.log(error.message)\r\n      })\r\n    })\r\n  }\r\n\r\n  async uploadDataToFirebase() {\r\n    const createProfile : Promise<void> = db.collection('profiles').doc(auth.currentUser?.uid).set({\r\n      blockedSources:[],\r\n      groups: [],\r\n      displayName: this.state.username,\r\n      photo: '',\r\n      notifications: false\r\n    })\r\n    const createEmail : Promise<void> = db.collection('emails').doc(this.state.registerEmail).set({\r\n      userid: auth.currentUser?.uid\r\n    })\r\n    const createOutgoingFriendRequests : Promise<void> = db.collection(\"outgoingFriendRequests\").doc(auth.currentUser?.uid).set({\r\n      outgoingFriendRequests: []\r\n    })\r\n    const createIncomingFriendRequests : Promise<void> = db.collection(\"incomingFriendRequests\").doc(auth.currentUser?.uid).set({\r\n      incomingFriendRequests: []\r\n    })\r\n    const createFriends : Promise<void> = db.collection(\"friends\").doc(auth.currentUser?.uid).set({\r\n      friendsList: []\r\n    })\r\n\r\n    return await Promise.all([createProfile, createEmail, createOutgoingFriendRequests, createIncomingFriendRequests, createFriends])\r\n  }\r\n\r\n    render() {\r\n      return (\r\n      <IonPage>\r\n        <IonHeader>\r\n          <IonToolbar className='landingToolbar'>\r\n            <IonTitle class='loginTitle'>\r\n              {this.state.shouldLoginShow ? 'Login' : 'Create an Account'}\r\n            </IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent className='landingContent'>\r\n        {\r\n          this.state.shouldLoginShow ?\r\n            <div className='loginContainer'>\r\n              <div id='loginInputContainer'>\r\n                <h1 id='header'>World Watchlist</h1>\r\n                <IonItem lines='none' className='loginItem'>\r\n                <IonLabel class='loginLabel' position='floating'></IonLabel>\r\n                  <IonInput value={this.state.loginEmail} className='loginInput' type='email' placeholder = 'Email Address' onIonChange={(e) => {this.setState({loginEmail: (e.target as HTMLInputElement).value})}} />\r\n                </IonItem>\r\n\r\n                <IonItem lines='none' className='loginItem'>\r\n                  <IonLabel className='loginLabel' position='floating'></IonLabel>\r\n                  <IonInput value={this.state.loginPassword}  className='loginInput' type='password' placeholder = 'Password' onIonChange={(e) => {this.setState({loginPassword: (e.target as HTMLInputElement).value})}}/>\r\n                </IonItem>\r\n              </div>\r\n              <IonButton onClick={() => {this.login()}} className='loginButton'>Submit</IonButton>\r\n            </div>\r\n          :\r\n            <div className='registerContainer'>\r\n              <div id='registerInputContainer'>\r\n              <h1 id='header'>Register for an account</h1>\r\n                <IonItem lines='none' className='registerItem'>\r\n                <IonLabel className='registerLabel' position='floating' id = 'email'></IonLabel>\r\n                  <IonInput value={this.state.registerEmail} className='registerInput' type='email' placeholder = 'Email Address' onIonChange={(e) => {this.setState({registerEmail: (e.target as HTMLInputElement).value})}} />\r\n                </IonItem>\r\n\r\n                <IonItem lines='none' className='registerItem'>\r\n                  <IonLabel className='registerLabel' position='floating'></IonLabel>\r\n                  <IonInput value={this.state.registerPassword} className='registerInput' type='password' placeholder = 'Password' onIonChange={(e) => {this.setState({registerPassword: (e.target as HTMLInputElement).value})}}/>\r\n                </IonItem>\r\n\r\n                <IonItem lines='none' className='registerItem'>\r\n                  <IonLabel className='registerLabel' position='floating'></IonLabel>\r\n                  <IonInput value={this.state.registerConfirmPassword}  className='registerInput' type='password' placeholder = 'Confirm Password' onIonChange={(e) => {this.setState({registerConfirmPassword: (e.target as HTMLInputElement).value})}}/>\r\n                </IonItem>\r\n\r\n                <IonItem lines='none' className='registerItem'>\r\n                  <IonLabel className='registerLabel' position='floating'></IonLabel>\r\n                  <IonInput value={this.state.username} className='registerInput' type='text' placeholder = 'Username' onIonChange={(e) => {this.setState({username: (e.target as HTMLInputElement).value})}}/>\r\n                </IonItem>\r\n              </div>\r\n              <IonButton onClick={() => {this.register()}} className='registerButton'>Submit</IonButton>\r\n            </div>\r\n        }\r\n\r\n          <IonButton className = 'landingSwitch' onClick={() => {if(this.state.btnText=='Create an Account') this.state.btnText='Log In'; else this.state.btnText='Create an Account';this.setState({shouldLoginShow: !this.state.shouldLoginShow})}} >{this.state.btnText}</IonButton>\r\n        </IonContent>\r\n      </IonPage>\r\n      )\r\n    }\r\n\r\n}\r\n\r\nexport default Landing\r\n","import React from \"react\";\r\n\r\nconst ParentComponent = (props:any) => (\r\n    <div>\r\n      <div id=\"children-pane\">\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  );\r\nexport default ParentComponent;","import { IonButton, IonCard, IonCardContent, IonCardHeader, IonCardSubtitle, IonCardTitle } from '@ionic/react';\r\nimport React from 'react';\r\n\r\nimport './WeatherSubChild.css'\r\n\r\n\r\nfunction WeatherSubChild (props: {weather_code:any, temp:any, location: any, index:any, func: any}) {\r\n    function unsubClick(e: any) {\r\n        props.func(props.index);\r\n    }\r\n    return (\r\n    <IonCard>\r\n        <IonCardHeader >\r\n          <IonCardSubtitle>{props.location}</IonCardSubtitle>\r\n          <IonCardTitle >{props.temp}</IonCardTitle>\r\n        </IonCardHeader>\r\n        <IonCardContent>\r\n        {props.weather_code}\r\n        <IonButton id=\"unsubButton\" expand=\"block\" fill=\"outline\" type=\"submit\" shape=\"round\" onClick={unsubClick}>Unsubscribe</IonButton>\r\n        </IonCardContent>\r\n      </IonCard>);}\r\n\r\nexport default WeatherSubChild;","import React from 'react';\r\nimport ParentComponent from './SubscriptionParent';\r\nimport WeatherSubChild from './WeatherSubChild';\r\n\r\nfunction WeatherSubChildren(props: {subs: Array<any>, func: any}) {\r\n    let subs = props.subs.map((item, index) => {return <WeatherSubChild\r\n        key={item.location} \r\n        weather_code={item.weather_code}\r\n        temp={item.temp} location={item.location}\r\n        index={index} func={props.func}></WeatherSubChild>})\r\n    return <ParentComponent>{subs}</ParentComponent>;\r\n} \r\nexport default WeatherSubChildren;","import React from 'react';\r\nimport axios from 'axios'\r\nimport {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonContent,\r\n  IonTitle,\r\n  IonSearchbar,\r\n  IonInput,\r\n  IonButton,\r\n  IonLoading,\r\n  IonRouterOutlet,\r\n  IonIcon,\r\n  IonCard,\r\n  IonCardContent,\r\n  IonCardHeader,\r\n  IonCardSubtitle,\r\n  IonCardTitle,\r\n  IonModal,\r\n  IonButtons,\r\n\r\n} from '@ionic/react'\r\nimport './Weather.css'\r\nimport firebase, {db, auth} from '../firebase'\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { arrowBack, closeCircleOutline } from 'ionicons/icons';\r\nimport Tabs from './Tabs'\r\nimport ParentComponent from '../components/SubscriptionParent';\r\nimport { WeatherProps, WeatherState } from '../components/WeatherTypes';\r\nimport WeatherSubChildren from '../components/WeatherSubChildren';\r\n\r\n\r\nclass Weather extends React.Component<WeatherProps,WeatherState> {\r\n  state: WeatherState = {\r\n      lat: null,\r\n      long: null,\r\n      name: null,\r\n      req: null,\r\n      temp: null,\r\n      weather_code: null,\r\n      showLoading: false,\r\n      location: null,\r\n      subscription: [],\r\n      isUnsubscribing: false,\r\n      CurrentUser:null,\r\n      isweatherOpen:false\r\n  };\r\n\r\n\r\n  constructor(props: WeatherProps) {\r\n    super(props)\r\n    auth.onAuthStateChanged(async () => {\r\n      console.log(this.state.subscription)\r\n      if(auth.currentUser) {\r\n        //gets the username of our user\r\n        db.collection(\"users\").doc(auth.currentUser.uid).get().then(doc => {\r\n          if(doc.data()) {\r\n            this.setState({CurrentUser:doc.data()!.username})\r\n          }\r\n          // go into weatherSubscription collection\r\n          const dbSubscription = db.collection('weatherSubscription').doc(auth.currentUser?.uid)\r\n          // Check weather subscription array exist for user\r\n          dbSubscription.get().then((doc) => {\r\n            // use existing array\r\n            if (doc.exists) {\r\n              var subscriptionField = doc.data()\r\n              if (subscriptionField) {\r\n                this.setState({subscription:subscriptionField.subscription})\r\n              }\r\n            }\r\n            // create an array for the user.\r\n              else {\r\n                db.collection(\"weatherSubscription\").doc(auth.currentUser?.uid).set({\r\n                  subscription:[]\r\n            })\r\n            }\r\n        }).catch(function(error) {\r\n            console.log(\"Error getting document:\", error);\r\n        });\r\n\r\n        })\r\n      }\r\n  })\r\n\r\n  }\r\n  // ParentComponent = (props:any) => (\r\n  //   <div className=\"card calculator\">\r\n  //     <div id=\"children-pane\">\r\n  //       {props.children}\r\n  //     </div>\r\n  //   </div>\r\n  // );\r\n\r\n  ChildComponent = (props: {weather_code:any, temp:any, location: any, index:any}) =>\r\n  <IonCard>\r\n        <IonCardHeader >\r\n          <IonCardSubtitle>{props.location}</IonCardSubtitle>\r\n          <IonCardTitle >{props.temp}</IonCardTitle>\r\n        </IonCardHeader>\r\n        <IonCardContent>\r\n        {props.weather_code}\r\n        <IonButton id=\"unsubButton\" expand=\"block\" color=\"dark\" type=\"submit\" shape=\"round\" onClick={()=> this.unsubscribe(props.index) && this.setState({isUnsubscribing:true})}>unsub</IonButton>\r\n        </IonCardContent>\r\n      </IonCard>\r\n\r\n\r\n  /* remove item from subscribed based on index */\r\n  async unsubscribe(index:any) {\r\n    console.log(index)\r\n    this.state.subscription.splice(index,1)\r\n    db.collection('weatherSubscription').doc(auth.currentUser?.uid).update({\r\n      subscription: this.state.subscription\r\n    })\r\n  }\r\n\r\n  /* add new current weather location to subscribed array */\r\n  async subscribe(lat: any, long: any) {\r\n    await axios.get(\"http://api.openweathermap.org/data/2.5/weather?lat=\"+lat+\"&lon=\"+long+\"&APPID=853ea8c8d782be685ad81ace7b65291a&units=imperial\")\r\n    .then((response) => {\r\n      const data = response.data\r\n      console.log(data)\r\n      const new_location = this.state.name\r\n      const found = this.state.subscription.some(el => el.location === new_location);\r\n      if (found === true) {\r\n        console.log(\"already subscribed\")\r\n      } else {\r\n        console.log(\"adding to subscription\")\r\n        this.state.subscription.push({location: this.state.name, temp:data.main.temp+' F', weather_code: data.weather[0].description})\r\n      }\r\n      this.setState({temp:data.main.temp+'F',weather_code: data.weather[0].description, location: this.state.name})\r\n      /* Add data to firebase firestore */\r\n      db.collection('weatherSubscription').doc(auth.currentUser?.uid).update({\r\n        subscription: this.state.subscription\r\n      })\r\n    }).catch((error) => {\r\n      console.log(error)\r\n    });\r\n    this.setState({showLoading: false})\r\n  }\r\n\r\n  /* get latitude and longitude of location */\r\n  async geocode(location: any) {\r\n    if (location === null) {\r\n      console.log(\"Please enter a valid location\")\r\n    } else {\r\n      await axios.get('https://us1.locationiq.com/v1/search.php?key=pk.180fdf6168d1230db0cc5c937b7eaa98&q&q='+location+'&limit=1&countrycodes=US&namedetails=1&format=json')\r\n    .then((response) => {\r\n      let data = response.data[0]\r\n      console.log(data)\r\n      let lat = data.lat\r\n      let long = data.lon\r\n      let display_name = data.display_name\r\n      this.setState({lat: lat, long: long, name: display_name})\r\n    }).catch(err => {\r\n      console.error(err);\r\n    });\r\n    }\r\n  }\r\n\r\n  handleUnsub(index: number) {\r\n    this.unsubscribe(index);\r\n    this.setState({isUnsubscribing:true})\r\n  }\r\n  /* ClimaCell API (currently not in used because ran out of request) */\r\n  // async getWeatherData(lat: any, long: any) {\r\n  //   await fetch(\"https://api.climacell.co/v3/weather/forecast/daily?lat=\"+ lat + \"&lon=\"+ long +\"&unit_system=us&start_time=now&fields=feels_like&fields=\"+\r\n  //   \"wind_speed&fields=precipitation_probability&fields=weather_code&fields=humidity&apikey=YSpFrL7B389Ssy8msuqnPT3oY7keeAXf\", {\r\n  //     \"method\": \"GET\",\r\n  //     \"headers\": {}\r\n  //   })\r\n  //     .then(response => {\r\n  //       response.json().then((data) => {\r\n  //         var wlist = []\r\n  //         wlist.push({location: this.state.name, temp:data[0].feels_like[0].min.value +' '+data[0].feels_like[0].min.units, weather_code: data[0].weather_code.value})\r\n  //         this.state.subscription.push(wlist)\r\n  //         // console.log(this.state.subscription)\r\n  //         this.setState({temp:data[0].feels_like[0].min.value+data[0].feels_like[0].min.units+' ',weather_code: data[0].weather_code.value, location: this.state.name})\r\n  //         });\r\n  //     })\r\n  //     .catch(err => {\r\n  //       console.error(err);\r\n  //     });\r\n  // }\r\n\r\n    render() {\r\n\r\n      // const weatherDisplay = [];\r\n      // for (var i = 0; i < this.state.subscription.length; i+=1) {\r\n      //   weatherDisplay.push(<this.ChildComponent key={i} weather_code={this.state.subscription[i].weather_code}\r\n      //     temp={this.state.subscription[i].temp} location={this.state.subscription[i].location} index={i} />);\r\n      // };\r\n      return (\r\n      <IonModal isOpen={this.props.isOpen}>\r\n        <IonHeader>\r\n          <IonToolbar className='weatherToolbar'>\r\n            <IonTitle className='weatherTitle'>\r\n              Weather\r\n            </IonTitle>\r\n            <IonButtons slot='start'>\r\n                <IonButton onClick={() => {this.props.toggleWeatherModal()}} fill='clear'>\r\n                  <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n                </IonButton>\r\n            </IonButtons>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        <IonSearchbar placeholder=\"State, City, address...\" onIonInput={(e: any) => this.setState({req:e.target.value})} animated></IonSearchbar>\r\n        <IonButton id=\"searchButton\" size=\"default\" color=\"dark\" type=\"submit\" expand=\"full\" shape=\"round\" onClick={() => this.geocode(this.state.req)\r\n          && this.setState({showLoading: true })}>\r\n          Search\r\n        </IonButton>\r\n        <IonLoading\r\n        isOpen={this.state.showLoading}\r\n        onDidDismiss={() =>  this.subscribe(this.state.lat, this.state.long)}\r\n        message={'Getting data from API'}\r\n        duration={1000}\r\n        />\r\n\r\n      {/* <ParentComponent>\r\n       {weatherDisplay}\r\n      </ParentComponent> */}\r\n      <WeatherSubChildren subs={this.state.subscription} func={this.handleUnsub.bind(this)}></WeatherSubChildren>\r\n\r\n          </IonContent>\r\n        </IonModal>\r\n      )\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Weather\r\n","import firebase from 'firebase';\r\n\r\nvar config = {\r\n  apiKey: \"AIzaSyCiQa3wPMFOp_PidtF-8arljaCT3XFMLhc\",\r\n  authDomain: \"world-watchlist-server-8f86e.firebaseapp.com\",\r\n  databaseURL: \"https://world-watchlist-server-8f862.firebaseio.com\",\r\n  projectId: \"world-watchlist-server-8f86e\",\r\n  storageBucket: \"world-watchlist-server-8f86e.appspot.com\",\r\n  messagingSenderId: \"252689618671\",\r\n  appId: \"1:252689618671:web:3ac355cc3bbad710d02d1a\",\r\n};\r\n\r\nvar secondaryApp = firebase.initializeApp(config, \"Secondary\");\r\n/* Allow caching with unlimited size for accessing data offline */\r\nsecondaryApp.firestore().settings({\r\n  cacheSizeBytes: firebase.firestore.CACHE_SIZE_UNLIMITED\r\n});\r\nsecondaryApp.firestore().enablePersistence()\r\n  .catch((err) => {\r\n      if (err.code == 'failed-precondition') {\r\n          // Multiple tabs open, persistence can only be enabled\r\n          // in one tab at a a time.\r\n          // ...\r\n      } else if (err.code == 'unimplemented') {\r\n          // The current browser does not support all of the\r\n          // features required to enable persistence\r\n          // ...\r\n      }\r\n  });\r\n\r\n  \r\nexport const NewsDB = secondaryApp.firestore();\r\nexport default secondaryApp;","import React from 'react';\r\nimport { article } from './ArticleTypes';\r\nimport { Plugins } from '@capacitor/core';\r\nimport { IonCard, IonCardContent, IonCardHeader, IonCardSubtitle, IonCardTitle, IonButton, IonItem } from '@ionic/react';\r\nimport firebase, {db,auth} from '../firebase'\r\nimport './Article.css'\r\n\r\nconst { Browser } = Plugins;\r\n\r\nasync function openURL(url:any){\r\n  await Browser.open({ url: url });\r\n}\r\n\r\nasync function get(){\r\n  \r\n}\r\n\r\n//  function yeet(a:article) { //yeets an article\r\n//   var temp = [];\r\n//    db.collection(\"profiles\").doc(auth.currentUser?.uid)\r\n//           .onSnapshot(async (doc) => {\r\n//              temp = doc.data()!.blockedSources\r\n//              temp.push(new URL(a.link).host)\r\n//              db.collection('profiles').doc(auth.currentUser?.uid).update({\r\n//                blockedSources:temp\r\n\r\n//        // blockedSources : firebase.firestore.FieldValue.arrayUnion(str)\r\n\r\n//            })\r\n\r\n//   })\r\n \r\n//          }\r\n\r\n\r\n\r\n\r\nfunction Article(props: {theArticle: article}) {\r\n    //console.log(props.theArticle);\r\n    function blockSource() {\r\n      const ref = db.collection(\"profiles\").doc(auth.currentUser?.uid)\r\n      const res = ref.update({\r\n        blockedSources: firebase.firestore.FieldValue.arrayUnion(props.theArticle.source)\r\n      });\r\n    }\r\n    return <IonCard>\r\n      <meta httpEquiv=\"Cache-control\" content=\"no-cache\"></meta>\r\n          <IonCardHeader>\r\n            <IonCardTitle>{props.theArticle.title}</IonCardTitle>\r\n            <IonCardSubtitle>\r\n            {props.theArticle.pubDate}\r\n            </IonCardSubtitle>\r\n          </IonCardHeader>\r\n          <IonCardContent>\r\n              {props.theArticle.description}\r\n            </IonCardContent>\r\n           \r\n            <IonCardContent>\r\n            news source: {props.theArticle.source}\r\n            <IonItem>\r\n            <IonButton onClick={blockSource} slot = 'end'>Block this Source</IonButton>\r\n            </IonItem>\r\n            <br></br>\r\n              <a onClick={()=>openURL(props.theArticle.link)}>link</a>\r\n              </IonCardContent>\r\n        </IonCard>\r\n}\r\n\r\nexport default Article;","import React from 'react';\r\nimport Article from './Article';\r\nimport { article, articleList } from './ArticleTypes';\r\n\r\nfunction ArticleList(props: {theArticleList: articleList}) {\r\n    //console.log(props.theArticleList);\r\n    let articles = props.theArticleList.map((x: article) =><div key={x.title}> <Article theArticle={x}></Article> </div>);\r\nreturn <div>{articles}</div>;\r\n}\r\nexport default ArticleList;","import { IonList, IonListHeader } from \"@ionic/react\";\r\nimport React from \"react\";\r\nimport ArticleList from \"./ArticleList\";\r\nimport { article } from \"./ArticleTypes\";\r\n\r\nimport './FeedList.css'\r\n\r\nfunction FeedList( props: {headerName: string, articleList: Array<article>}) {\r\n    return (\r\n    <IonList>\r\n        <IonListHeader id=\"feedHeader\">\r\n          {props.headerName}\r\n        </IonListHeader>\r\n        <ArticleList theArticleList={props.articleList}></ArticleList>\r\n    </IonList>)\r\n}\r\nexport default FeedList;","import { IonButton, IonButtons, IonIcon, IonTitle, IonToolbar } from '@ionic/react';\r\nimport { cloud, bookmarks, search } from 'ionicons/icons';\r\nimport React from 'react';\r\n\r\nimport './FeedToolbar.css'\r\n\r\nfunction FeedToolbar (props: { openWeather: any, showSubs: any, showModal: any}) {\r\n    \r\n    // let openWeather = () => props.openWeather();\r\n    // let showSubs = () => props.showSubs();\r\n    // let showModal = () => props.showModal();\r\n    return (<IonToolbar class ='feedToolbar'>\r\n    <IonTitle class='feedTitle'>\r\n      Feed\r\n    </IonTitle>\r\n    \r\n<IonButtons slot=\"start\">\r\n    <IonButton id=\"feedButton\" onClick={props.openWeather}  fill='clear'>\r\n        <IonIcon icon={cloud} />\r\n    </IonButton>\r\n    </IonButtons>\r\n    <IonButtons slot=\"end\">\r\n    <IonButton id=\"feedButton\" onClick={props.showSubs}  fill='clear'>\r\n        <IonIcon icon={bookmarks} />\r\n    </IonButton>\r\n    </IonButtons>\r\n    <IonButtons slot=\"end\">\r\n    <IonButton id=\"feedButton\" onClick={props.showModal}  fill='clear'>\r\n        <IonIcon icon={search} />\r\n    </IonButton>\r\n    </IonButtons>\r\n  </IonToolbar>);\r\n}\r\n\r\nexport default FeedToolbar;","// converted methods in Feed.tsx to functions, attempted move of constructors\r\nimport { LocalNotifications, Plugins } from \"@capacitor/core\";\r\nimport axios from \"axios\";\r\nimport firebase from \"firebase\"\r\nimport { addListener } from \"process\";\r\nimport { NewsDB } from \"../config/config\";\r\nimport { db } from \"../firebase\"\r\nimport { articleList } from \"./ArticleTypes\";\r\nconst { Storage } = Plugins;\r\n\r\nexport const tempaddSubscription = async (sub: string, userId: string|undefined) => {\r\n    console.log(\"Temp add called\");\r\n  if (sub!== \"\")\r\n    await db.collection(\"topicSubscription\").doc(userId).update({subList: firebase.firestore.FieldValue.arrayUnion(sub)});\r\n}\r\n\r\nexport const tempremoveSubscription = async (index:any, userId: string|undefined, subs: string[]) => {\r\n    console.log(\"temp remove called\");\r\n    if (subs[index] !== \"\") {\r\n      await db.collection(\"topicSubscription\").doc(userId).update({subList: firebase.firestore.FieldValue.arrayRemove(subs[index])});\r\n    }\r\n}\r\n\r\nexport const tempsubscribe = async (topic:any, userId: string|undefined) => {\r\n    if (topic === null || topic === undefined || topic === '') {\r\n        console.log(\"Enter a valid topic\");\r\n    } else {\r\n      /* cache data on subscribe */\r\n      await NewsDB.collection(topic.toLowerCase()).get()\r\n        .then(async (snapshot) => {\r\n       /* Creating a new collection if topic collection doesn't exist and subscribing to it */\r\n        if (snapshot.empty) {\r\n            await tempapiSearch(topic, 'subscribe', userId);\r\n        } else {\r\n        console.log(\"News about \"+ topic +\" has been found and will be subscribed.\");\r\n        await tempaddSubscription(topic.toLowerCase(), userId);\r\n      }\r\n            var source = snapshot.metadata.fromCache ? \"local cache\" : \"server\";\r\n            console.log(\"Data came from \" + source);\r\n        })\r\n    }\r\n}\r\n\r\nexport const tempapiSearch = async (topic: any, type:string, userId: string|undefined) => {\r\n  let aList : articleList = [];\r\n  /* needed for the api.rss2json to work */\r\n    await axios({\r\n      method: 'GET',\r\n      /* using server api to turn rss feeds into json to avoid cors policy errors */\r\n      url:'https://world-watchlist-server-8f86e.web.app/'+topic\r\n    })\r\n  .then(async (response) => {\r\n    await response.data.forEach((articleItem: any) => {\r\n      /* remove <a> html tag from description */\r\n      var html = articleItem.description;\r\n      var a = document.createElement(\"a\");\r\n      a.innerHTML = html;\r\n      var text = a.textContent || a.innerText || \"\";\r\n      var pathArray = articleItem.link.split( '/' );\r\n      var protocol = pathArray[0];\r\n      var host = pathArray[2];\r\n      var baseUrl = protocol + '//' + host;\r\n      aList.push({title: articleItem.title, link: articleItem.link, description: text, source: baseUrl, pubDate:articleItem.pubDate})\r\n    })\r\n    if (type==='search') {\r\n      return aList;\r\n    } else {\r\n      aList.forEach(async newsItem => {\r\n        var html = newsItem.description;\r\n        var a = document.createElement(\"a\");\r\n        a.innerHTML = html;\r\n        var text = a.textContent || a.innerText || \"\";\r\n        var pathArray = newsItem.link.split( '/' );\r\n        var protocol = pathArray[0];\r\n        var host = pathArray[2];\r\n        var baseUrl = protocol + '//' + host;\r\n        await NewsDB.collection(topic.toLowerCase()).doc(newsItem.title).set({Title: newsItem.title, Link: newsItem.link, Description: text, source: baseUrl, pubDate:newsItem.pubDate});\r\n      })\r\n      await tempaddSubscription(topic.toLowerCase(), userId);\r\n    }\r\n  }).catch((error) => {\r\n    console.log(error)\r\n  });\r\n  return aList\r\n}\r\n\r\nexport const getArticles = async (userId: string|undefined) => {\r\n    let aList: any[] = [];\r\n    let articles: any[] = [];\r\n    let subscriptions: any[] = [];\r\n    db.collection(\"topicSubscription\").doc(userId).onSnapshot(async (sub_list) => {\r\n        articles = []; // this.setState({articles:[]});\r\n        if (sub_list.exists) {\r\n            subscriptions = await sub_list.data()!.subList; // this.setState({subs: await sub_list.data()!.subList});\r\n            console.log(\"subs\",subscriptions);\r\n            for (var i = 0; i < subscriptions.length; i++) {\r\n            /* Observe any changes in firestore and send a notification*/\r\n            let isChanging = await tempcheckCollection(subscriptions[i]);\r\n            aList = [];\r\n            var articlesLocal = await Storage.get({key:subscriptions[i]});\r\n            // check local storage if collection exist take from cache, if collection changes, get from server\r\n            if ((articlesLocal.value)?.length === undefined || JSON.parse((articlesLocal.value)).length === 0 || isChanging===true) {\r\n                console.log(\"local storage empty for\", subscriptions[i]);\r\n                await NewsDB.collection(subscriptions[i]).get().then(async (snapshot) => {\r\n                    snapshot.forEach(async doc => {\r\n                        if (doc.exists) {\r\n                            let articleItem = doc.data();\r\n                            var html = articleItem.Description;\r\n                            var a = document.createElement(\"a\");\r\n                            a.innerHTML = html;\r\n                            var text = a.textContent || a.innerText || \"\";\r\n                            aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source:articleItem.source, pubDate: articleItem.pubDate});\r\n                        } else {\r\n                            console.log(\"Cannot find anything in database.\");\r\n                        }\r\n                    })\r\n            var source = snapshot.metadata.fromCache ? \"local cache\" : \"server\";\r\n            console.log(\"Sub Articles came from \" + source);\r\n            await Storage.set({ key: subscriptions[i], value: JSON.stringify(aList)});\r\n            articles = [...articles, ...aList]; // this.setState({articles: [...articles, ...aList]});\r\n        })\r\n        } else {\r\n            articles = [...articles, ...JSON.parse(articlesLocal.value)]; // this.setState({articles:[...articles, ...JSON.parse(articlesLocal.value)]});\r\n            console.log(\"taking from capacitor cache\");\r\n        }\r\n        }\r\n        console.log(\"articles\",articles);\r\n    } else {\r\n        db.collection(\"topicSubscription\").doc(userId).set({subList: []});\r\n    }\r\n    })\r\n    return {articles: articles, subs: subscriptions};\r\n}\r\n\r\nexport const tempcheckCollection = async (collection:string) => {\r\n    let isChanging = false;\r\n    var observer = NewsDB.collection(collection).where('Title', '!=', '')\r\n    .onSnapshot(async querySnapshot => {\r\n        // if there are changes to the metadata, clear cache and add new docs to the \r\n        if (querySnapshot.metadata.fromCache === false) {\r\n          tempclear();\r\n            isChanging = true;\r\n        //   this.setState({isChanging:true})\r\n          if (!(await LocalNotifications.requestPermission()).granted) return;\r\n          // send notification for every changes in collection\r\n            await LocalNotifications.schedule({\r\n              notifications: [{\r\n                title: 'New articles in your feed!',\r\n                body: \"Check them out!\",\r\n                id: 1,\r\n                schedule: {\r\n                  at:new Date(new Date().getTime() + 1000),\r\n                  repeats:false,\r\n                }\r\n              }]\r\n            });\r\n      }\r\n    });\r\n    return isChanging;\r\n}\r\n\r\nexport const tempsearchTopic = async (topic:any, userId: string|undefined) => {\r\n    let aList : articleList = [];\r\n      if (validTopic(topic)/*topic === null || topic === undefined || topic === ''*/) {\r\n        console.log(\"Enter a valid topic\");\r\n      } else {\r\n        // this.toggleNewsModal()\r\n        /* cache data on topic search */\r\n        await NewsDB.collection(topic.toLowerCase()).get()\r\n        .then(async (snapshot) => {\r\n        if (snapshot.empty) {\r\n          // searching through api and sending to firestore instead of searching in main collection\r\n          await tempapiSearch(topic, 'search', userId)\r\n       \r\n        } else {\r\n        console.log(\"collection exist, will pull data from that collection\")\r\n\r\n        aList = [];\r\n        snapshot.docChanges().forEach((change) => {\r\n          if (change.doc.exists) {\r\n            let articleItem = change.doc.data();\r\n            var html = articleItem.Description;\r\n            var a = document.createElement(\"a\");\r\n            a.innerHTML = html;\r\n            var text = a.textContent || a.innerText || \"\";\r\n            aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source: articleItem.source, pubDate: articleItem.pubDate})\r\n          }\r\n        //   this.setState({articlesSearched: aList})\r\n        })\r\n        }\r\n      })\r\n    }\r\n    return aList;\r\n}\r\n\r\nexport const validTopic = (topic: string) => {\r\n    return topic !== null && topic !== undefined && topic !== \"\";\r\n}\r\n\r\nexport const tempclear = async () => {\r\n    await Storage.clear();\r\n}","import { IonButton, IonCard, IonCardContent, IonCardHeader, IonCardTitle } from '@ionic/react';\r\nimport React from 'react';\r\n\r\n\r\nfunction ChildComponent (props: {subscription:any, index:any, func: any }) {\r\n    function unsubClick(e: any) {\r\n        props.func(props.subscription, props.index);\r\n    }\r\n    return (<IonCard>\r\n      <IonCardHeader >\r\n        <IonCardTitle>{props.subscription}</IonCardTitle>\r\n        </IonCardHeader>\r\n        <IonCardContent>\r\n        <IonButton id=\"unsubButton\" expand=\"block\" fill=\"outline\" type=\"submit\" shape=\"round\" onClick={unsubClick}>Unsubscribe</IonButton>\r\n        </IonCardContent>\r\n    </IonCard>);}\r\n\r\nexport default ChildComponent;","import { IonItem } from '@ionic/react';\r\nimport React from 'react';\r\nimport ChildComponent from './SubscriptionChild'\r\nimport ParentComponent from './SubscriptionParent';\r\n\r\nfunction ChildrenComponent(props: {subs: Array<String>, func: any}) {\r\n    console.log(\"Child list: \"+props.subs.length+\" in list\");\r\n    let subs = props.subs.map((item, index)=> {return <ChildComponent key={item.toString()} subscription={item}\r\n     index={index} func={props.func}></ChildComponent>});\r\n  return <ParentComponent>{subs}</ParentComponent>;\r\n} \r\nexport default ChildrenComponent;","import { IonModal, IonHeader, IonToolbar, IonButtons, IonButton, IonIcon, IonTitle, IonContent, IonCard } from \"@ionic/react\"\r\nimport { closeCircleOutline } from \"ionicons/icons\"\r\nimport React from \"react\"\r\nimport { article } from \"./ArticleTypes\"\r\nimport ChildrenComponent from \"./SubscriptionChildren\"\r\n\r\nfunction SubscriptionModal(props: {showModal: boolean, closeButton: any, unsubButton: any, subscriptions: string[]}) {\r\n    return (<IonModal isOpen={props.showModal} onDidDismiss={props.closeButton}>\r\n<IonHeader>\r\n  <IonToolbar class='feedToolbar2'>\r\n    <IonButtons slot='start'>\r\n      <IonButton onClick={props.closeButton} fill='clear'>\r\n        <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n      </IonButton>\r\n    </IonButtons>\r\n\r\n  <IonTitle class='feedTitle2'>Subscriptions</IonTitle>\r\n  </IonToolbar>\r\n</IonHeader>\r\n<IonContent>\r\n  <IonCard>\r\n{/* <ParentComponent>\r\n{subs}\r\n</ParentComponent> */}\r\n    <ChildrenComponent subs={props.subscriptions} func={props.unsubButton}></ChildrenComponent>\r\n  </IonCard>\r\n</IonContent>\r\n</IonModal>\r\n);\r\n\r\n}\r\nexport default SubscriptionModal;","import React, { useState } from 'react';\r\nimport {\r\n  IonRefresher, IonRefresherContent,\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonContent,\r\n  IonTitle,\r\n  IonRouterOutlet,\r\n  IonIcon,\r\n  IonLabel,\r\n  IonButton,\r\n  IonButtons,\r\n  IonSearchbar,\r\n  IonLoading,\r\n  IonModal,\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardTitle,\r\n  IonFabButton,\r\n  IonCardContent,\r\n  IonCardSubtitle,\r\n  IonItem,\r\n  IonCheckbox,\r\n  IonList, IonListHeader, IonAlert, IonToast\r\n} from '@ionic/react'\r\nimport { RefresherEventDetail } from '@ionic/core';\r\nimport './Feed.css'\r\nimport './AllPages.css'\r\nimport { NewsDB } from '../config/config';\r\nimport firebase, {db,auth} from '../firebase'\r\nimport ArticleList from '../components/ArticleList';\r\nimport { article, articleList } from '../components/ArticleTypes';\r\nimport Weather from './Weather'\r\nimport { add, addCircle, archive, bookmarks, closeCircleOutline, cloud, notificationsCircleOutline, search } from 'ionicons/icons';\r\nimport { LocalNotifications, Plugins } from '@capacitor/core';\r\nimport axios from 'axios';\r\nimport ParentComponent from '../components/SubscriptionParent';\r\nimport ChildrenComponent from '../components/SubscriptionChildren';\r\nimport { FeedProps, FeedState } from '../components/FeedTypes';\r\nimport FeedList from '../components/FeedList';\r\nimport FeedToolbar from '../components/FeedToolbar';\r\nimport { tempaddSubscription, tempremoveSubscription, tempapiSearch, tempsubscribe,  } from '../components/TempFunctions';\r\nimport SubscriptionModal from '../components/SubscriptionModal';\r\nconst { Storage } = Plugins;\r\n\r\n\r\n\r\nclass Feed extends React.Component<FeedProps, FeedState> {\r\n  state: FeedState = {\r\n    articles: [],\r\n    subs: [],\r\n    blockedSources: [],\r\n    articlesSearched:[],\r\n    subscribedArticles: undefined,\r\n    CurrentUser: null,\r\n    topicSearched:null,\r\n    showLoading:false,\r\n    showModal:false,\r\n    showSubscription:false,\r\n    allArticles:[],\r\n    locationBased:false,\r\n    isWeatherModalOpen:false,\r\n    isSearchingModal:false,\r\n    showSearchAlert:false,\r\n    showSubscribeAlert:false,\r\n    isChanging:false\r\n  };\r\n\r\n  constructor(props: FeedProps) {\r\n    super(props)\r\n    this.toggleWeatherModal = this.toggleWeatherModal.bind(this);\r\n    auth.onAuthStateChanged(async () => {\r\n      if(auth.currentUser) {\r\n        \r\n        db.collection(\"profiles\").doc(auth.currentUser?.uid)\r\n          .onSnapshot(async (doc) => {\r\n          this.setState({blockedSources:  await doc.data()!.blockedSources});\r\n      })\r\n          // everytime there is a new subscription, update news onto main feed\r\n          db.collection(\"topicSubscription\").doc(auth.currentUser?.uid)\r\n          .onSnapshot(async (sub_list) => {\r\n            if (sub_list.exists) {\r\n              this.setState({subs: await sub_list.data()!.subList});\r\n              console.log(\"subs\",this.state.subs)\r\n              // get articles\r\n              await this.getSubscribedArticles()\r\n              console.log(\"articles\",this.state.articles)\r\n            } else {\r\n              db.collection(\"topicSubscription\").doc(this.getId()).set({subList: []});\r\n            }\r\n          })\r\n        // end of getting data from server\r\n      }\r\n    })\r\n  }\r\n\r\n  async getSubscribedArticles(){\r\n    this.setState({articles:[]})\r\n    // get blocked sources on firestore\r\n    let aList : any[] = [];\r\n    \r\n    console.log(this.state.blockedSources)\r\n    for (var i = 0; i < this.state.subs.length; i++) {\r\n      /* Observe any changes in firestore and send a notification*/\r\n      await this.checkCollection(this.state.subs[i])\r\n      aList = []\r\n      var articlesLocal = await Storage.get({key:this.state.subs[i]})\r\n      // check local storage if collection exist take from cache, if collection changes, get from server\r\n      if ((articlesLocal.value)?.length === undefined || JSON.parse((articlesLocal.value)).length === 0 || this.state.isChanging===true) {\r\n        console.log(\"local storage empty for\", this.state.subs[i])\r\n        await NewsDB.collection(this.state.subs[i]).get()\r\n      .then(async (snapshot) => {\r\n        snapshot.forEach(async doc => {\r\n          if (doc.exists) {\r\n            let articleItem = doc.data();\r\n            var html = articleItem.Description;\r\n            var a = document.createElement(\"a\");\r\n            a.innerHTML = html;\r\n            var text = a.textContent || a.innerText || \"\";\r\n            //await new Promise(r => setTimeout(r, 1000));\r\n            var domain = (articleItem.source)\r\n            if(!this.state.blockedSources.includes(domain)) {\r\n              console.log(\"blocked\")\r\n              aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source:domain, pubDate: articleItem.pubDate})\r\n            }\r\n          } else {\r\n            console.log(\"Cannot find anything in database.\")\r\n          }\r\n        })\r\n        var source = snapshot.metadata.fromCache ? \"local cache\" : \"server\";\r\n        console.log(\"Sub Articles came from \" + source);\r\n        await Storage.set({ key: this.state.subs[i], value: JSON.stringify(aList)});\r\n        this.setState({articles: [...this.state.articles, ...aList]})\r\n      })\r\n      } else {\r\n        this.setState({articles:[...this.state.articles, ...JSON.parse(articlesLocal.value)]})\r\n        console.log(\"taking from capacitor cache\")\r\n      }\r\n      this.setState({isChanging:false})\r\n    }\r\n  }\r\n\r\n  // refresh articles on feed\r\n  async doRefresh(event: CustomEvent<RefresherEventDetail>) {\r\n    this.setState({articles:[]})\r\n    // get blocked sources on firestore\r\n    let aList : any[] = [];\r\n    for (var i = 0; i < this.state.subs.length; i++) {\r\n      /* Observe any changes in firestore and send a notification*/\r\n      await this.checkCollection(this.state.subs[i])\r\n      aList = []\r\n      // check local storage if collection exist take from cache, if collection changes, get from server\r\n        console.log(\"local storage empty for\", this.state.subs[i])\r\n        await NewsDB.collection(this.state.subs[i]).get()\r\n      .then(async (snapshot) => {\r\n        snapshot.forEach(async doc => {\r\n          if (doc.exists) {\r\n            let articleItem = doc.data();\r\n            var html = articleItem.Description;\r\n            var a = document.createElement(\"a\");\r\n            a.innerHTML = html;\r\n            var text = a.textContent || a.innerText || \"\";\r\n            //await new Promise(r => setTimeout(r, 1000));\r\n            var domain = (articleItem.source)\r\n            if(!this.state.blockedSources.includes(domain)) {\r\n              aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source:domain, pubDate: articleItem.pubDate})\r\n            }\r\n          } else {\r\n            console.log(\"Cannot find anything in database.\")\r\n          }\r\n        })\r\n      })\r\n      this.setState({isChanging:false})\r\n    }\r\n    setTimeout(() => {\r\n      console.log('refreshing ended');\r\n      event.detail.complete();\r\n      this.setState({articles: [...this.state.articles, ...aList]})\r\n    }, 500);\r\n  }\r\n  \r\n  getId() {\r\n    // return user_id if current user else null\r\n    return auth.currentUser?.uid;\r\n  }\r\n  \r\n  toggleWeatherModal() {\r\n    this.setState({isWeatherModalOpen: !this.state.isWeatherModalOpen})\r\n  }\r\n\r\n  // check server collection for changes\r\n  async checkCollection(collection:string){\r\n    var observer = NewsDB.collection(collection).where('Title', '!=', '')\r\n    .onSnapshot(async querySnapshot => {\r\n        const LocalNotificationPendingList = await LocalNotifications.getPending()\r\n        // if there are changes to the metadata, clear cache and add new docs to the \r\n        if (querySnapshot.metadata.fromCache === false) {\r\n          // clear cache so new articles can be added to cache\r\n          this.clear()\r\n          this.setState({isChanging:true})\r\n          if (!(await LocalNotifications.requestPermission()).granted) return;\r\n          // send notification for every changes in collection\r\n            await LocalNotifications.schedule({\r\n              notifications: [{\r\n                title: 'Changes in your feed!',\r\n                body: \"Check them out!\",\r\n                id: 1,\r\n                schedule: {\r\n                  // notification 1 minutes after change in collections\r\n                  at:new Date(new Date().getTime() + 60000),\r\n                  repeats:false\r\n                },\r\n              }]\r\n            });\r\n      }\r\n      // makes sure they can't be more than 1 notifications on single changes\r\n      if (LocalNotificationPendingList.notifications.length>0) {\r\n        LocalNotifications.cancel(LocalNotificationPendingList)\r\n      }\r\n      console.log(LocalNotificationPendingList)\r\n    });\r\n  }\r\n\r\n  \r\n\r\n  /*clear capacitor local storage */\r\n  async clear() {\r\n    await Storage.clear();\r\n  }\r\n\r\n  /* can currently subscribe to: gaming, health, politics, sports, technology, world */\r\n  async addSubscription(sub: string) {\r\n    // tempaddSubscription(sub, this.getId());\r\n    if (sub!== \"\") {\r\n      await db.collection(\"topicSubscription\").doc(this.getId()).update({subList: firebase.firestore.FieldValue.arrayUnion(sub)})\r\n    }\r\n  }\r\n\r\n  async removeSubscription(index:any) {\r\n    // tempremoveSubscription(index, this.getId(), this.state.subs);\r\n    if (this.state.subs[index] !== \"\") {\r\n      await db.collection(\"topicSubscription\").doc(this.getId()).update({subList: firebase.firestore.FieldValue.arrayRemove(this.state.subs[index])})\r\n    }\r\n  }\r\n\r\n\r\n  toggleNewsModal(){\r\n    this.setState({isSearchingModal: true})\r\n  }\r\n\r\n  /* search firebase database for topic*/\r\n  async searchTopic(topic:any) {\r\n    this.setState({showLoading: true})\r\n    this.setState({articlesSearched:[]})\r\n      if (topic === null || topic === undefined || topic === '') {\r\n        console.log(\"Enter a valid topic\");\r\n        this.setState({showSearchAlert:true})\r\n      } else {\r\n        this.toggleNewsModal()\r\n        let aList : articleList = [];\r\n        /* cache data on topic search */\r\n        await NewsDB.collection(topic.toLowerCase()).get()\r\n        .then(async (snapshot) => {\r\n        if (snapshot.empty) {\r\n          // searching through api and sending to firestore instead of searching in main collection\r\n          this.setState({articlesSearched :await tempapiSearch(topic, 'search', auth.currentUser?.uid)})\r\n          console.log(this.state.articlesSearched)\r\n        } else {\r\n        console.log(\"collection exist, will pull data from that collection\")\r\n\r\n        aList = [];\r\n        snapshot.docChanges().forEach((change) => {\r\n          if (change.doc.exists) {\r\n            let articleItem = change.doc.data();\r\n            var html = articleItem.Description;\r\n            var a = document.createElement(\"a\");\r\n            a.innerHTML = html;\r\n            var text = a.textContent || a.innerText || \"\";\r\n            aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source: articleItem.source, pubDate: articleItem.pubDate})\r\n          }\r\n          this.setState({articlesSearched: aList})\r\n        })\r\n        }\r\n      })\r\n    }\r\n    this.setState({showLoading: false})\r\n    return 0\r\n  }\r\n\r\n  async subscribe(topic:any) {\r\n    if (topic === null || topic === undefined || topic === '') {\r\n      console.log(\"Enter a valid topic\");\r\n    } else {\r\n      /* cache data on subscribe */\r\n      await NewsDB.collection(topic.toLowerCase()).get()\r\n        .then(async (snapshot) => {\r\n       /* Creating a new collection if topic collection doesn't exist and subscribing to it */\r\n      if (snapshot.empty) {\r\n        await this.apiSearch(topic, 'subscribe')\r\n       \r\n      }\r\n      else {\r\n        console.log(\"News about \"+ topic +\" has been found and will be subscribed.\")\r\n        await this.addSubscription(topic.toLowerCase());\r\n      }\r\n      var source = snapshot.metadata.fromCache ? \"local cache\" : \"server\";\r\n          console.log(\"Data came from \" + source);\r\n    })\r\n  }\r\n  }\r\n\r\n  async unsubscribe(topic:any,index:any) {\r\n    console.log(\"News about \"+ topic +\" has been found and will be unsubscribed.\")\r\n    await this.removeSubscription(index);\r\n  }\r\n\r\n  async apiSearch(topic: any, type:string) {\r\n    let aList : articleList = [];\r\n    await axios({\r\n      method: 'GET',\r\n      /* using server api to turn rss feeds into json to avoid cors policy errors */\r\n      url:'https://world-watchlist-server-8f86e.web.app/'+topic\r\n    })\r\n    .then(async (response) => {\r\n      console.log(response)\r\n      await response.data.forEach((articleItem: any) => {\r\n        /* remove <a> html tag from description */\r\n        var html = articleItem.description;\r\n        var a = document.createElement(\"a\");\r\n        a.innerHTML = html;\r\n        var text = a.textContent || a.innerText || \"\";\r\n        var pathArray = articleItem.link.split( '/' );\r\n        var protocol = pathArray[0];\r\n        var host = pathArray[2];\r\n        var baseUrl = protocol + '//' + host;\r\n        aList.push({title: articleItem.title, link: articleItem.link, description: text, source: baseUrl, pubDate:articleItem.pubDate})\r\n      })\r\n      if (type==='search') {\r\n        this.setState({articlesSearched: aList})\r\n      } else {\r\n        aList.forEach(async newsItem => {\r\n          var html = newsItem.description;\r\n          var a = document.createElement(\"a\");\r\n          a.innerHTML = html;\r\n          var text = a.textContent || a.innerText || \"\";\r\n          var pathArray = newsItem.link.split( '/' );\r\n          var protocol = pathArray[0];\r\n          var host = pathArray[2];\r\n          var baseUrl = protocol + '//' + host;\r\n          await NewsDB.collection(topic.toLowerCase()).doc(newsItem.title).set({Title: newsItem.title, Link: newsItem.link, Description: text, source: baseUrl, pubDate:newsItem.pubDate});\r\n        })\r\n        await this.addSubscription(topic.toLowerCase());\r\n      }\r\n    }).catch((error) => {\r\n      console.log(error)\r\n    });\r\n  }\r\n\r\n\r\n\r\n  // async componentDidMount() {\r\n  //     setInterval(() => {    \r\n  //       this.clear()\r\n  //     },180000000)\r\n  // }\r\n\r\n  // async scheduleLocalNotifications() {\r\n  //   try {\r\n  //     // Request/ check permissions\r\n  //     if ((await LocalNotifications.requestPermission()).granted) {\r\n  //       await LocalNotifications.schedule({\r\n  //         notifications: [{\r\n  //           title: 'New articles in your feed!',\r\n  //           body: \"new news on \" + this.state.subs.pop(),\r\n  //           id: 1,\r\n  //           schedule: {\r\n  //             at:new Date(new Date().getTime() + 1000)\r\n  //           }\r\n  //         }]\r\n  //       });\r\n  //     }\r\n  //     // Clear old notifications in prep for refresh (OPTIONAL)\r\n  //   } catch (error) {\r\n  //     console.error(error);\r\n  //   }\r\n  // }\r\n\r\n\r\n\r\n  render() {\r\n    \r\n    return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        {/* <IonToolbar class ='feedToolbar'>\r\n          <IonTitle class='feedTitle'>\r\n            Feed\r\n          </IonTitle>\r\n          \r\n      <IonButtons slot=\"start\">\r\n          <IonButton onClick={() => {this.setState({isWeatherModalOpen: true})}}  fill='clear'>\r\n              <IonIcon icon={cloud} />\r\n          </IonButton>\r\n          </IonButtons>\r\n          <IonButtons slot=\"end\">\r\n          <IonButton onClick={() => {this.setState({showSubscription: true})}}  fill='clear'>\r\n              <IonIcon icon={bookmarks} />\r\n          </IonButton>\r\n          </IonButtons>\r\n          <IonButtons slot=\"end\">\r\n          <IonButton onClick={() => {this.setState({showModal: true})}}  fill='clear'>\r\n              <IonIcon icon={search} />\r\n          </IonButton>\r\n          </IonButtons>\r\n        </IonToolbar> */}\r\n        <FeedToolbar \r\n         openWeather={() => this.setState({isWeatherModalOpen: true})} \r\n         showSubs={() => {this.setState({showSubscription: true})}}\r\n         showModal={() => {this.setState({showModal: true})}}></FeedToolbar>\r\n      </IonHeader>\r\n      <IonContent>\r\n      <IonRefresher slot=\"fixed\" pullFactor={0.5} pullMin={100} pullMax={200} onIonRefresh={event=>this.doRefresh(event)}>\r\n        <IonRefresherContent></IonRefresherContent>\r\n      </IonRefresher>\r\n        <Weather toggleWeatherModal={this.toggleWeatherModal} isOpen={this.state.isWeatherModalOpen}/>\r\n        {/* Modal for searching topics */}\r\n    <IonModal isOpen={this.state.showModal} onDidDismiss={() =>this.setState({showModal: false})}>\r\n        <IonHeader>\r\n            <IonToolbar class='feedToolbar2'>\r\n        <IonButtons slot='start'>\r\n                <IonButton onClick={() => {this.setState({showModal: false})}} fill='clear'>\r\n                  <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n                </IonButton>\r\n        </IonButtons>\r\n\r\n        <IonTitle class='feedTitle2'>\r\n          Search Topics\r\n\r\n        </IonTitle>\r\n        </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        <IonSearchbar placeholder=\"Enter a Topic or Location\" value={this.state.topicSearched} onIonInput={(e: any) => this.setState({topicSearched:e.target.value} )} animated>\r\n      </IonSearchbar>\r\n\r\n      <IonButton id=\"searchButton\" expand=\"block\" fill=\"outline\" type=\"submit\" shape=\"round\" onClick={async () => await this.searchTopic(this.state.topicSearched)}>\r\n          Search\r\n      </IonButton>\r\n\r\n      <IonAlert\r\n          isOpen={this.state.showSearchAlert}\r\n          onDidDismiss={() => this.setState({showSearchAlert:false})}\r\n          message=\"Enter a valid topic or location\"\r\n       />\r\n      <IonLoading\r\n        isOpen={this.state.showLoading}\r\n        message={'Loading...'}\r\n        duration={7000}\r\n      />\r\n\r\n\r\n      {/* <IonItem> */}\r\n         {/* check if person wants to search location */}\r\n  {/* <IonLabel>Location based search</IonLabel> */}\r\n  {/* <IonCheckbox onIonChange={e=> this.setState({locationBased:e.detail.checked}) }></IonCheckbox> */}\r\n  {/* </IonItem> */}\r\n      <IonModal isOpen={this.state.isSearchingModal} >\r\n      <IonHeader>\r\n      <IonToolbar id=\"newsToolbar\">\r\n      <IonButtons slot='start'>\r\n                <IonButton onClick={() => this.setState({isSearchingModal: false})} fill='clear'>\r\n                  <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n                </IonButton>\r\n        </IonButtons>\r\n        <IonButtons slot='end'>\r\n        <IonButton onClick={()=> tempsubscribe(this.state.topicSearched, auth.currentUser?.uid) && this.setState({showSubscribeAlert:true})} fill='clear'>\r\n        <IonIcon id=\"addTopic\" icon={addCircle}/>\r\n        </IonButton>\r\n      </IonButtons>\r\n      <IonTitle id=\"newsTitle\">\r\n          News\r\n        </IonTitle>\r\n      </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent>\r\n\r\n      <ArticleList theArticleList={this.state.articlesSearched}></ArticleList>\r\n      <IonAlert\r\n          isOpen={this.state.showSubscribeAlert}\r\n          onDidDismiss={() => this.setState({showSubscribeAlert:false,isSearchingModal:false})}\r\n          message={\"Subscribed to \" + this.state.topicSearched}\r\n       />\r\n      </IonContent>\r\n      </IonModal>\r\n        </IonContent>\r\n    </IonModal>\r\n    <SubscriptionModal showModal={this.state.showSubscription}\r\n    closeButton={() => {this.setState({showSubscription: false})}}\r\n    unsubButton={this.unsubscribe.bind(this)}\r\n    subscriptions={this.state.subs}\r\n    ></SubscriptionModal>\r\n    {/*</IonContent><IonModal isOpen={this.state.showSubscription}>\r\n        <IonHeader>\r\n          <IonToolbar class='feedToolbar2'>\r\n            <IonButtons slot='start'>\r\n              <IonButton onClick={() => {this.setState({showSubscription: false})}} fill='clear'>\r\n                <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n\r\n          <IonTitle class='feedTitle2'>Subscriptions</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n          <IonCard>\r\n        {/* <ParentComponent>\r\n       {subs}\r\n      </ParentComponent>\r\n            <ChildrenComponent subs={this.state.subs} func={this.unsubscribe.bind(this)}></ChildrenComponent>\r\n          </IonCard>\r\n        </IonContent>\r\n    </IonModal> */}\r\n    <FeedList headerName=\"Recent News\" articleList={this.state.articles}></FeedList>\r\n    {/* <IonList>\r\n        <IonListHeader>\r\n          Recent News\r\n        </IonListHeader>\r\n      <ArticleList theArticleList={this.state.articles}></ArticleList>\r\n    </IonList> */}\r\n      </IonContent>\r\n\r\n    </IonPage>\r\n    )\r\n  }\r\n}\r\nexport default Feed;\r\n","import React from 'react';\r\nimport Placeholder from '../images/placeholder.png'\r\nimport './Message.css'\r\nimport {\r\n  IonAvatar,\r\n  IonItem,\r\n  IonLabel\r\n} from '@ionic/react'\r\n\r\ninterface MessageProps {\r\n  photo: string;\r\n  content: string;\r\n  sender: string;\r\n}\r\n\r\nfunction Message(props: MessageProps) {\r\n    return (\r\n      <div>\r\n      <IonLabel class='messageLabel' position='stacked'>{props.sender}</IonLabel>\r\n      <IonItem class='messageItem'>\r\n        <IonAvatar slot=\"start\">\r\n          <img src={props.photo !== '' ? props.photo : Placeholder} />\r\n        </IonAvatar>\r\n\r\n        <IonLabel class='messageContent'>{props.content}</IonLabel>\r\n      </IonItem>\r\n      </div>\r\n    );\r\n}\r\nexport default Message;\r\n","import { Plugins } from \"@capacitor/core\";\r\n// import { IonContent, IonPage } from \"@ionic/react\";\r\n// import firebase from \"firebase\";\r\n// import React from \"react\";\r\n// import { NewsDB } from \"../config/config\";\r\n// import { auth, db } from \"../firebase\";\r\n// import Feed from \"../pages/Feed\";\r\n// import { articleList } from \"./ArticleTypes\";\r\n// import FeedList from \"./FeedList\";\r\n// import { FeedProps, FeedState, GroupFeedProps, GroupFeedState } from \"./FeedTypes\";\r\n\r\nimport React from \"react\";\r\nimport { db } from \"../firebase\";\r\nimport { article } from \"./ArticleTypes\";\r\nimport FeedList from \"./FeedList\";\r\n\r\nconst { Storage } = Plugins;\r\n// class GroupFeed extends Feed {\r\n//     // state: FeedState = {\r\n//     //   articles: [],\r\n//     //   subs: [],\r\n//     //   articlesSearched:[],\r\n//     //   subscribedArticles: undefined,\r\n//     //   CurrentUser: null,\r\n//     //   topicSearched:null,\r\n//     //   showLoading:false,\r\n//     //   showModal:false,\r\n//     //   showSubscription:false,\r\n//     //   allArticles:[],\r\n//     //   locationBased:false,\r\n//     //   isWeatherModalOpen:false,\r\n//     //   isSearchingModal:false,\r\n//     //   showSearchAlert:false,\r\n//     //   showSubscribeAlert:false,\r\n//     //   isChanging:false\r\n//     // };\r\n//     state: FeedState = {\r\n//       articles: [],\r\n//       subs: [],\r\n//       articlesSearched:[],\r\n//       subscribedArticles: undefined,\r\n//       CurrentUser: null,\r\n//       topicSearched:null,\r\n//       showLoading:false,\r\n//       showModal:false,\r\n//       showSubscription:false,\r\n//       allArticles:[],\r\n//       locationBased:false,\r\n//       isSearchingModal:false,\r\n//       showSearchAlert:false,\r\n//       showSubscribeAlert:false,\r\n//       isChanging:false,\r\n//       isWeatherModalOpen: false\r\n//     }\r\n//     state2 = {\r\n//       groupId: \"\"\r\n//     }\r\n//     constructor(props: GroupFeedProps) {\r\n//       super(props)\r\n//       this.state2 = {groupId: props.groupId};\r\n//       let aList : any = [];\r\n//       auth.onAuthStateChanged(async () => {\r\n//         if(auth.currentUser) {\r\n//           //gets the username of our user\r\n//           await db.collection(\"users\").doc(auth.currentUser.uid).get().then(async doc => {\r\n//             if(doc.data()) {\r\n//               console.log('current user: ' + doc.data()!.username)\r\n//               this.setState({CurrentUser:doc.data()!.username})\r\n//             }\r\n//             // everytime there is a new subscription, update news onto main feed\r\n//             db.collection(\"topicSubscription\").doc(this.state.CurrentUser).onSnapshot(async (sub_list) => {\r\n//               this.setState({articles:[]})\r\n//               this.setState({subs: await sub_list.data()!.subList});\r\n//               if (sub_list.exists) {\r\n//                 console.log(\"current sub list: \", sub_list.data()!.subList)\r\n//                 for (var i = 0; i < this.state.subs.length; i++) {\r\n//                   var articlesLocal = await Storage.get({key:this.state.subs[i]})\r\n//                   // check local storage if collection exist\r\n//                   if ((articlesLocal.value)?.length === undefined || JSON.parse((articlesLocal.value)).length === 0) {\r\n//                     console.log(\"local storage empty for\", this.state.subs[i])\r\n//                     await NewsDB.collection(this.state.subs[i]).get()\r\n//                   .then(async (snapshot) => {\r\n//                     snapshot.forEach(doc => {\r\n//                       if (doc.exists) {\r\n//                         let articleItem = doc.data();\r\n//                         var html = articleItem.description; \r\n//                         var a = document.createElement(\"a\"); \r\n//                         a.innerHTML = html; \r\n//                         var text = a.textContent || a.innerText || \"\"; \r\n//                         aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source:articleItem.source, pubDate:articleItem.pubDate})\r\n//                       } else {\r\n//                         console.log(\"Cannot find anything in database.\")\r\n//                       }\r\n//                     })\r\n//                     var source = snapshot.metadata.fromCache ? \"local cache\" : \"server\";\r\n//                     console.log(\"Sub Articles came from \" + source);\r\n//                     await Storage.set({ key: this.state.subs[i], value: JSON.stringify(aList) });\r\n//                     this.setState({articles: aList})\r\n//                   })\r\n//                   } else {\r\n//                     let cache = JSON.parse(articlesLocal.value)\r\n//                     this.setState({articles: cache})\r\n//                     console.log(\"taking from capacitor cache\")\r\n//                   }\r\n//                 }\r\n//               } else {\r\n//                 db.collection(\"topicSubscription\").doc(this.state.CurrentUser).set({subList: []});\r\n//               }\r\n//             })\r\n//           }).catch(function(error) {\r\n//               console.log(\"Error getting document:\", error);\r\n//           });\r\n//           // end of getting data from server\r\n//         }\r\n//       })\r\n//     }\r\n    \r\n//     getId() {\r\n//       // return groupId\r\n//       return \"\";\r\n//     }\r\n\r\n//     render() {\r\n//       return (<IonContent>\r\n//         <FeedList headerName=\"Group News\" articleList={this.state.articles}></FeedList>\r\n//       </IonContent>)\r\n//     }\r\n//   }\r\n\r\nfunction GroupFeed(props: {headerName: string, articles: article[]}) {\r\n  // let articles = Array<article>();\r\n  // db.collection('topicSubscription').doc(props.groupId).get().then(docData => {\r\n  //   if (docData.exists) {\r\n  //     let subs = docData.data()?.subList;\r\n\r\n  //   }\r\n  // })\r\n  return <FeedList headerName={props.headerName} articleList={props.articles}></FeedList>\r\n}\r\nexport default GroupFeed;","import { IonModal, IonHeader, IonToolbar, IonButtons, IonButton, IonIcon, IonTitle, IonContent, IonSearchbar, IonAlert, IonLoading } from \"@ionic/react\";\r\nimport { closeCircleOutline, addCircle } from \"ionicons/icons\";\r\nimport React from \"react\";\r\nimport ArticleList from \"./ArticleList\";\r\nimport { article } from \"./ArticleTypes\";\r\n\r\nfunction SearchModal(props: {showModal: boolean, closeModal: any, topicSearched: string,\r\n     handleTopicChange: any, searchTopicButton: any, showSearchAlert: boolean,\r\n      dismissSearchAlertButton: any, showLoading: boolean, showSearchingModal: boolean, closeSearchingModal: any,\r\n    addTopicButton: any, articlesSearched: article[], showSubscribeAlert: boolean, dismissSubscribeAlertButton: any}) {\r\n        return (\r\n        <IonModal isOpen={props.showModal} onDidDismiss={props.closeModal}>\r\n    <IonHeader>\r\n        <IonToolbar class='feedToolbar2'>\r\n    <IonButtons slot='start'>\r\n            <IonButton onClick={props.closeModal} fill='clear'>\r\n              <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n            </IonButton>\r\n    </IonButtons>\r\n\r\n    <IonTitle class='feedTitle2'>\r\n      Search Topics\r\n    </IonTitle>\r\n    </IonToolbar>\r\n    </IonHeader>\r\n    <IonContent>\r\n    <IonSearchbar placeholder=\"Enter a Topic or Location\" value={props.topicSearched} onIonInput={props.handleTopicChange} animated>\r\n  </IonSearchbar>\r\n\r\n  <IonButton id=\"searchButton\" expand=\"block\" fill=\"outline\" type=\"submit\" shape=\"round\" onClick={async () => await props.searchTopicButton}>\r\n      Search\r\n  </IonButton>\r\n\r\n  <IonAlert\r\n      isOpen={props.showSearchAlert}\r\n      onDidDismiss={props.dismissSearchAlertButton}\r\n      message=\"Enter a valid topic or location\"\r\n   />\r\n  <IonLoading\r\n    isOpen={props.showLoading}\r\n    message={'Loading...'}\r\n    duration={7000}\r\n  />\r\n\r\n   {/* <IonItem> */}\r\n      {/* check if person wants to search location */}\r\n {/* <IonLabel>Location based search</IonLabel> */}\r\n {/* <IonCheckbox onIonChange={e=> this.setState({locationBased:e.detail.checked}) }></IonCheckbox> */}\r\n {/* </IonItem> */}\r\n   <IonModal isOpen={props.showSearchingModal} >\r\n   <IonHeader>\r\n   <IonToolbar id=\"newsToolbar\">\r\n   <IonButtons slot='start'>\r\n             <IonButton onClick={props.closeSearchingModal} fill='clear'>\r\n               <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n             </IonButton>\r\n     </IonButtons>\r\n     <IonButtons slot='end'>\r\n     <IonButton onClick={props.addTopicButton} fill='clear'>\r\n     <IonIcon id=\"addTopic\" icon={addCircle}/>\r\n     </IonButton>\r\n   </IonButtons>\r\n   <IonTitle id=\"newsTitle\">\r\n       News\r\n     </IonTitle>\r\n   </IonToolbar>\r\n   </IonHeader>\r\n   <IonContent>\r\n\r\n   <ArticleList theArticleList={props.articlesSearched}></ArticleList>\r\n   <IonAlert\r\n       isOpen={props.showSubscribeAlert}\r\n       onDidDismiss={props.dismissSubscribeAlertButton}\r\n       message={\"Subscribed to \" + props.topicSearched}\r\n    />\r\n   </IonContent>\r\n   </IonModal>\r\n     </IonContent>\r\n </IonModal>);\r\n\r\n}\r\nexport default SearchModal;","import React from 'react';\r\nimport {\r\n  IonModal,\r\n  IonContent,\r\n  IonHeader,\r\n  IonButtons,\r\n  IonButton,\r\n  IonToolbar,\r\n  IonIcon,\r\n  IonTitle,\r\n  IonAvatar,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonLabel,\r\n  IonItem,\r\n  IonInput,\r\n  IonSegment,\r\n  IonSegmentButton\r\n} from '@ionic/react'\r\n\r\nimport './GroupView.css'\r\n\r\nimport firebase, {db, auth} from '../firebase'\r\nimport Placeholder from '../images/placeholder.png'\r\nimport {\r\n  closeCircleOutline,\r\n  exitOutline,\r\n  peopleOutline,\r\n  settingsOutline,\r\n  chevronDownOutline,\r\n  pencilOutline,\r\n  checkmarkOutline,\r\n  cloudUploadOutline,\r\n  addOutline,\r\n  sendOutline\r\n} from 'ionicons/icons'\r\n\r\nimport Message from '../components/Message'\r\nimport GroupFeed from '../components/GroupFeed';\r\nimport { article, articleList } from '../components/ArticleTypes';\r\nimport { tempapiSearch, tempremoveSubscription, tempsearchTopic, tempsubscribe, validTopic } from '../components/TempFunctions';\r\nimport SubscriptionModal from '../components/SubscriptionModal';\r\nimport SearchModal from '../components/SearchModal';\r\nimport { NewsDB } from '../config/config';\r\n\r\n// type SubState = {\r\n//   showModal: boolean,\r\n//   closeButton: () => {},\r\n//   unsubscribeButton: () => {},\r\n//   subscriptions: string[]\r\n// }\r\n\r\ntype MyState = {\r\n  articles: article[],\r\n  blockedSources: string[],\r\n  subscriptions: string[],\r\n  showSubscriptionModal: boolean,\r\n  showSearchModal: boolean,\r\n  topicSearched: string,\r\n  showSearchAlert: boolean,\r\n  showLoading: boolean,\r\n  showSearchingModal: boolean,\r\n  articlesSearched: article[],\r\n  showSubscribeAlert: boolean,\r\n  groupSegment: string|undefined,\r\n  groupViewPopoverEvent: any,\r\n  isGroupViewPopoverOpen: boolean,\r\n  isSettingsModalOpen: boolean,\r\n  isMembersModalOpen: boolean,\r\n  isFriendsListModalOpen: boolean,\r\n  isNicknameReadOnly: boolean,\r\n  tempNickname: string,\r\n  members: Member[],\r\n  owner: Member | undefined,\r\n  messages: any[],\r\n  photoDictionary: any,\r\n  currentMessage: string,\r\n  nameDictionary: any,\r\n  blockedList: string[]\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n  groupDetails: GroupType;\r\n  isGroupModalOpen: boolean;\r\n  toggleGroupModal: any;\r\n  leaveGroup: () => void,\r\n  deleteGroup: () => void,\r\n  friendList: Friend[],\r\n  addFriendToGroup: (friend : string, group: string) => void,\r\n}\r\n\r\ntype GroupType = {\r\n  nickname: string;\r\n  members: string[];\r\n  id: string;\r\n  profilePicture: string;\r\n  owner: string;\r\n}\r\n\r\ntype Friend = {\r\n  uuid: string;\r\n  uid: string;\r\n  displayName: string;\r\n  photo: string;\r\n}\r\n\r\ntype Member = {\r\n  uid: string;\r\n  displayName: string;\r\n  photo: string;\r\n}\r\n\r\n\r\nclass GroupView extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    articles: [],\r\n    blockedSources:[],\r\n    subscriptions: [],\r\n    showSubscriptionModal: false,\r\n    showSearchModal: false,\r\n    topicSearched: \"\",\r\n    showSearchAlert: false,\r\n    showLoading: false,\r\n    showSearchingModal: false,\r\n    articlesSearched: [],\r\n    showSubscribeAlert: false,\r\n    groupSegment: 'feed',\r\n    groupViewPopoverEvent: undefined,\r\n    isGroupViewPopoverOpen: false,\r\n    isSettingsModalOpen: false,\r\n    isMembersModalOpen: false,\r\n    isFriendsListModalOpen: false,\r\n    isNicknameReadOnly: true,\r\n    tempNickname: this.props.groupDetails.nickname,\r\n    members: [],\r\n    owner: {uid: '', displayName: '', photo: ''},\r\n    messages: [],\r\n    photoDictionary: {},\r\n    currentMessage: '',\r\n    nameDictionary: {},\r\n    blockedList: []\r\n  };\r\n  realtime_db = firebase.database();\r\n  anchorRef: React.RefObject<HTMLDivElement>;\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n    this.pullImage()\r\n    this.anchorRef = React.createRef()\r\n  }\r\n\r\n  componentDidMount() {\r\n    let members : Member[] = []\r\n    this.props.groupDetails.members.forEach(memberUid => {\r\n      db.collection('profiles').doc(memberUid).get().then((document) => {\r\n        let member : Member = {\r\n          photo: document.data()?.photo,\r\n          displayName: document.data()!.displayName,\r\n          uid: memberUid\r\n        }\r\n\r\n        members.push(member)\r\n        if(memberUid === this.props.groupDetails.owner) {\r\n          this.setState({\r\n            owner: member\r\n          })\r\n        }\r\n      })\r\n    })\r\n    this.setState({\r\n      members: members,\r\n    })\r\n  }\r\n\r\n  componentDidUpdate(prevProps: MyProps) {\r\n    if(prevProps.groupDetails.members.length !== this.props.groupDetails.members.length) {\r\n      if(auth.currentUser) {\r\n        db.collection('blockedUsers').doc(auth.currentUser?.uid).get().then((document) => {\r\n          this.setState({blockedList: document.data()!.blocked})\r\n        })\r\n      }\r\n      let members : Member[] = []\r\n      let photoDictionary : any = new Object()\r\n      photoDictionary[\"World-Watchlist\"] = \"https://firebasestorage.googleapis.com/v0/b/worldwatchlist.appspot.com/o/images%2Fearth.jpg?alt=media&token=8dfce470-5dac-4126-b3d2-4f3d42a07b8a\"\r\n      let nameDictionary : any = new Object()\r\n      nameDictionary[\"World-Watchlist\"] = \"World-Watchlist\"\r\n      this.props.groupDetails.members.forEach(memberUid => {\r\n        db.collection('profiles').doc(memberUid).get().then((document) => {\r\n          let member : Member = {\r\n            photo: document.data()?.photo,\r\n            displayName: document.data()!.displayName,\r\n            uid: memberUid\r\n          }\r\n          members.push(member)\r\n          photoDictionary[member.uid] = member.photo\r\n          nameDictionary[member.uid] = member.displayName\r\n          console.log(photoDictionary[member.uid])\r\n          console.log(nameDictionary[member.uid])\r\n          if(memberUid === this.props.groupDetails.owner) {\r\n            this.setState({\r\n              owner: member\r\n            })\r\n          }\r\n        })\r\n      })\r\n      this.setState({\r\n        members: members,\r\n        photoDictionary: photoDictionary,\r\n        nameDictionary: nameDictionary\r\n      })\r\n    }\r\n    if(prevProps.groupDetails.id !== this.props.groupDetails.id) {\r\n      this.setState({messages: []})\r\n      let messages : any[] = []\r\n      this.realtime_db.ref(this.props.groupDetails.id).orderByKey().on('child_added', (snapshot) => {\r\n        messages.push({...snapshot.val(), key: snapshot.key})\r\n        console.log({...snapshot.val(), key: snapshot.key})\r\n\r\n        this.setState({messages: messages})\r\n        if ( this.state.groupSegment === \"messages\")\r\n          this.anchorRef.current!.scrollIntoView();\r\n\r\n      })\r\n    }\r\n  }\r\n\r\n   async pullImage() {\r\n      if(auth.currentUser) {\r\n      var storage = firebase.storage();\r\n      var storageRef = firebase.storage().ref();\r\n      var pathReference;\r\n      var pathName = 'groupImages/' +this.props.groupDetails!.id+'.jpg';\r\n      pathReference = storageRef.child(pathName);\r\n\r\n        pathReference.getDownloadURL().then((url)=> {\r\n         var img = document.getElementById('groupImage');\r\n         if(img!=null)\r\n          img.setAttribute('src', url);\r\n\r\n      })\r\n      .catch((error) => {\r\n  // A full list of error codes is available at\r\n  // https://firebase.google.com/docs/storage/web/handle-errors\r\n  switch (error.code) {\r\n    case 'storage/object-not-found':\r\n    firebase.storage().ref().child('placeholder.png').getDownloadURL().then((url)=> {\r\n         var img = document.getElementById('groupImg');\r\n         if(img!=null)\r\n          img.setAttribute('src', url);\r\n      })\r\n\r\n      break;\r\n    case 'storage/unauthorized':\r\n      // User doesn't have permission to access the object\r\n      break;\r\n    case 'storage/canceled':\r\n      // User canceled the upload\r\n      break;\r\n    case 'storage/unknown':\r\n      // Unknown error occurred, inspect the server response\r\n      break;\r\n  }\r\n});\r\n\r\n\r\n  }\r\n}\r\n\r\n  async uploadImage(selectorFiles: FileList)\r\n    {\r\n        if(selectorFiles[0]!=null) {\r\n        var storageRef = firebase.storage().ref();\r\n        var file = selectorFiles[0];\r\n        var uid = this.props.groupDetails!.id;\r\n        var newPicRef = storageRef.child('groupImages/' + uid+ '.jpg');\r\n        newPicRef.put(file);\r\n        await new Promise(r => setTimeout(r, 1000));\r\n        var url = await newPicRef.getDownloadURL();\r\n\r\n\r\n          db.collection('groups').doc(this.props.groupDetails.id).update({\r\n          profilePicture: url\r\n        })\r\n\r\n\r\n        this.pullImage();\r\n\r\n    }\r\n  }\r\n\r\n  sendMessage() {\r\n    let timestamp = Date.now()\r\n    this.realtime_db.ref(this.props.groupDetails.id).child(timestamp.toString()).set({message: this.state.currentMessage, sender: auth.currentUser?.uid})\r\n    this.setState({\r\n      currentMessage: ''\r\n    })\r\n  }\r\n\r\n  getId() {\r\n    return this.props.groupDetails.id;\r\n  }\r\n\r\n  handleSegmentSwitch(e: any) {\r\n    let segmentValue = e.detail.value;\r\n    this.setState({groupSegment: segmentValue});\r\n    if (segmentValue === \"messages\") {\r\n      console.log(\"Messages selected\");\r\n      this.anchorRef.current!.scrollIntoView();\r\n    }\r\n  }\r\n\r\n  subscribeCloseButton() {\r\n    this.setState({showSubscriptionModal: false});\r\n  }\r\n  \r\n  unsubscribeButton(index: number) {\r\n    tempremoveSubscription(index, this.getId(), this.state.subscriptions);\r\n  }\r\n\r\n  subscribeButton(topic: string) {\r\n    tempsubscribe(topic, this.getId());\r\n  }\r\n\r\n  searchCloseButton() {\r\n    this.setState({showSearchModal: false});\r\n  }\r\n\r\n  handleTopicChange(e: any) {\r\n    this.setState({topicSearched: e.target.value});\r\n  }\r\n\r\n  async handleSearchTopic() {\r\n    this.setState({showLoading: true, articlesSearched: []});\r\n    if (validTopic(this.state.topicSearched)) {\r\n      this.setState({showSearchingModal: true});\r\n      let searched = await tempsearchTopic(this.state.topicSearched, this.props.groupDetails.id);\r\n      this.setState({articlesSearched: searched});\r\n    } else {\r\n      console.log(\"Invalid topic\");\r\n      this.setState({showSearchAlert: true});\r\n    }\r\n    this.setState({showLoading: false});\r\n  }\r\n\r\n  handleDismissSearch() {\r\n    this.setState({showSearchAlert: false});\r\n  }\r\n\r\n  handleCloseSearchModal() {\r\n    this.setState({showSearchModal: false});\r\n  }\r\n\r\n  handleAddTopic() {\r\n    tempsubscribe(this.state.topicSearched, this.props.groupDetails.id);\r\n    this.setState({showSubscribeAlert: true});\r\n  }\r\n\r\n  handleDismissSubscribe() {\r\n    this.setState({showSubscriptionModal: false});\r\n  }\r\n  // // copied from Feed.tsx\r\n  // async searchTopic(topic:any) {\r\n  //   this.setState({showLoading: true})\r\n  //   this.setState({articlesSearched:[]})\r\n  //     if (topic === null || topic === undefined || topic === '') {\r\n  //       console.log(\"Enter a valid topic\");\r\n  //       this.setState({showSearchAlert:true})\r\n  //     } else {\r\n  //       this.toggleNewsModal()\r\n  //       let aList : articleList = [];\r\n  //       /* cache data on topic search */\r\n  //       await NewsDB.collection(topic.toLowerCase()).get()\r\n  //       .then(async (snapshot) => {\r\n  //       if (snapshot.empty) {\r\n  //         // searching through api and sending to firestore instead of searching in main collection\r\n  //         await tempapiSearch(topic, 'search', this.props.groupDetails.id)\r\n       \r\n  //       } else {\r\n  //       console.log(\"collection exist, will pull data from that collection\")\r\n\r\n  //       aList = [];\r\n  //       snapshot.docChanges().forEach((change) => {\r\n  //         if (change.doc.exists) {\r\n  //           let articleItem = change.doc.data();\r\n  //           var html = articleItem.Description;\r\n  //           var a = document.createElement(\"a\");\r\n  //           a.innerHTML = html;\r\n  //           var text = a.textContent || a.innerText || \"\";\r\n  //           aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source: articleItem.source, pubDate: articleItem.pubDate})\r\n  //         }\r\n  //         this.setState({articlesSearched: aList})\r\n  //       })\r\n  //       }\r\n  //     })\r\n  //   }\r\n  //   this.setState({showLoading: false})\r\n  //   return 0\r\n  // }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n      <IonModal swipeToClose={false} isOpen={this.state.isMembersModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar>\r\n            <IonButtons slot = 'start'>\r\n              <IonButton fill='clear' onClick={() => {this.setState({isMembersModalOpen: false})}}>\r\n                <IonIcon className='groupViewIcon' icon={chevronDownOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonTitle>Members</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n          <IonListHeader>Owner</IonListHeader>\r\n          <IonList>\r\n            <IonItem>\r\n              <IonTitle>\r\n                {this.state.owner!.displayName}\r\n              </IonTitle>\r\n            </IonItem>\r\n          </IonList>\r\n          <IonListHeader>Members ({this.props.groupDetails.members.length - 1}) </IonListHeader>\r\n          <IonList>\r\n            {\r\n              this.state.members.map((member) => {\r\n                return member.uid !== this.props.groupDetails!.owner ?\r\n                  <IonItem key={member.uid}>\r\n                    <IonTitle>\r\n                      {member.displayName}\r\n                    </IonTitle>\r\n                  </IonItem>\r\n                 : undefined\r\n              })\r\n            }\r\n          </IonList>\r\n        </IonContent>\r\n      </IonModal>\r\n\r\n      <IonModal swipeToClose={false} isOpen={this.state.isSettingsModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar>\r\n            <IonButtons slot = 'start'>\r\n              <IonButton fill='clear' onClick={() => {this.setState({isSettingsModalOpen: false})}}>\r\n                <IonIcon className='groupViewIcon' icon={chevronDownOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonTitle>Group Settings</IonTitle>\r\n\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        {\r\n          this.props.groupDetails.owner === auth.currentUser?.uid ?\r\n            <div>\r\n              <IonItem>\r\n                Change Profile Picture\r\n               <IonButtons slot = 'end'>\r\n\r\n                  <IonButton id = 'submit'>\r\n\r\n<input type=\"file\" id = 'fileSelect' onChange={ (e) => (this.uploadImage(e.target.files!)) } />\r\n\r\n <IonIcon id = 'cloudUploadOutline' icon={cloudUploadOutline}/>\r\n</IonButton>\r\n\r\n\r\n\r\n        </IonButtons>\r\n              </IonItem>\r\n              <IonItem>\r\n                <IonInput onIonChange={(e) => {this.setState({tempNickname: (e.target as HTMLInputElement).value})}} placeholder={this.props.groupDetails.nickname} readonly={this.state.isNicknameReadOnly} value={this.state.tempNickname}/>\r\n                <IonButton onClick={\r\n                  () => {this.setState({\r\n                    isNicknameReadOnly: !this.state.isNicknameReadOnly\r\n                  });\r\n                  db.collection('groups').doc(this.props.groupDetails.id).update({\r\n                    nickname: this.state.tempNickname\r\n                  })\r\n                }\r\n                } slot='end' fill='clear'>\r\n                  <IonIcon icon={this.state.isNicknameReadOnly ? pencilOutline : checkmarkOutline} />\r\n                </IonButton>\r\n              </IonItem>\r\n              <IonItem onClick={() => {this.setState({isSettingsModalOpen: false}); this.props.deleteGroup()}}>\r\n                Delete Group\r\n              </IonItem>\r\n            </div> : undefined\r\n        }\r\n\r\n        </IonContent>\r\n      </IonModal>\r\n\r\n      <IonModal swipeToClose={false} isOpen={this.state.isFriendsListModalOpen}>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonButtons slot = 'start'>\r\n            <IonButton fill='clear' onClick={() => {this.setState({isFriendsListModalOpen: false})}}>\r\n              <IonIcon className='groupViewIcon' icon={chevronDownOutline}/>\r\n            </IonButton>\r\n          </IonButtons>\r\n          <IonTitle>Add Member</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent>\r\n        <IonListHeader>Friends ({this.props.friendList.length})</IonListHeader>\r\n        <IonList>\r\n          {\r\n            this.props.friendList.map((FriendObj) => {\r\n              return (\r\n                <IonItem key={FriendObj.uid}>\r\n                  <IonLabel>\r\n                    {FriendObj.displayName}\r\n                  </IonLabel>\r\n                  <IonButton onClick={() => {this.props.addFriendToGroup(FriendObj.uid, this.props.groupDetails.id)}} fill='clear'>\r\n                    <IonIcon slot='end' icon={this.props.groupDetails.members.includes(FriendObj.uid) ? checkmarkOutline : addOutline}/>\r\n                  </IonButton>\r\n                </IonItem>\r\n              )\r\n            })\r\n          }\r\n        </IonList>\r\n      </IonContent>\r\n      </IonModal>\r\n\r\n      <SubscriptionModal showModal={this.state.showSubscriptionModal}\r\n      closeButton={this.subscribeCloseButton.bind(this)}\r\n      unsubButton={this.unsubscribeButton.bind(this)}\r\n      subscriptions={this.state.subscriptions}></SubscriptionModal>\r\n\r\n      <SearchModal showModal={this.state.showSearchModal}\r\n      closeModal={this.searchCloseButton.bind(this)}\r\n      topicSearched={this.state.topicSearched}\r\n      handleTopicChange={this.handleTopicChange.bind(this)}\r\n      searchTopicButton={this.handleSearchTopic.bind(this)}\r\n      showSearchAlert={this.state.showSearchAlert}\r\n      dismissSearchAlertButton={this.handleDismissSearch.bind(this)}\r\n      showLoading={this.state.showLoading}\r\n      showSearchingModal={this.state.showSearchModal}\r\n      closeSearchingModal={this.handleCloseSearchModal.bind(this)}\r\n      addTopicButton={this.handleAddTopic.bind(this)}\r\n      articlesSearched={this.state.articlesSearched}\r\n      showSubscribeAlert={this.state.showSubscribeAlert}\r\n      dismissSubscribeAlertButton={this.handleDismissSubscribe.bind(this)}></SearchModal>\r\n\r\n        <IonPopover\r\n          cssClass='groupViewPopover'\r\n          event={this.state.groupViewPopoverEvent}\r\n          isOpen={this.state.isGroupViewPopoverOpen}\r\n          onDidDismiss={() => {this.setState({isGroupViewPopoverOpen: false, groupViewPopoverEvent: undefined})}}\r\n        >\r\n          <IonContent>\r\n            <IonList>\r\n              <IonListHeader id='groupViewPopoverListHeader'><b>Group Options</b></IonListHeader>\r\n              <IonItem button={true} onClick={() => {this.setState({isGroupViewPopoverOpen: false, isMembersModalOpen: true})}}>\r\n                <IonLabel>Members</IonLabel>\r\n                <IonIcon className='groupViewPopoverIcon' slot='end' icon={peopleOutline}/>\r\n              </IonItem>\r\n              <IonItem button={true}  onClick={() => {this.setState({isGroupViewPopoverOpen: false, isFriendsListModalOpen: true})}}>\r\n                <IonLabel>Add Member</IonLabel>\r\n                <IonIcon className='groupViewPopoverIcon' slot='end' icon={addOutline}/>\r\n              </IonItem>\r\n              { (auth.currentUser?.uid === this.props.groupDetails.owner) ?\r\n              <div>\r\n              <IonItem button={true}  onClick={() => {this.setState({isGroupViewPopoverOpen: false, showSubscriptionModal: true})}}>\r\n                <IonLabel>Subscriptions</IonLabel>\r\n                <IonIcon className='groupViewPopoverIcon' slot='end' /*icon={}*//>\r\n              </IonItem>\r\n              <IonItem button={true}  onClick={() => {this.setState({isGroupViewPopoverOpen: false, showSearchModal: true})}}>\r\n                <IonLabel>Search for Subscriptions</IonLabel>\r\n                <IonIcon className='groupViewPopoverIcon' slot='end' /*icon={settingsOutline}*//>\r\n              </IonItem>\r\n              </div> : null\r\n              }\r\n              <IonItem button={true}  onClick={() => {this.setState({isGroupViewPopoverOpen: false, isSettingsModalOpen: true})}}>\r\n                <IonLabel>Settings</IonLabel>\r\n                <IonIcon className='groupViewPopoverIcon' slot='end' icon={settingsOutline}/>\r\n              </IonItem>\r\n              <IonItem onClick={() => {this.setState({isGroupViewPopoverOpen: false}); this.props.leaveGroup()}} button={true}>\r\n                <IonLabel id='leaveGroup'>Leave Group</IonLabel>\r\n                <IonIcon id='groupViewPopoverLeave' slot='end' icon={exitOutline}/>\r\n              </IonItem>\r\n\r\n            </IonList>\r\n          </IonContent>\r\n        </IonPopover>\r\n\r\n        <IonModal cssClass='modalScroll' swipeToClose={true} isOpen={this.props.isGroupModalOpen}>\r\n          <IonHeader>\r\n            <IonToolbar>\r\n              <IonButtons slot = 'start'>\r\n                <IonButton fill='clear' onClick={() => {this.props.toggleGroupModal()}}>\r\n                  <IonIcon className='groupViewIcon' icon={closeCircleOutline}/>\r\n                </IonButton>\r\n              </IonButtons>\r\n              <IonButtons slot='end'>\r\n\r\n              <IonAvatar onClick={(event : any) => {event.persist(); this.setState({isGroupViewPopoverOpen: true, groupViewPopoverEvent: event})}} className='groupViewProfilePicture'>\r\n                <img src = {this.props.groupDetails.profilePicture !== \"\" ? this.props.groupDetails.profilePicture : Placeholder}/>\r\n              </IonAvatar>\r\n\r\n\r\n              </IonButtons>\r\n\r\n              <IonTitle>{this.props.groupDetails ? this.props.groupDetails.nickname : undefined}</IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n          {/* Pulled from Social Page */}\r\n          <IonSegment id=\"groupSegment\" onIonChange={this.handleSegmentSwitch.bind(this)} value={this.state.groupSegment}>\r\n          <IonSegmentButton value='messages' class=\"groupSegmentButton\">\r\n            <IonLabel>Messages</IonLabel>\r\n          </IonSegmentButton>\r\n          <IonSegmentButton value='feed' class=\"groupSegmentButton\">\r\n            <IonLabel>Feed</IonLabel>\r\n          </IonSegmentButton>\r\n        </IonSegment>\r\n          {(this.state.groupSegment === \"messages\") ?\r\n          <IonContent className='groupViewMessageContainer' scrollY={true}>\r\n          <div className='messageContainerDiv'>\r\n            {this.state.messages.map((message) => {\r\n              return !this.state.blockedList.includes(message.sender) ?\r\n               <Message key={message.key} sender={this.state.nameDictionary[message.sender]} content={message.message}  photo={this.state.photoDictionary[message.sender]} /> :\r\n               <Message key={message.key} sender={this.state.nameDictionary[message.sender]} content={'This content is from a blocked user.'}  photo={this.state.photoDictionary[message.sender]} />\r\n            })}\r\n            <div className='groupViewAnchor'  />\r\n            <div className='groupViewAnchor2' ref={this.anchorRef} />\r\n          </div>\r\n            <div className='groupViewMessageBox'>\r\n              <IonInput value={this.state.currentMessage} onIonChange={(e) => {this.setState({currentMessage: (e.target as HTMLInputElement).value})}} className='groupViewMessageInput' />\r\n              <IonButton onClick={() => {this.sendMessage()}} fill='clear' className='groupViewMessageButton'>\r\n                <IonIcon slot=\"icon-only\" className='groupViewMessageSend' icon={sendOutline} />\r\n              </IonButton>\r\n            </div>\r\n            <div className='bottomSpaceFiller' />\r\n          </IonContent>\r\n\r\n          :\r\n          <IonContent>\r\n            <GroupFeed headerName=\"Group News\" articles={this.state.articles}></GroupFeed>\r\n          </IonContent>\r\n  }\r\n        </IonModal>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default GroupView;\r\n","import React from 'react';\r\nimport {\r\n  IonModal,\r\n  IonContent,\r\n  IonHeader,\r\n  IonButtons,\r\n  IonButton,\r\n  IonToolbar,\r\n  IonIcon,\r\n  IonTitle,\r\n  IonAvatar,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonLabel,\r\n  IonItem,\r\n  IonInput\r\n} from '@ionic/react'\r\n\r\nimport './AddFriends.css'\r\n\r\nimport firebase, {db, auth} from '../firebase'\r\nimport Placeholder from '../images/placeholder.png'\r\nimport {\r\n  closeCircleOutline,\r\n  addCircleOutline\r\n} from 'ionicons/icons'\r\n\r\ntype MyState = {\r\n  targetUserId: string;\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n  isAddFriendModalOpen: boolean;\r\n  addFriend: (targetUserId: string) => void;\r\n  toggleAddFriendModal: () => void;\r\n}\r\n\r\n\r\nclass AddFriends extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    targetUserId: ''\r\n  };\r\n\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <IonModal isOpen={this.props.isAddFriendModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar class='socialToolbar2'>\r\n            <IonButtons slot='start'>\r\n              <IonButton onClick={() => {this.props.toggleAddFriendModal()}} id='addFriendModalCloseButton' fill='clear'>\r\n                <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonTitle class='socialTitle2'>\r\n              Add Friend\r\n            </IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        <IonLabel class='addFriendDescription'>\r\n        Please input the email of the user you wish to add.\r\n        </IonLabel>\r\n          <IonItem lines='none' id='searchFriendItem'>\r\n            <IonInput id='addFriendSearch' onIonChange={(e) => {this.setState({targetUserId: (e.target as HTMLInputElement).value})}} />\r\n            <IonButton onClick={() => {this.props.addFriend(this.state.targetUserId)}} slot='end' id='addFriendButton' fill='clear'>\r\n              <IonIcon id='addFriendButtonIcon' icon={addCircleOutline} />\r\n            </IonButton>\r\n          </IonItem>\r\n\r\n        </IonContent>\r\n      </IonModal>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default AddFriends;\r\n","import React from 'react';\r\nimport {\r\n  IonModal,\r\n  IonContent,\r\n  IonHeader,\r\n  IonButtons,\r\n  IonButton,\r\n  IonToolbar,\r\n  IonIcon,\r\n  IonTitle,\r\n  IonAvatar,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonLabel,\r\n  IonItem,\r\n  IonInput\r\n} from '@ionic/react'\r\n\r\nimport './GroupView.css'\r\n\r\nimport firebase, {db, auth} from '../firebase'\r\nimport Placeholder from '../images/placeholder.png'\r\nimport {\r\n  closeCircleOutline,\r\n  addCircleOutline\r\n} from 'ionicons/icons'\r\n\r\ntype MyState = {\r\n  incomingFriends: Friend[];\r\n  outgoingFriends: Friend[];\r\n}\r\n\r\ntype Friend = {\r\n  displayName: string;\r\n  photo: string;\r\n  uid: string;\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n  isPendingRequestsModalOpen: boolean;\r\n  togglePendingRequestsModal: () => void;\r\n  incomingRequests: string[];\r\n  outgoingRequests: string[];\r\n  acceptFriend: (targetUserId: string) => void;\r\n  declineFriend: (targetUserId: string) => void;\r\n  cancelOutgingRequest: (targetUserId: string) => void;\r\n}\r\n\r\n\r\nclass PendingRequests extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    incomingFriends: [],\r\n    outgoingFriends: []\r\n  };\r\n\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    this.props.incomingRequests.map(IncomingFriend => {\r\n      return db.collection(\"profiles\").doc(IncomingFriend).get().then((document) => {\r\n        if(document.data()) {\r\n          this.setState({\r\n            incomingFriends: [...this.state.incomingFriends, {displayName: document.data()!.displayName, uid: IncomingFriend, photo: document.data()!.photo}]\r\n          })\r\n        }\r\n      })\r\n    })\r\n    this.props.outgoingRequests.map(OutgoingFriend => {\r\n      return db.collection(\"profiles\").doc(OutgoingFriend).get().then((document) => {\r\n        if(document.data()) {\r\n          this.setState({\r\n            outgoingFriends: [...this.state.outgoingFriends, {displayName: document.data()!.displayName, uid: OutgoingFriend, photo: document.data()!.photo}]\r\n          })\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  componentDidUpdate(prevProps: MyProps) {\r\n\r\n    if(this.props.incomingRequests !== prevProps.incomingRequests) {\r\n      this.setState({\r\n        incomingFriends: []\r\n      })\r\n        this.props.incomingRequests.map(IncomingFriend => {\r\n          return db.collection(\"profiles\").doc(IncomingFriend).get().then((document) => {\r\n            if(document.data()) {\r\n              this.setState({\r\n                incomingFriends: [...this.state.incomingFriends, {displayName: document.data()!.displayName, uid: IncomingFriend, photo: document.data()!.photo}]\r\n              })\r\n            }\r\n          })\r\n        })\r\n    }\r\n    if(this.props.outgoingRequests !== prevProps.outgoingRequests) {\r\n      this.setState({\r\n        outgoingFriends: []\r\n      })\r\n      this.props.outgoingRequests.map(async OutgoingFriend => {\r\n        const document = await db.collection(\"profiles\").doc(OutgoingFriend).get();\r\n        if (document.data()) {\r\n          this.setState({\r\n            outgoingFriends: [...this.state.outgoingFriends, { displayName: document.data()!.displayName, uid: OutgoingFriend, photo: document.data()!.photo }]\r\n          });\r\n        }\r\n    })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <IonModal isOpen={this.props.isPendingRequestsModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar id='socialToolbar2'>\r\n            <IonButtons slot='start'>\r\n              <IonButton onClick={() => {this.props.togglePendingRequestsModal()}} id='addFriendModalCloseButton' fill='clear'>\r\n                <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonTitle id=\"socialTitle2\">\r\n              Pending Requests\r\n            </IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n          <h2 id='incomingFriendRequestHeader'>Incoming Friend Requests</h2>\r\n          {this.state.incomingFriends.map(IncomingFriend =>\r\n            <IonItem key={IncomingFriend.uid}>\r\n              <IonLabel>{IncomingFriend.displayName}</IonLabel>\r\n              <IonButton onClick={() => {this.props.acceptFriend(IncomingFriend.uid)}} className='acceptButton' slot='end' fill='clear'>\r\n                <IonIcon className='addIcon' icon={addCircleOutline} />\r\n              </IonButton>\r\n              <IonButton onClick={() => {this.props.declineFriend(IncomingFriend.uid)}} className='denyButton' slot='end' fill='clear'>\r\n                <IonIcon className='denyIcon' icon={closeCircleOutline} />\r\n              </IonButton>\r\n            </IonItem>)}\r\n\r\n          <h2 id='outgoingFriendRequestHeader'>Outgoing Friend Requests</h2>\r\n          {this.state.outgoingFriends.map(OutgoingFriend =>\r\n            <IonItem key={OutgoingFriend.uid}>\r\n              <IonLabel>{OutgoingFriend.displayName}</IonLabel>\r\n              <IonButton onClick={() => {this.props.cancelOutgingRequest(OutgoingFriend.uid)}} className='denyButton' slot='end' fill='clear'>\r\n                <IonIcon className='denyIcon' icon={closeCircleOutline} />\r\n              </IonButton>\r\n            </IonItem>)}\r\n        </IonContent>\r\n      </IonModal>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default PendingRequests;\r\n","import React from 'react';\r\nimport {\r\n  IonModal,\r\n  IonContent,\r\n  IonHeader,\r\n  IonButtons,\r\n  IonButton,\r\n  IonToolbar,\r\n  IonIcon,\r\n  IonTitle,\r\n  IonAvatar,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonLabel,\r\n  IonItem,\r\n  IonInput,\r\n} from '@ionic/react'\r\n\r\nimport './FriendView.css'\r\n\r\nimport firebase, {db, auth} from '../firebase'\r\nimport Placeholder from '../images/placeholder.png'\r\nimport {\r\n  closeCircleOutline,\r\n  sendOutline,\r\n  personRemoveOutline\r\n} from 'ionicons/icons'\r\n\r\nimport Message from '../components/Message'\r\n\r\n\r\n\r\ntype MyState = {\r\n  friendViewPopoverEvent: any,\r\n  isFriendViewPopoverOpen: boolean,\r\n  isSettingsModalOpen: boolean,\r\n  isMembersModalOpen: boolean,\r\n  isFriendsListModalOpen: boolean,\r\n  messages: any[],\r\n  photoDictionary: any,\r\n  currentMessage: string,\r\n  nameDictionary: any\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n  friendDetails: Friend;\r\n  isFriendModalOpen: boolean;\r\n  toggleFriendModal: any;\r\n  removeFriend: (targetUserId: string) => void,\r\n}\r\n\r\n\r\ntype Friend = {\r\n  uuid: string;\r\n  uid: string;\r\n  displayName: string;\r\n  photo: string;\r\n}\r\n\r\n\r\n\r\nclass FriendView extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    friendViewPopoverEvent: undefined,\r\n    isFriendViewPopoverOpen: false,\r\n    isSettingsModalOpen: false,\r\n    isMembersModalOpen: false,\r\n    isFriendsListModalOpen: false,\r\n    messages: [],\r\n    photoDictionary: {},\r\n    currentMessage: '',\r\n    nameDictionary: {}\r\n  };\r\n  realtime_db = firebase.database();\r\n  anchorRef: React.RefObject<HTMLDivElement>;\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n    this.anchorRef = React.createRef()\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n  }\r\n\r\n  componentDidUpdate(prevProps: MyProps) {\r\n    if(prevProps.friendDetails.uid !== this.props.friendDetails.uid) {\r\n      this.setState({messages: []})\r\n      let photoDictionary : any = new Object()\r\n      photoDictionary[\"World-Watchlist\"] = \"https://firebasestorage.googleapis.com/v0/b/worldwatchlist.appspot.com/o/images%2Fearth.jpg?alt=media&token=8dfce470-5dac-4126-b3d2-4f3d42a07b8a\"\r\n      let nameDictionary : any = new Object()\r\n      nameDictionary[\"World-Watchlist\"] = \"World-Watchlist\"\r\n      if(auth.currentUser?.uid) {\r\n        db.collection('profiles').doc(auth.currentUser!.uid).get().then((document) => {\r\n          nameDictionary[auth.currentUser!.uid] = document.data()!.displayName\r\n          photoDictionary[auth.currentUser!.uid] = document.data()!.photo\r\n          photoDictionary[this.props.friendDetails.uid] = this.props.friendDetails.photo\r\n          nameDictionary[this.props.friendDetails.uid] = this.props.friendDetails.displayName\r\n          console.log(this.props.friendDetails.photo)\r\n        })\r\n      }\r\n      let messages : any[] = []\r\n      if(this.props.friendDetails.uuid !== '') {\r\n        this.realtime_db.ref(this.props.friendDetails.uuid).orderByKey().on('child_added', (snapshot: { val: () => any; key: any; }) => {\r\n          messages.push({...snapshot.val(), key: snapshot.key})\r\n          console.log({...snapshot.val(), key: snapshot.key})\r\n          this.setState({messages: messages})\r\n          this.anchorRef.current!.scrollIntoView();\r\n        })\r\n      }\r\n      this.setState({\r\n        photoDictionary: photoDictionary,\r\n        nameDictionary: nameDictionary\r\n      })\r\n    }\r\n  }\r\n\r\n  sendMessage() {\r\n    let timestamp = Date.now()\r\n    this.realtime_db.ref(this.props.friendDetails.uuid).child(timestamp.toString()).set({message: this.state.currentMessage, sender: auth.currentUser?.uid})\r\n    this.setState({\r\n      currentMessage: ''\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <IonPopover\r\n          cssClass='friendViewPopover'\r\n          event={this.state.friendViewPopoverEvent}\r\n          isOpen={this.state.isFriendViewPopoverOpen}\r\n          onDidDismiss={() => {this.setState({isFriendViewPopoverOpen: false, friendViewPopoverEvent: undefined})}}\r\n        >\r\n          <IonContent>\r\n            <IonList>\r\n              <IonListHeader id='friendViewPopoverListHeader'><b>Friend Options</b></IonListHeader>\r\n              <IonItem button={true} onClick={() => {this.props.removeFriend(this.props.friendDetails.uid)}}>\r\n                <IonLabel>Remove Friend</IonLabel>\r\n                <IonIcon className='friendViewPopoverIcon' slot='end' icon={personRemoveOutline}/>\r\n              </IonItem>\r\n            </IonList>\r\n          </IonContent>\r\n        </IonPopover>\r\n\r\n        <IonModal cssClass='modalScroll' swipeToClose={true} isOpen={this.props.isFriendModalOpen}>\r\n          <IonHeader>\r\n            <IonToolbar>\r\n              <IonButtons slot = 'start'>\r\n                <IonButton fill='clear' onClick={() => {this.props.toggleFriendModal()}}>\r\n                  <IonIcon className='friendViewIcon' icon={closeCircleOutline}/>\r\n                </IonButton>\r\n              </IonButtons>\r\n              <IonButtons slot='end'>\r\n\r\n              <IonAvatar onClick={(event : any) => {event.persist(); this.setState({isFriendViewPopoverOpen: true, friendViewPopoverEvent: event})}} className='friendViewProfilePicture'>\r\n                <img src = {this.props.friendDetails.photo !== \"\" && this.props.friendDetails.photo !== undefined ? this.props.friendDetails.photo : Placeholder}/>\r\n              </IonAvatar>\r\n\r\n\r\n              </IonButtons>\r\n\r\n              <IonTitle>{this.props.friendDetails ? this.props.friendDetails.displayName : undefined}</IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n\r\n\r\n          <IonContent className='friendViewMessageContainer' scrollY={true}>\r\n          <div className='messageContainerDiv'>\r\n            {this.state.messages.map((message) => {\r\n              return <Message key={message.key} sender={this.state.nameDictionary[message.sender]} content={message.message} photo={this.state.photoDictionary[message.sender]} />\r\n            })}\r\n            <div className='friendViewAnchor'  />\r\n            <div className='friendViewAnchor2' ref={this.anchorRef} />\r\n          </div>\r\n            <div className='friendViewMessageBox'>\r\n              <IonInput value={this.state.currentMessage} onIonChange={(e) => {this.setState({currentMessage: (e.target as HTMLInputElement).value})}} className='friendViewMessageInput' />\r\n              <IonButton onClick={() => {this.sendMessage()}} fill='clear' className='friendViewMessageButton'>\r\n                <IonIcon slot=\"icon-only\" className='friendViewMessageSend' icon={sendOutline} />\r\n              </IonButton>\r\n            </div>\r\n            <div className='bottomSpaceFiller' />\r\n          </IonContent>\r\n        </IonModal>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default FriendView;\r\n","import React from 'react';\r\nimport {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonContent,\r\n  IonTitle,\r\n  IonButtons,\r\n  IonButton,\r\n  IonIcon,\r\n  IonModal,\r\n  IonInput,\r\n  IonItem,\r\n  IonLabel,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonAvatar,\r\n  IonSegment,\r\n  IonSegmentButton\r\n} from '@ionic/react'\r\n\r\nimport GroupView from './GroupView'\r\nimport Placeholder from '../images/placeholder.png'\r\n\r\nimport firebase, {db, auth} from '../firebase'\r\nimport {\r\n  personAddOutline,\r\n  closeCircleOutline,\r\n  listOutline,\r\n  addOutline,\r\n  addCircleOutline,\r\n  sendOutline\r\n} from 'ionicons/icons'\r\n\r\nimport './Social.css'\r\nimport AddFriends from './AddFriends';\r\nimport PendingRequests from './PendingRequests';\r\nimport FriendView from './FriendView'\r\n\r\ntype MyState = {\r\n  isAddFriendModalOpen: boolean;\r\n  targetUsername: string;\r\n  friendsList: Friend[];\r\n  blockedUsers: [];\r\n  isPendingRequestsModalOpen: boolean;\r\n  isMessengerModalOpen: boolean;\r\n  incomingRequests: string[];\r\n  outgoingRequests: string[];\r\n  messageRef: string;\r\n  isSocialPopoverOpen: boolean;\r\n  socialPopoverEvent: any;\r\n  isCreateGroupModalOpen: boolean;\r\n  groupNickname: string;\r\n  groupArray: Group[];\r\n  numGroups: number;\r\n  unsubscribeGroupArray: any[];\r\n  groupDetails: Group;\r\n  isGroupModalOpen: boolean;\r\n  unsubscribeFriendsList: any;\r\n  unsubscribeBlockedUsers: any;\r\n  unsubscribeIncomingRequests: any;\r\n  unsubscribeOutgoingRequests: any;\r\n  segmentSelected: string | undefined;\r\n  unsubscribeIndiviudalFriends: any[];\r\n  activeMessages: any[];\r\n  isFriendModalOpen: boolean;\r\n  friendDetails: Friend\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n}\r\n\r\ntype Group = {\r\n  nickname: string;\r\n  members: string[];\r\n  id: string;\r\n  profilePicture: string;\r\n  owner: string;\r\n}\r\n\r\ntype Friend = {\r\n  uuid: string;\r\n  uid: string;\r\n  displayName: string;\r\n  photo: string;\r\n}\r\n\r\nclass Social extends React.Component<MyProps, MyState> {\r\n  realtime_db = firebase.database();\r\n  state: MyState = {\r\n    isAddFriendModalOpen: false,\r\n    targetUsername: '',\r\n    friendsList: [],\r\n    blockedUsers: [],\r\n    isPendingRequestsModalOpen: false,\r\n    isMessengerModalOpen: false,\r\n    incomingRequests: [],\r\n    outgoingRequests: [],\r\n    messageRef: '',\r\n    isSocialPopoverOpen: false,\r\n    socialPopoverEvent: undefined,\r\n    isCreateGroupModalOpen: false,\r\n    groupNickname: '',\r\n    groupArray: [],\r\n    numGroups: 0,\r\n    unsubscribeGroupArray: [],\r\n    groupDetails: {\r\n      nickname: '',\r\n      members: [],\r\n      id: '',\r\n      profilePicture: '',\r\n      owner: '',\r\n    },\r\n    friendDetails: {\r\n      uuid: '',\r\n      uid: '',\r\n      displayName: '',\r\n      photo: ''\r\n    },\r\n    isGroupModalOpen: false,\r\n    unsubscribeFriendsList: () => {},\r\n    unsubscribeBlockedUsers: null,\r\n    unsubscribeIncomingRequests: () => {},\r\n    unsubscribeOutgoingRequests: () => {},\r\n    unsubscribeIndiviudalFriends: [],\r\n    segmentSelected: 'groups',\r\n    activeMessages: [],\r\n    isFriendModalOpen: false\r\n  };\r\n\r\n\r\n  unsubscribeGroups: any;\r\n\r\n\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n\r\n\r\n    //Begin Functin bindings\r\n\r\n    this.addFriend = this.addFriend.bind(this);\r\n    this.acceptFriend = this.acceptFriend.bind(this);\r\n    this.declineFriend = this.declineFriend.bind(this);\r\n    this.removeFriend = this.removeFriend.bind(this);\r\n    this.blockUser = this.blockUser.bind(this);\r\n    this.cancelOutgingRequest = this.cancelOutgingRequest.bind(this);\r\n    this.generateUniqueFriendId = this.generateUniqueFriendId.bind(this);\r\n    this.generateUniqueGroupId = this.generateUniqueGroupId.bind(this);\r\n    this.createGroup = this.createGroup.bind(this);\r\n    this.toggleGroupModal = this.toggleGroupModal.bind(this);\r\n    this.deleteGroup = this.deleteGroup.bind(this);\r\n    this.leaveGroup = this.leaveGroup.bind(this);\r\n    this.toggleGroupModal = this.toggleGroupModal.bind(this);\r\n    this.toggleAddFriendModal = this.toggleAddFriendModal.bind(this);\r\n    this.togglePendingRequestsModal = this.togglePendingRequestsModal.bind(this);\r\n    this.addFriendToGroup = this.addFriendToGroup.bind(this);\r\n    this.generateRandomString = this.generateRandomString.bind(this);\r\n    this.toggleFriendModal = this.toggleFriendModal.bind(this);\r\n    //End Function Bindings\r\n\r\n    //Begin firebase data subscriptins\r\n    auth.onAuthStateChanged(() => {\r\n      if(auth.currentUser) {\r\n        //gets the username of our user\r\n        db.collection(\"profiles\").doc(auth.currentUser.uid).get().then(doc => {\r\n          if(doc.data()) {\r\n            //creates a subscription to our user's friends list\r\n\r\n            let unsubscribeFriendsList = db.collection('friends').doc(auth.currentUser?.uid).onSnapshot((friendsListSnapshot) => {\r\n            let friends : Friend[] = []\r\n            friendsListSnapshot.data()!.friendsList.map((friend : string) => {\r\n              db.collection('profiles').doc(friend).onSnapshot((profileSnapshot) => {\r\n                db.collection('friends').doc(auth.currentUser?.uid).collection('uuids').doc(friend).get().then((uuidDoc) => {\r\n\r\n                  let stateFriendsList = this.state.friendsList\r\n                  let friendObj = {\r\n                    photo: profileSnapshot.data()?.photo,\r\n                    displayName: profileSnapshot.data()!.displayName,\r\n                    uuid: uuidDoc.data()!.uuid,\r\n                    uid: friend\r\n                  }\r\n                  let sentinel = true\r\n                  stateFriendsList.map((stateFriend, index) => {\r\n                    if(stateFriendsList[index].uid === friendObj.uid) {\r\n                      stateFriendsList[index] = friendObj\r\n                      sentinel = false\r\n                    }\r\n\r\n                  })\r\n                  if(sentinel) {\r\n                    stateFriendsList.push(friendObj)\r\n                  }\r\n                  this.setState({friendsList: stateFriendsList})\r\n                })\r\n              })\r\n            })\r\n          })\r\n\r\n            // create subscription to user's blocked users list\r\n            this.state.unsubscribeBlockedUsers = db.collection('blockedUsers').doc(auth.currentUser?.uid).onSnapshot((snapshot) => {\r\n              if(snapshot.exists && snapshot.data()!.blocked !== undefined) {\r\n                this.setState({blockedUsers: snapshot.data()!.blocked})\r\n              } else {\r\n                db.collection(\"blockedUsers\").doc(auth.currentUser?.uid).set({blocked: []})\r\n                this.setState({blockedUsers: []})\r\n              }\r\n            })\r\n\r\n            //creates a subscription to our user's incoming friend requests\r\n            let unsubscribeIncomingRequests = db.collection('incomingFriendRequests').doc(auth.currentUser?.uid).onSnapshot((snapshot) => {\r\n              if(snapshot.data()) {\r\n                console.log(snapshot.data()!.incomingFriendRequests)\r\n                this.setState({incomingRequests: snapshot.data()!.incomingFriendRequests})\r\n              }\r\n            })\r\n\r\n            //creates a subscription to our user's outgoing friend requests\r\n            let unsubscribeOutgoingRequests = db.collection('outgoingFriendRequests').doc(auth.currentUser!.uid).onSnapshot((snapshot) => {\r\n              if(snapshot.data()) {\r\n                console.log(snapshot.data()!.outgoingFriendRequests)\r\n                this.setState({outgoingRequests: snapshot.data()!.outgoingFriendRequests})\r\n              }\r\n            })\r\n\r\n            //crate a subscription to the list of a users groups\r\n            this.unsubscribeGroups = db.collection('profiles').doc(auth.currentUser?.uid).onSnapshot((snapshot) => {\r\n              if(snapshot.data()) {\r\n                this.setState({\r\n                  numGroups: snapshot.data()!.groups.length,\r\n                  groupArray: []\r\n                })\r\n                let unsubscribeGroupArray = []\r\n                for(let i = 0; i < this.state.numGroups; i++) {\r\n                  let unsubscribeIndividualGroup = db.collection('groups').doc(snapshot.data()!.groups[i]).onSnapshot((snapshot) => {\r\n                    let groupArray = [...this.state.groupArray]\r\n                    if(snapshot.data()) {\r\n                      let group : Group = {\r\n                        nickname: snapshot.data()!.nickname,\r\n                        members: snapshot.data()!.members,\r\n                        id: snapshot.data()!.id,\r\n                        profilePicture: snapshot.data()!.profilePicture,\r\n                        owner: snapshot.data()!.owner\r\n                      }\r\n                      groupArray[i] = group\r\n                      this.setState({groupArray: groupArray})\r\n                      if(this.state.groupDetails.id === group.id) {\r\n                        this.setState({groupDetails: group})\r\n                      }\r\n                      console.log(group)\r\n                    }\r\n                  })\r\n                  unsubscribeGroupArray.push(unsubscribeIndividualGroup)\r\n                }\r\n                this.setState({\r\n                  unsubscribeGroupArray: unsubscribeGroupArray\r\n                })\r\n              }\r\n\r\n            })\r\n\r\n            this.setState({\r\n              unsubscribeIncomingRequests: unsubscribeIncomingRequests,\r\n              unsubscribeOutgoingRequests: unsubscribeOutgoingRequests\r\n            })\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    //End firebase data subscriptins\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    //since we have subscriptions, we cancel them here to prevent a memory leak\r\n    this.state.unsubscribeFriendsList()\r\n    this.state.unsubscribeIncomingRequests()\r\n    this.state.unsubscribeOutgoingRequests()\r\n    for(let i = 0; i < this.state.unsubscribeGroupArray.length; i++) {\r\n      this.state.unsubscribeGroupArray[i]()\r\n    }\r\n  }\r\n\r\n  subscribeGroups() {\r\n\r\n  }\r\n\r\n\r\n  addFriend(email: string) { //sends a friend request to a user\r\n    if(email !== \"\" && email !== auth.currentUser?.email) {\r\n      db.collection('emails').doc(email).get().then(document => {\r\n        if(document.exists) {\r\n          db.collection('incomingFriendRequests').doc(document.data()!.userid).update({\r\n            incomingFriendRequests: firebase.firestore.FieldValue.arrayUnion(auth.currentUser?.uid)\r\n          })\r\n          db.collection('outgoingFriendRequests').doc(auth.currentUser?.uid).update({\r\n            outgoingFriendRequests: firebase.firestore.FieldValue.arrayUnion(document.data()!.userid)\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  cancelOutgingRequest(targetUserId: string) {\r\n    if(targetUserId !== \"\" && targetUserId !== auth.currentUser?.email) {\r\n      db.collection('incomingFriendRequests').doc(targetUserId).update({\r\n        incomingFriendRequests: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid)\r\n      })\r\n      db.collection('outgoingFriendRequests').doc(auth.currentUser?.uid).update({\r\n        outgoingFriendRequests: firebase.firestore.FieldValue.arrayRemove(targetUserId)\r\n      })\r\n    }\r\n  }\r\n\r\n  generateRandomString(length: number) {\r\n    var text = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_~';\r\n    for (var i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return text;\r\n  }\r\n\r\n  async generateUniqueFriendId() : Promise<string> {\r\n  let generateUniqueFriendIdPromise = new Promise<string>((resolve, reject) => {\r\n      let code = this.generateRandomString(50)\r\n      db.collection('friendIds').doc(code).get().then((doc) => {\r\n        if(!doc.exists) {\r\n          db.collection('friendIds').doc(code).set({\r\n            inUse: true\r\n          })\r\n          resolve(code)\r\n        } else {\r\n          if(!doc.data()?.inUse) {\r\n            db.collection('friendIds').doc(code).set({\r\n              inUse: true\r\n            })\r\n          } else {\r\n            this.generateUniqueFriendId()\r\n          }\r\n        }\r\n      })\r\n    })\r\n    return await generateUniqueFriendIdPromise\r\n  }\r\n\r\n  async generateUniqueGroupId() : Promise<string> {\r\n    let generateUniqueGroupIdPromise = new Promise<string>((resolve, reject) => {\r\n        let code = this.generateRandomString(50)\r\n        db.collection('groudIds').doc(code).get().then((doc) => {\r\n          if(!doc.exists) {\r\n            db.collection('groupIds').doc(code).set({\r\n              inUse: true\r\n            })\r\n            resolve(code)\r\n          } else {\r\n            if(!doc.data()?.inUse) {\r\n              db.collection('groupIds').doc(code).set({\r\n                inUse: true\r\n              })\r\n            } else {\r\n              this.generateUniqueGroupId()\r\n            }\r\n          }\r\n        })\r\n      })\r\n\r\n      return await generateUniqueGroupIdPromise\r\n  }\r\n\r\n  acceptFriend(targetUserId: string) {\r\n    //accepts a friend request from a user\r\n    //generates a friend UUID that can uniquely identify this friend pair\r\n    if(targetUserId != \"\") { //ensure we are not calling firebase path with empty string\r\n      this.generateUniqueFriendId().then((uniqueFriendId : string) => {\r\n        //remove incoming and outgoing friend requests\r\n        db.collection('outgoingFriendRequests').doc(targetUserId).update({\r\n          outgoingFriendRequests: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid),\r\n        })\r\n        db.collection('incomingFriendRequests').doc(auth.currentUser?.uid).update({\r\n          incomingFriendRequests: firebase.firestore.FieldValue.arrayRemove(targetUserId),\r\n        })\r\n        db.collection('friends').doc(auth.currentUser?.uid).update({\r\n          friendsList: firebase.firestore.FieldValue.arrayUnion(targetUserId)\r\n        })\r\n        db.collection('friends').doc(targetUserId).update({\r\n          friendsList: firebase.firestore.FieldValue.arrayUnion(auth.currentUser?.uid)\r\n        })\r\n        //set unique friend uuid pair for messaging\r\n        db.collection('friends').doc(auth.currentUser?.uid).collection('uuids').doc(targetUserId).set({\r\n          uuid: uniqueFriendId,\r\n          friend: targetUserId\r\n        })\r\n        db.collection('friends').doc(targetUserId).collection('uuids').doc(auth.currentUser?.uid).set({\r\n          uuid: uniqueFriendId,\r\n          friend: auth.currentUser?.uid\r\n        })\r\n        let timestamp = Date.now()\r\n        this.realtime_db.ref(uniqueFriendId).child(timestamp.toString()).set({message: 'Join the conversation! Send a message here to get started.', sender: 'World-Watchlist'})\r\n      })\r\n    }\r\n  }\r\n\r\n  declineFriend(targetUserId: string) { //declines a friend request from a user\r\n    if(targetUserId != \"\") {\r\n      db.collection('outgoingFriendRequests').doc(targetUserId).update({\r\n        outgoingFriendRequests: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid),\r\n      })\r\n      db.collection('incomingFriendRequests').doc(auth.currentUser?.uid).update({\r\n        incomingFriendRequests: firebase.firestore.FieldValue.arrayRemove(targetUserId),\r\n      })\r\n    }\r\n  }\r\n\r\n  removeFriend(targetUserId: string) { //removes a user from friend list\r\n    if(targetUserId != \"\") {\r\n      db.collection('friends').doc(auth.currentUser?.uid).collection('uuids').doc(targetUserId).get().then((document) => {\r\n        db.collection('friendIds').doc(document.data()!.uuid).update({\r\n          inUse: false\r\n        })\r\n        db.collection('friends').doc(auth.currentUser?.uid).collection('uuids').doc(targetUserId).delete()\r\n        db.collection('friends').doc(targetUserId).collection('uuids').doc(auth.currentUser?.uid).delete()\r\n        db.collection('friends').doc(auth.currentUser?.uid).update({\r\n          friendsList: firebase.firestore.FieldValue.arrayRemove(targetUserId)\r\n        })\r\n        db.collection('friends').doc(targetUserId).update({\r\n          friendsList: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid)\r\n        })\r\n        this.setState({isFriendModalOpen: false})\r\n      })\r\n    }\r\n  }\r\n\r\n  blockUser(userid: string) { // adds given friend to blocked list, users on blocked list are excluded from stuff\r\n    if(userid !== \"\") {\r\n      // assuming userid exists\r\n      // let chosenUser = db.collection('usernames').doc(username);\r\n      // let chosenUser = db.collection('email').doc(userid).get().then(docData => {\r\n      //   if (docData.exists)\r\n      //     return docData.data()?.userid}).catch(catchData => console.log(\"Data crash!\"));\r\n      // if( chosenUser === undefined)\r\n      //   return;\r\n      console.log(\"User exists, attempting to block\");\r\n      db.collection('blockedUsers').doc(auth.currentUser?.uid).update({blocked: firebase.firestore.FieldValue.arrayUnion(userid)});\r\n      console.log(\"User should be added to blocked list\");\r\n      /*if ( this.isFriend(username))\r\n       *  this.removeFriend(username); // remove user once added to blocked list, line included for future possibility\r\n       */\r\n    }\r\n  }\r\n\r\n  exists(username: string) {\r\n    return username !== \"\" //&& db.collection('usernames').doc(username) !== undefined\r\n  }\r\n\r\n  createGroup() {\r\n    this.generateUniqueGroupId().then((code) => {\r\n      db.collection('groups').doc(code).set({\r\n        owner: auth.currentUser?.uid,\r\n        members: [auth.currentUser?.uid],\r\n        nickname: this.state.groupNickname,\r\n        id: code,\r\n        profilePicture: ''\r\n      })\r\n      db.collection('profiles').doc(auth.currentUser?.uid).update({\r\n        groups: firebase.firestore.FieldValue. arrayUnion(code),\r\n      })\r\n      let timestamp = Date.now()\r\n      this.realtime_db.ref(code).child(timestamp.toString()).set({message: 'Join the conversation! Send a message here to get started.', sender: 'World-Watchlist'})\r\n    })\r\n\r\n  }\r\n\r\n  leaveGroup() {\r\n    //function is intended to be called from the groupView page\r\n    //1 remove our user from the group collection\r\n    //2 remove the group from the user collection\r\n\r\n    //1\r\n    if(auth.currentUser?.uid !== this.state.groupDetails.owner) {\r\n      //user is not the owner of the group, can simply leave.\r\n      db.collection('groups').doc(this.state.groupDetails.id).update({\r\n        members: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid)\r\n      })\r\n\r\n    } else {\r\n      //user is the host of the group\r\n      if(this.state.groupDetails.members.length === 1) {\r\n        //user is the only member in the group. delete the group.\r\n        this.deleteGroup()\r\n      } else {\r\n        //user is the host but there are other members in the group. user is not deleting the group.\r\n        if(this.state.groupDetails.members[0] !== auth.currentUser?.uid) {\r\n            db.collection('groups').doc(this.state.groupDetails.id).update({\r\n              owner: this.state.groupDetails.members[0],\r\n              members: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid)\r\n\r\n            })\r\n        } else {\r\n          db.collection('groups').doc(this.state.groupDetails.id).update({\r\n            owner: this.state.groupDetails.members[1],\r\n            members: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid)\r\n          })\r\n        }\r\n      }\r\n    }\r\n    //2\r\n    db.collection('profiles').doc(auth.currentUser?.uid).update({\r\n      groups: firebase.firestore.FieldValue.arrayRemove(this.state.groupDetails.id)\r\n    })\r\n    this.setState({isGroupModalOpen: false})\r\n  }\r\n\r\n  deleteGroup() {\r\n    //delete a group\r\n    //intended to be used from the groupView page\r\n    if(auth.currentUser?.uid === this.state.groupDetails.owner) {\r\n      this.state.groupDetails.members.forEach((member) => {\r\n        db.collection('profiles').doc(member).update({\r\n          groups: firebase.firestore.FieldValue.arrayRemove(this.state.groupDetails.id)\r\n        })\r\n        db.collection('groups').doc(this.state.groupDetails.id).delete()\r\n      })\r\n      this.setState({\r\n        isGroupModalOpen: false\r\n      })\r\n    } else {\r\n      console.log('User should not be able to use this function')\r\n    }\r\n\r\n  }\r\n\r\n  addFriendToGroup(targetUid: string, group: string) {\r\n    db.collection('profiles').doc(targetUid).update({\r\n      groups: firebase.firestore.FieldValue.arrayUnion(group)\r\n    })\r\n    db.collection('groups').doc(group).update({\r\n      members: firebase.firestore.FieldValue.arrayUnion(targetUid)\r\n    })\r\n  }\r\n\r\n  toggleGroupModal() {\r\n    this.setState({isGroupModalOpen: !this.state.isGroupModalOpen})\r\n  }\r\n  toggleAddFriendModal() {\r\n    this.setState({isAddFriendModalOpen: !this.state.isAddFriendModalOpen})\r\n  }\r\n  togglePendingRequestsModal() {\r\n    this.setState({isPendingRequestsModalOpen: !this.state.isPendingRequestsModalOpen})\r\n  }\r\n  toggleFriendModal() {\r\n    this.setState({isFriendModalOpen: !this.state.isFriendModalOpen})\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    render() {\r\n\r\n      let groupState = \"group\";\r\n      return (\r\n      <IonPage>\r\n        <AddFriends\r\n          {...this.props}\r\n          isAddFriendModalOpen={this.state.isAddFriendModalOpen}\r\n          toggleAddFriendModal={this.toggleAddFriendModal}\r\n          addFriend={this.addFriend}\r\n        />\r\n\r\n        <PendingRequests\r\n          {...this.props}\r\n          incomingRequests = {this.state.incomingRequests}\r\n          outgoingRequests = {this.state.outgoingRequests}\r\n          acceptFriend = {this.acceptFriend}\r\n          declineFriend = {this.declineFriend}\r\n          cancelOutgingRequest = {this.cancelOutgingRequest}\r\n          isPendingRequestsModalOpen = {this.state.isPendingRequestsModalOpen}\r\n          togglePendingRequestsModal = {this.togglePendingRequestsModal}\r\n\r\n        />\r\n\r\n        <GroupView\r\n          isGroupModalOpen={this.state.isGroupModalOpen}\r\n          groupDetails={this.state.groupDetails}\r\n          {...this.props}\r\n          toggleGroupModal={this.toggleGroupModal}\r\n          leaveGroup={this.leaveGroup}\r\n          deleteGroup={this.deleteGroup}\r\n          friendList={this.state.friendsList}\r\n          addFriendToGroup={this.addFriendToGroup}\r\n        />\r\n\r\n        <FriendView\r\n          {...this.props}\r\n          friendDetails = {this.state.friendDetails}\r\n          isFriendModalOpen = {this.state.isFriendModalOpen}\r\n          toggleFriendModal = {this.toggleFriendModal}\r\n          removeFriend = {this.removeFriend}\r\n        />\r\n\r\n        <IonPopover\r\n          cssClass='socialPopover'\r\n          event={this.state.socialPopoverEvent}\r\n          isOpen={this.state.isSocialPopoverOpen}\r\n          onDidDismiss={() => {this.setState({isSocialPopoverOpen: false, socialPopoverEvent: undefined})}}\r\n        >\r\n          <IonContent>\r\n            <IonList>\r\n              <IonListHeader id='socialPopoverListHeader'><b>Social Options</b></IonListHeader>\r\n              <IonItem button={true} onClick={() => {this.setState({isSocialPopoverOpen: false, isAddFriendModalOpen: true})}}><IonLabel>Add Friend</IonLabel><IonIcon className='socialPopoverIcon' slot='end' icon={personAddOutline}/></IonItem>\r\n              <IonItem button={true}  onClick={() => {this.setState({isSocialPopoverOpen: false, isCreateGroupModalOpen: true})}}><IonLabel>Create Group</IonLabel><IonIcon className='socialPopoverIcon' slot='end' icon={addCircleOutline}/></IonItem>\r\n              <IonItem button={true}><IonLabel>New Message</IonLabel><IonIcon className='socialPopoverIcon' slot='end' icon={sendOutline}/></IonItem>\r\n            </IonList>\r\n          </IonContent>\r\n        </IonPopover>\r\n\r\n        <IonModal isOpen={this.state.isCreateGroupModalOpen}>\r\n          <IonHeader>\r\n            <IonToolbar class='socialToolbar2'>\r\n            <IonButtons slot='start'>\r\n              <IonButton onClick={() => {this.setState({isCreateGroupModalOpen: false})}} fill='clear'>\r\n                <IonIcon id='closeCreateGroupModalIcon' icon={closeCircleOutline} />\r\n              </IonButton>\r\n            </IonButtons>\r\n              <IonTitle class='socialTitle2'>Create Group</IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n          <IonContent>\r\n            <IonInput className='createGroupInput' placeholder='Group Nickname' onIonChange={(e) => {this.setState({groupNickname: (e.target as HTMLInputElement).value})}}/>\r\n            <IonButton onClick={() => {this.createGroup(); this.setState({isCreateGroupModalOpen: false})}} id='createGroupButton'>Create</IonButton>\r\n          </IonContent>\r\n        </IonModal>\r\n\r\n        <IonHeader>\r\n          <IonToolbar class='socialToolbar'>\r\n            <IonTitle class='socialTitle'>\r\n              Social\r\n            </IonTitle>\r\n            <IonButtons slot=\"start\">\r\n              <IonButton class='socialHeaderButton' onClick={() => {this.setState({isPendingRequestsModalOpen: true})}}  fill='clear'>\r\n                <IonIcon icon={listOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonButtons slot='end'>\r\n              <IonButton class='socialHeaderButton' onClick={(event : any) => {event.persist(); this.setState({isSocialPopoverOpen: true, socialPopoverEvent: event})}} fill='clear'>\r\n                <IonIcon icon={addOutline} />\r\n              </IonButton>\r\n            </IonButtons>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        <IonSegment onIonChange={e => this.setState({segmentSelected: e.detail.value})} value={this.state.segmentSelected}>\r\n          <IonSegmentButton value='groups'>\r\n            <IonLabel>Groups</IonLabel>\r\n          </IonSegmentButton>\r\n          <IonSegmentButton value='friends'>\r\n            <IonLabel>Friends</IonLabel>\r\n          </IonSegmentButton>\r\n        </IonSegment>\r\n        {\r\n          this.state.segmentSelected === 'groups' ?\r\n          <div>{\r\n            this.state.groupArray.map((displayGroup : Group) => {\r\n              return (\r\n                <IonItem onClick={() => {this.setState({groupDetails: displayGroup, isGroupModalOpen: true})}} lines='none' button={true} className='socialGroupItem' key={displayGroup.id}>\r\n                  <IonAvatar slot='start' className='socialGroupAvatar'>\r\n                    <img src = {displayGroup.profilePicture ? displayGroup.profilePicture : Placeholder}/>\r\n                  </IonAvatar>\r\n                  <IonLabel className='socialGroupLabel'>\r\n                    {displayGroup.nickname}\r\n                  </IonLabel>\r\n\r\n                </IonItem>\r\n              )\r\n            })\r\n          }\r\n        </div> :\r\n        <div>\r\n        {this.state.friendsList.map((friend: Friend) => {\r\n          return (\r\n            <IonItem onClick={() => {this.setState({friendDetails: friend, isFriendModalOpen: true})}} lines='none' button={true} className='socialGroupItem' key={friend.uid}>\r\n              <IonAvatar slot='start' className='socialGroupAvatar'>\r\n                <img src = {friend.photo ? friend.photo : Placeholder}/>\r\n              </IonAvatar>\r\n              <IonLabel className='socialGroupLabel'>\r\n                {friend.displayName}\r\n              </IonLabel>\r\n\r\n            </IonItem>\r\n            )\r\n          })\r\n      }\r\n        </div>\r\n      }\r\n\r\n\r\n        </IonContent>\r\n      </IonPage>\r\n      )\r\n    }\r\n\r\n}\r\n\r\nexport default Social\r\n","// (Mostly) Clay Mallory\r\n// File input code borrowed from https://medium.com/front-end-weekly/file-input-with-react-js-and-typescript-64dcea4b0a86.\r\nimport React, { useState } from 'react';\r\nimport { IonReactRouter } from '@ionic/react-router';\r\nimport { PushNotification, PushNotificationToken, PushNotificationActionPerformed, Capacitor, Plugins, CameraResultType, FilesystemDirectory} from '@capacitor/core';\r\n\r\nimport {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonContent,\r\n  IonTitle,\r\n  IonButton,\r\n  IonButtons,\r\n  IonItem,\r\n  IonLabel,\r\n  IonToggle,\r\n  IonIcon,\r\n  IonModal,\r\n  IonInput,\r\n  IonAvatar,\r\n  IonChip,\r\n  IonAlert\r\n\r\n} from '@ionic/react'\r\nimport firebase, {db, auth} from '../firebase'\r\nimport {addCircleOutline, closeCircleOutline, newspaperOutline, exitOutline, mailOutline, arrowBackOutline, arrowForwardOutline, personCircleOutline, cloudUploadOutline} from 'ionicons/icons'\r\nimport './Settings.css'\r\n const { PushNotifications } = Plugins;\r\n const { Toast } = Plugins;\r\n const isPushAvailable = Capacitor.isPluginAvailable(\"PushNotifications\");\r\n const { FCMPlugin } = Plugins;\r\n\r\n\r\n\r\ntype MyState = {\r\n  isBlockSourceModalOpen:boolean;\r\n  isAccountSettingsModalOpen:boolean;\r\n  isChangePasswordModalOpen:boolean;\r\n  isChangeUsernameModalOpen:boolean;\r\n  isSignOutModalOpen:boolean;\r\n  signOutAlert:boolean;\r\n  blockedSources:string[];\r\n  topics:[];\r\n  currentUserName:string;\r\n  sourceToBlock:string;\r\n  sourceToUnBlock:string;\r\n  localList:string[];\r\n  newPassword:string;\r\n  newUsername:string;\r\n  notifications: [{}];\r\n  isSubbed:boolean;\r\n\r\n\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n}\r\n\r\nclass Settings extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    isBlockSourceModalOpen: false,\r\n    isAccountSettingsModalOpen:false,\r\n    isChangePasswordModalOpen: false,\r\n    signOutAlert:false,\r\n    isChangeUsernameModalOpen: false,\r\n    isSignOutModalOpen: false,\r\n    blockedSources: [],\r\n    topics:[],\r\n    currentUserName :'',\r\n    sourceToBlock:\"\",\r\n    sourceToUnBlock:\"\",\r\n    localList: [],\r\n    isSubbed:false,\r\n    newPassword:'',\r\n    newUsername:'',\r\n    notifications:[{ id: 'id', title: 'Test', body: \"Test Notification\" }]\r\n\r\n\r\n  };\r\n\r\n\r\n  constructor(props: MyProps) {\r\n    super(props);\r\n    console.log(\"Here\" + this.state.currentUserName);\r\n    this.handleChange = this.handleChange.bind(this);\r\n     //this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.blockSource = this.blockSource.bind(this);\r\n\r\n        if(auth.currentUser) { // gets the name of the current user\r\n          db.collection(\"profiles\").doc(auth.currentUser.uid).get().then(doc => {\r\n            if(doc.data()) {\r\n              this.setState({currentUserName: doc.data()!.displayName})\r\n              this.setState({isSubbed: doc.data()!.isSubbed})\r\n              console.log(this.state.isSubbed)\r\n\r\n              var temp= db.collection('profiles').doc(firebase.auth().currentUser!.uid).onSnapshot((snapshot) => { //blockedSources not in firebase?\r\n                if(snapshot.data()) {\r\n                 //this.setState({blockedSources: snapshot.data()!.blockedSources})\r\n               //  this.setState({topics: snapshot.data()!.subList})\r\n                // this.setState({currentUserName: snapshot.data()!.displayName})\r\n                }\r\n              })\r\n            \r\n            }\r\n          })\r\n\r\n        }\r\n        else\r\n          this.props.history.push(\"/landing\")\r\n\r\n       this.pullImage();\r\n      \r\n  }\r\n\r\n\r\n\r\n  async show() {\r\n  await Toast.show({\r\n    text: 'Hello!'\r\n  });\r\n}\r\n\r\n  push() { // This code is borrowed from https://enappd.com/blog/firebase-push-notification-in-ionic-react-capacitor/111/\r\n    \r\n    PushNotifications.register();\r\n    var temp = this.state.topics;\r\n    for(var i = 0; i < temp.length; i++) {\r\n      PushNotifications.register().then(()=> {\r\n        FCMPlugin.subscribeTo({topic:temp[i]})\r\n      }).catch((err)=>console.log(err));\r\n  }\r\n\r\n    // On succcess, we should be able to receive notifications\r\n    PushNotifications.addListener('registration',\r\n      (token: PushNotificationToken) => {\r\n        alert('Push registration success, token: ' + token.value);\r\n      }\r\n    );\r\n\r\n    // Some issue with your setup and push will not work\r\n    PushNotifications.addListener('registrationError',\r\n      (error: any) => {\r\n        alert('Error on registration: ' + JSON.stringify(error));\r\n      }\r\n    );\r\n\r\n    // Show us the notification payload if the app is open on our device\r\n    PushNotifications.addListener('pushNotificationReceived',\r\n      (notification: PushNotification) => {\r\n        let notif = this.state.notifications;\r\n        notif.push({ id: notification.id, title: notification.title, body: notification.body })\r\n        this.setState({\r\n          notifications: notif\r\n        })\r\n      }\r\n    );\r\n\r\n    // Method called when tapping on a notification\r\n    PushNotifications.addListener('pushNotificationActionPerformed',\r\n      (notification: PushNotificationActionPerformed) => {\r\n        let notif = this.state.notifications;\r\n        notif.push({ id: notification.notification.data.id, title: notification.notification.data.title, body: notification.notification.data.body })\r\n        this.setState({\r\n          notifications: notif\r\n        })\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n\r\n  async handleChange(selectorFiles: FileList)\r\n    {\r\n      if(selectorFiles!=null) {\r\n        console.log(selectorFiles);\r\n        var storage = firebase.storage();\r\n        var storageRef = firebase.storage().ref();\r\n        var file = selectorFiles[0];\r\n        var uid = firebase.auth().currentUser!.uid;\r\n        var newPicRef = storageRef.child('profileImages/' + uid+ '.jpg');\r\n\r\n        newPicRef.put(file);\r\n        await new Promise(r => setTimeout(r, 1000));\r\n        newPicRef.getDownloadURL().then((url) => {\r\n          db.collection('profiles').doc(auth.currentUser?.uid).update({\r\n            photo: url\r\n          })\r\n        })\r\n\r\n        this.pullImage();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  blockSource(sourceName:string) {\r\n\r\n    if(sourceName!=\"\" && sourceName.length > 3) { //makes sure the source is a valid site and isn't blank\r\n      if(!this.state.localList.includes(sourceName))\r\n        this.state.localList.push(sourceName);\r\n      this.addToList(sourceName);\r\n      this.state.blockedSources.push(sourceName);\r\n      console.log(this.state.blockedSources);\r\n      db.collection('usernames').doc(this.state.currentUserName).get().then(document => {\r\n      if(document.exists && this.isValidSite(sourceName)) {\r\n        db.collection('usernames').doc(this.state.currentUserName).update({\r\n        blockedSources : firebase.firestore.FieldValue.arrayUnion(sourceName)\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nunBlockSource(sourceName:string) {\r\n  if(sourceName!=\"\" ) { //makes sure the source is a valid site and isn't blank\r\n    db.collection('usernames').doc(this.state.currentUserName).get().then(document => {\r\n    if(document.exists) {\r\n      db.collection('usernames').doc(this.state.currentUserName).update({\r\n        blockedSources: firebase.firestore.FieldValue.arrayRemove(sourceName)\r\n      })\r\n    }\r\n  })\r\n}\r\n}\r\n\r\npopulate() {\r\nvar temp = this.state.blockedSources;\r\nfor (var i = temp.length - 1; i >= 0; i--) {\r\n  this.addToList(temp[i]);\r\n}\r\n\r\n}\r\n\r\nisEmailAddress(anEmail: string) {\r\n  return anEmail !== \"\" && anEmail.includes(\"@\");\r\n}\r\n\r\nchangeEmail(newEmail: string) {\r\n  if(auth.currentUser && this.isEmailAddress(newEmail)) {\r\n    auth.currentUser.updateEmail(newEmail).then(function() {\r\n\r\n  }).catch(function(error){\r\n\r\n  })\r\n}\r\n}\r\n\r\nsignOutUser() {\r\n  if (auth.currentUser) {\r\n    auth.signOut()\r\n    this.props.history.push(\"/landing\")\r\n  }\r\n  const alert = document.createElement('IonAlert');\r\n\r\n}\r\n\r\nchangePassword(password:string) {\r\n  if(auth.currentUser) {\r\n    auth.currentUser.updatePassword(password).then(function() {\r\n\r\n\r\n  }).catch(function(error){\r\n\r\n\r\n  })\r\n}\r\n}\r\n\r\nnotify() {\r\n\r\n  db.collection('profiles').doc(firebase.auth().currentUser!.uid).update({\r\n          notifications:this.state.isSubbed,\r\n         \r\n        })\r\n  if(isPushAvailable&&this.state.isSubbed) \r\n    this.push();\r\n  else if(!this.state.isSubbed) {\r\n\r\n  }\r\n\r\n\r\n    \r\n}\r\n\r\n/*changeEmail(email:string) {\r\n  if(this.state.currentUserName!=undefined&& email.length > 3) { //makes sure the source is a valid site and isn't blank\r\n    db.collection('usernames').doc(this.state.currentUserName).get().then(document => { //works for one specific user currently\r\n    if(document.exists) {\r\n      db.collection('usernames').doc(this.state.currentUserName).update({\r\n        \"email.firebase\" : email\r\n      })\r\n\r\n    }\r\n  })\r\n}\r\n  }*/\r\n\r\n  changeUsername(newName:string) {\r\n    if(this.state.currentUserName!=undefined&& newName.length > 3) { //makes sure the source is a valid site and isn't blank\r\n      db.collection('profiles').doc(firebase.auth().currentUser!.uid).get().then(document => { //works for one specific user currently\r\n      if(document.exists) {\r\n        db.collection('profiles').doc(firebase.auth().currentUser!.uid).update({\r\n          displayName:newName,\r\n         \r\n\r\n        })\r\n        this.setState({currentUserName : newName});\r\n\r\n      }\r\n    })\r\n  }\r\n\r\n    }\r\n\r\n\r\n\r\n    pullImage(){\r\n      if(auth.currentUser) {\r\n      var storage = firebase.storage();\r\n      var storageRef = firebase.storage().ref();\r\n      var pathReference;\r\n      var pathName = 'profileImages/' +firebase.auth().currentUser!.uid+'.jpg';\r\n      pathReference = storageRef.child(pathName);\r\n\r\n        pathReference.getDownloadURL().then((url)=> {\r\n         var img = document.getElementById('myimg');\r\n         if(img!=null)\r\n          img.setAttribute('src', url);\r\n\r\n      })\r\n      .catch((error) => {\r\n\r\n  switch (error.code) {\r\n    case 'storage/object-not-found':\r\n    firebase.storage().ref().child('placeholder.png').getDownloadURL().then((url)=> {\r\n         var img = document.getElementById('myimg');\r\n         if(img!=null)\r\n          img.setAttribute('src', url);\r\n      })\r\n\r\n      break;\r\n    case 'storage/unauthorized':\r\n      // User doesn't have permission to access the object\r\n      break;\r\n    case 'storage/canceled':\r\n      // User canceled the upload\r\n      break;\r\n    case 'storage/unknown':\r\n      // Unknown error occurred, inspect the server response\r\n      break;\r\n  }\r\n});\r\n\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n   uploadImage() {\r\n    var y = React.createRef();\r\n      var storage = firebase.storage();\r\n      var storageRef = firebase.storage().ref();\r\n      var newPicRef = storageRef.child('images/new.jpg');\r\n      var file = document.getElementById('image');\r\n      if(file!=null) {\r\n      file.addEventListener('change', function(evt) {\r\n        if(evt.target!=null) {\r\n      }\r\n  })\r\n  }\r\n    }\r\n\r\n\r\naddToList(name:string) {\r\n  if(!this.state.localList.includes(name)) {\r\n  var list = document.getElementById(\"blockedList\");\r\n  var entry = document.createElement(\"li\");\r\n  entry.setAttribute(\"id\", name);\r\n  entry.appendChild(document.createTextNode(name));\r\n  if(list!=null)\r\n  list.appendChild(entry);\r\n  console.log(list);\r\n}\r\n\r\n}\r\n\r\nisValidSite(siteName:string) {\r\n  if(siteName!='' && siteName.length>4) {\r\n    if(siteName.substring(siteName.length-4, siteName.length-3)=='.') {\r\n      var domainType = siteName.substring(siteName.length-3);\r\n      if(domainType == 'com'|| domainType=='org'||domainType == 'net')\r\n      return true;\r\n    }\r\n    }\r\n    return false;\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n      const { notifications } = this.state;\r\n      return (\r\n      <IonPage>\r\n      <IonModal isOpen={this.state.isBlockSourceModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar class='settingsToolbar2'>\r\n            <IonButtons>\r\n              <IonButton onClick={() => {this.populate();this.setState({isBlockSourceModalOpen: false})}} id='toBlock' fill='clear'>\r\n              <IonIcon id='closeBlockIcon' icon={arrowBackOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonTitle class='settingsTitle2'>\r\n              Block a Source\r\n\r\n            </IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        <IonItem lines='none' id='block'>\r\n          <IonInput class='addSource' onIonChange={(e) => {this.setState({sourceToBlock: (e.target as HTMLInputElement).value})}} />\r\n          <IonButton onClick={() => {this.blockSource(this.state.sourceToBlock)}}  fill='clear'>\r\n            <IonIcon id='addBlockIcon' icon={addCircleOutline} />\r\n          </IonButton>\r\n        </IonItem>\r\n        <br/>\r\n        <IonTitle id ='unblockText'>\r\n        Unblock a Source\r\n        </IonTitle>\r\n        <br/>\r\n        <br/>\r\n        <IonItem lines='none' id='block'>\r\n          <IonInput class='addSource' onIonChange={(e) => {this.setState({sourceToUnBlock: (e.target as HTMLInputElement).value})}} />\r\n          <IonButton onClick={() => {this.unBlockSource(this.state.sourceToUnBlock)}}  fill='clear'>\r\n            <IonIcon id='addBlockIcon' icon={addCircleOutline} />\r\n          </IonButton>\r\n        </IonItem>\r\n        <br/>\r\n        <IonHeader id = 'blockedSourcesHeader'>You Won't See Content From:</IonHeader>\r\n        <br/>\r\n\r\n        <ul id = \"blockedList\"></ul>\r\n          {\r\n            this.state.blockedSources.map(Blocked =>\r\n              <IonItem key = {Blocked.toString()}>\r\n              <IonItem class = 'blockedListEntry'>{Blocked.toString()}</IonItem>\r\n              </IonItem>\r\n            )}\r\n        </IonContent>\r\n      </IonModal>\r\n\r\n\r\n\r\n      <IonModal isOpen={this.state.isChangePasswordModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar class='settingsToolbar2'>\r\n            <IonButtons>\r\n              <IonButton onClick={() => {this.setState({isChangePasswordModalOpen: false})}} id='toBlock' fill='clear'>\r\n              <IonIcon id='closeBlockIcon' icon={arrowBackOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n\r\n            <IonTitle class='settingsTitle2'>\r\n              Change Password\r\n\r\n            </IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n        <IonContent>\r\n        <IonItem lines='none' id='block'>\r\n          <IonInput class = 'addSource' onIonChange={(e) => {this.setState({newPassword: (e.target as HTMLInputElement).value})}} />\r\n          <IonButton onClick={() => {this.changePassword(this.state.newPassword)}}  fill='clear' placeholder='Enter new password'>\r\n            <IonIcon id='addBlockIcon' icon={arrowForwardOutline} />\r\n          </IonButton>\r\n        </IonItem>\r\n        </IonContent>\r\n      </IonModal>\r\n\r\n      <IonModal isOpen={this.state.isChangeUsernameModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar class='settingsToolbar2'>\r\n            <IonButtons>\r\n              <IonButton onClick={() => {this.setState({isChangeUsernameModalOpen: false})}} id='toBlock' fill='clear'>\r\n              <IonIcon id='closeBlockIcon' icon={arrowBackOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n\r\n            <IonTitle class='settingsTitle2'>\r\n              Change Username\r\n\r\n            </IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n        <IonContent>\r\n        <IonItem lines='none' id='block'>\r\n          <IonInput class = 'addSource' onIonChange={(e) => {this.setState({newUsername: (e.target as HTMLInputElement).value})}} />\r\n          <IonButton onClick={() => {this.changeUsername(this.state.newUsername)}}  fill='clear'>\r\n            <IonIcon id='addBlockIcon' icon={arrowForwardOutline} />\r\n          </IonButton>\r\n        </IonItem>\r\n        </IonContent>\r\n\r\n      </IonModal>\r\n      <IonModal isOpen={this.state.isAccountSettingsModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar class='settingsToolbar2'>\r\n            <IonButtons>\r\n              <IonButton onClick={() => {this.setState({isAccountSettingsModalOpen: false})}} id='toBlock' fill='clear'>\r\n              <IonIcon id='closeBlockIcon' icon={arrowBackOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n\r\n            <IonTitle class='settingsTitle2'>\r\n              Account Settings\r\n            </IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n        <IonContent>\r\n        <IonItem id ='changeUsername'>\r\n\r\n            Sign Out\r\n          <IonButtons slot='end'>\r\n            <IonButton onClick={() => {this.setState({signOutAlert:true})}} fill='clear'>\r\n              <IonIcon id = 'userNameChangeButton' icon={exitOutline}/>\r\n              </IonButton>\r\n              <IonAlert\r\n          isOpen= {this.state.signOutAlert}\r\n          onDidDismiss={() => this.setState({signOutAlert:false})}\r\n          \r\n          header={'Are you sure you want to sign out?'}\r\n         \r\n          \r\n          buttons={[\r\n            {\r\n              text: 'No',\r\n              role: 'cancel',\r\n              cssClass: 'secondary',\r\n              handler: blah => {\r\n                console.log('Confirm Cancel: blah');\r\n              }\r\n            },\r\n            {\r\n              text: 'Yes',\r\n              handler: () => {\r\n                {this.signOutUser();\r\n                  this.setState({isAccountSettingsModalOpen:false})\r\n\r\n                };\r\n              }\r\n            }\r\n          ]}\r\n        />\r\n              </IonButtons>\r\n              </IonItem>\r\n        \r\n          \r\n        <IonItem id ='changeUsername'>\r\n            Change Display Name\r\n          <IonButtons slot='end'>\r\n            <IonButton onClick={() => {this.setState({isChangeUsernameModalOpen: true})}} fill='clear'>\r\n\r\n              <IonIcon id = 'userNameChangeButton' icon={personCircleOutline}/>\r\n              </IonButton>\r\n              </IonButtons>\r\n              </IonItem>\r\n\r\n               <IonItem id ='updateEmail'>\r\n          Change Password\r\n        <IonButtons slot='end'>\r\n          <IonButton onClick={() => {this.setState({isChangePasswordModalOpen: true})}} fill='clear'>\r\n\r\n            <IonIcon id = 'emailChangeButton' icon={mailOutline}/>\r\n          </IonButton>\r\n          </IonButtons>\r\n          </IonItem>\r\n\r\n        </IonContent>\r\n      </IonModal>\r\n        <IonHeader>\r\n          <IonToolbar class='settingsToolbar'>\r\n            <IonTitle class='settingsTitle'>\r\n              Settings\r\n            </IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonItem>\r\n        <IonAvatar>\r\n          <img id = 'myimg' />\r\n        </IonAvatar>\r\n        {this.state.currentUserName}\r\n        {console.log(\"testname \" + this.state.currentUserName)}\r\n        </IonItem>\r\n        <IonItem>\r\n            <IonLabel>Notifications</IonLabel>\r\n            <IonToggle checked = {this.state.isSubbed} onClick={(()=> {this.state.isSubbed = !this.state.isSubbed; this.push();this.notify()})} value=\"Notifications\" />\r\n          </IonItem>\r\n\r\n        <IonContent>\r\n        <IonItem>\r\n        Content Filter\r\n        <IonButtons slot='end'>\r\n          <IonButton onClick={() => {this.setState({isBlockSourceModalOpen: true})}} fill='clear'>\r\n            <IonIcon id = 'contentFilterButton' icon={newspaperOutline} />\r\n          </IonButton>\r\n        </IonButtons>\r\n        </IonItem>\r\n\r\n               <IonItem id ='updateEmail'>\r\n               Change Profile Picture\r\n               <IonButtons slot = 'end'>\r\n\r\n                  <IonButton id = 'submit'>\r\n\r\n        <input type=\"file\" id = 'fileSelect' onChange={ (e) => (this.handleChange(e.target.files!)) } />\r\n\r\n       <IonIcon id = 'cloudUploadOutline' icon={cloudUploadOutline}/>\r\n        </IonButton>\r\n\r\n\r\n\r\n        </IonButtons>\r\n          </IonItem>\r\n            \r\n\r\n              <IonItem id ='changeUsername'>\r\n            Account Settings\r\n          <IonButtons slot='end'>\r\n            <IonButton onClick={() => {this.setState({isAccountSettingsModalOpen: true})}} fill='clear'>\r\n\r\n              <IonIcon id = 'userNameChangeButton' icon={personCircleOutline}/>\r\n              </IonButton>\r\n              </IonButtons>\r\n              </IonItem>\r\n\r\n        </IonContent>\r\n      </IonPage>\r\n      )\r\n    }\r\n\r\n}\r\n\r\nexport default Settings\r\n","import React from 'react';\r\nimport {\r\n  IonTabBar,\r\n  IonTabButton,\r\n  IonTabs,\r\n  IonLabel,\r\n  IonIcon,\r\n  IonRouterOutlet\r\n} from '@ionic/react'\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { newspaperOutline, peopleOutline, settingsOutline} from 'ionicons/icons';\r\nimport Feed from './Feed'\r\nimport Social from './Social'\r\nimport Settings from './Settings'\r\nimport './Tabs.css'\r\n\r\nconst Tabs: React.FC = () => {\r\n  return (\r\n    <IonTabs>\r\n      <IonRouterOutlet>\r\n        <Route path=\"/main\" exact render={() => <Redirect to=\"/main/feed\"/>} />\r\n        <Route path=\"/main/feed\" component={Feed} exact={true} />\r\n        <Route path=\"/main/social\" component={Social} exact={true} />\r\n        <Route path=\"/main/settings\" component={Settings} exact={true}/>\r\n      </IonRouterOutlet>\r\n      <IonTabBar color='dark'class='tabToolbar' slot=\"bottom\">\r\n          <IonTabButton class='tabIcon' tab=\"feed\" href=\"/main/feed\">\r\n            <IonIcon icon={newspaperOutline} />\r\n            <IonLabel>Feed</IonLabel>\r\n          </IonTabButton>\r\n          <IonTabButton class='tabIcon' tab=\"social\" href=\"/main/social\">\r\n            <IonIcon icon={peopleOutline} />\r\n            <IonLabel>Social</IonLabel>\r\n          </IonTabButton>\r\n          <IonTabButton class='tabIcon' tab=\"settings\" href=\"/main/settings\">\r\n            <IonIcon icon={settingsOutline} />\r\n            <IonLabel>Settings</IonLabel>\r\n          </IonTabButton>\r\n        </IonTabBar>\r\n      </IonTabs>\r\n  )\r\n}\r\n\r\nexport default Tabs\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport {\r\n  IonApp,\r\n  IonRouterOutlet,\r\n} from '@ionic/react';\r\nimport { IonReactRouter } from '@ionic/react-router';\r\nimport { Plugins, PushNotification, PushNotificationToken, PushNotificationActionPerformed } from '@capacitor/core';\r\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, withIonLifeCycle, IonButton, IonFooter, IonList, IonItem, IonLabel, IonListHeader, IonText } from '@ionic/react';\r\n\r\n\r\n\r\nimport Landing from './pages/Landing'\r\nimport Weather from './pages/Weather'\r\nimport Feed from './pages/Feed'\r\nimport Tabs from './pages/Tabs'\r\n/* Core CSS required for Ionic components to work properly */\r\nimport '@ionic/react/css/core.css';\r\n\r\n/* Basic CSS for apps built with Ionic */\r\nimport '@ionic/react/css/normalize.css';\r\nimport '@ionic/react/css/structure.css';\r\nimport '@ionic/react/css/typography.css';\r\n\r\n/* Optional CSS utils that can be commented out */\r\nimport '@ionic/react/css/padding.css';\r\nimport '@ionic/react/css/float-elements.css';\r\nimport '@ionic/react/css/text-alignment.css';\r\nimport '@ionic/react/css/text-transformation.css';\r\nimport '@ionic/react/css/flex-utils.css';\r\nimport '@ionic/react/css/display.css';\r\n\r\n/* Theme variables */\r\nimport './theme/variables.css';\r\n\r\nconst App: React.FC = () => (\r\n    <IonApp>\r\n      <IonReactRouter>\r\n        <IonRouterOutlet>\r\n        <Route path=\"/main\" component={Tabs}/>\r\n          <Route path=\"/Weather\" component={Weather}/>\r\n          <Route path=\"/feed\" component={Feed}/>\r\n          <Route path=\"/main\" component={Tabs}/>\r\n          <Route path=\"/landing\" component={Landing} exact={true} />\r\n          <Route exact path=\"/\" render={() => <Redirect to=\"/landing\" />} />\r\n        </IonRouterOutlet>\r\n      </IonReactRouter>\r\n    </IonApp>\r\n)\r\nconst { PushNotifications } = Plugins;\r\nconst INITIAL_STATE = {\r\n  notifications: [{ id: 'id', title: \"Test Push\", body: \"This is my first push notification\" }],\r\n};\r\n\r\nexport class Home extends React.Component {\r\n  state: any = {};\r\n  props: any = {};\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = { ...INITIAL_STATE };\r\n  }\r\n\r\n  push() {\r\n    // Register with Apple / Google to receive push via APNS/FCM\r\n \r\n    PushNotifications.register();\r\n\r\n    // On succcess, we should be able to receive notifications\r\n    PushNotifications.addListener('registration',\r\n      (token: PushNotificationToken) => {\r\n        alert('Push registration success, token: ' + token.value);\r\n      }\r\n    );\r\n\r\n    // Some issue with your setup and push will not work\r\n    PushNotifications.addListener('registrationError',\r\n      (error: any) => {\r\n        alert('Error on registration: ' + JSON.stringify(error));\r\n      }\r\n    );\r\n\r\n    // Show us the notification payload if the app is open on our device\r\n    PushNotifications.addListener('pushNotificationReceived',\r\n      (notification: PushNotification) => {\r\n        let notif = this.state.notifications;\r\n        notif.push({ id: notification.id, title: notification.title, body: notification.body })\r\n        this.setState({\r\n          notifications: notif\r\n        })\r\n      }\r\n    );\r\n\r\n    // Method called when tapping on a notification\r\n    PushNotifications.addListener('pushNotificationActionPerformed',\r\n      (notification: PushNotificationActionPerformed) => {\r\n        let notif = this.state.notifications;\r\n        notif.push({ id: notification.notification.data.id, title: notification.notification.data.title, body: notification.notification.data.body })\r\n        this.setState({\r\n          notifications: notif\r\n        })\r\n      }\r\n    );\r\n  }\r\n  render() {\r\n    const { notifications } = this.state;\r\n    return (\r\n      <IonPage>\r\n        ...\r\n      </IonPage >\r\n    );\r\n  };\r\n}\r\n\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = \"data:image/png;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAQAAAAAAAAAAAAAAAAAAAAAA8J8HasaIBWRZAAAAAElFTkSuQmCC\"","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t141,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t142,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t143,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t144,\n\t\t18\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t145,\n\t\t19\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t146,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t147,\n\t\t20\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t148,\n\t\t21\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t149,\n\t\t22\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t150,\n\t\t23\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t151,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t152,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t153,\n\t\t24\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t154,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t155,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t156,\n\t\t25\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t157,\n\t\t26\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t158,\n\t\t27\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t159,\n\t\t28\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t160,\n\t\t29\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t161,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t162,\n\t\t15\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t163,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t164,\n\t\t30\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t165,\n\t\t31\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t166,\n\t\t32\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t167,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t168,\n\t\t17\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t169,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t170,\n\t\t33\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t171,\n\t\t34\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t172,\n\t\t35\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t173,\n\t\t36\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t174,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t175,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t176,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t177,\n\t\t37\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t178,\n\t\t16\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t179,\n\t\t38\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t180,\n\t\t39\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t181,\n\t\t40\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t182,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t183,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 87;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t187,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 89;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}