{"version":3,"sources":["firebase.js","pages/Landing.tsx","components/SubscriptionParent.tsx","components/WeatherSubChild.tsx","components/WeatherSubChildren.tsx","pages/Weather.tsx","config/config.js","components/Article.tsx","components/ArticleList.tsx","components/FeedList.tsx","components/FeedToolbar.tsx","components/SubscriptionChild.tsx","components/SubscriptionChildren.tsx","components/SubscriptionModal.tsx","pages/Feed.tsx","components/Message.tsx","components/GroupFeed.tsx","components/TempFunctions.ts","pages/GroupView.tsx","pages/AddFriends.tsx","pages/PendingRequests.tsx","pages/FriendView.tsx","pages/Social.tsx","pages/Settings.tsx","pages/Tabs.tsx","App.tsx","serviceWorker.ts","index.tsx","images/placeholder.png","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","db","firestore","Landing","props","state","loginEmail","loginPassword","registerEmail","registerPassword","registerConfirmPassword","shouldLoginShow","username","btnText","login","bind","register","guard","this","setPersistence","Auth","Persistence","LOCAL","then","signInWithEmailAndPassword","console","log","currentUser","history","push","catch","error","message","createUserWithEmailAndPassword","uploadDataToFirebase","result","a","createProfile","collection","doc","uid","set","blockedSources","groups","displayName","photo","notifications","createEmail","userid","createOutgoingFriendRequests","outgoingFriendRequests","createIncomingFriendRequests","incomingFriendRequests","createFriends","friendsList","Promise","all","className","class","id","lines","position","value","type","placeholder","onIonChange","e","setState","target","onClick","React","Component","ParentComponent","children","WeatherSubChild","location","temp","weather_code","expand","fill","shape","func","index","WeatherSubChildren","subs","map","item","key","Weather","lat","long","name","req","showLoading","subscription","isUnsubscribing","CurrentUser","isweatherOpen","ChildComponent","color","unsubscribe","onAuthStateChanged","get","data","exists","subscriptionField","splice","update","axios","response","new_location","some","el","main","weather","description","lon","display_name","err","isOpen","slot","toggleWeatherModal","icon","closeCircleOutline","onIonInput","animated","size","geocode","onDidDismiss","subscribe","duration","handleUnsub","secondaryApp","settings","cacheSizeBytes","CACHE_SIZE_UNLIMITED","enablePersistence","code","NewsDB","Browser","Plugins","url","open","Article","httpEquiv","content","theArticle","title","pubDate","source","onSnapshot","URL","link","host","FieldValue","arrayUnion","openURL","ArticleList","articles","theArticleList","x","FeedList","headerName","articleList","FeedToolbar","openWeather","cloud","showSubs","bookmarks","showModal","search","ChildrenComponent","length","toString","SubscriptionModal","closeButton","subscriptions","unsubButton","Storage","Feed","articlesSearched","subscribedArticles","undefined","topicSearched","showSubscription","allArticles","locationBased","isWeatherModalOpen","isSearchingModal","showSearchAlert","showSubscribeAlert","isChanging","clear","docs","r","setTimeout","sub_list","subList","getSubscribedArticles","getId","aList","i","checkCollection","articlesLocal","JSON","parse","snapshot","forEach","articleItem","html","Description","document","createElement","innerHTML","text","textContent","innerText","domain","Link","includes","Title","metadata","fromCache","stringify","event","detail","complete","where","querySnapshot","LocalNotifications","getPending","LocalNotificationPendingList","requestPermission","granted","schedule","body","at","Date","getTime","repeats","cancel","sub","arrayRemove","topic","toggleNewsModal","toLowerCase","empty","apiSearch","docChanges","change","addSubscription","removeSubscription","method","pathArray","split","baseUrl","newsItem","protocol","pullFactor","pullMin","pullMax","onIonRefresh","doRefresh","searchTopic","addCircle","Message","sender","src","Placeholder","GroupFeed","tempaddSubscription","userId","tempremoveSubscription","tempsubscribe","tempapiSearch","replace","rssurl","items","GroupView","showSubscriptionModal","groupSegment","groupViewPopoverEvent","isGroupViewPopoverOpen","isSettingsModalOpen","isMembersModalOpen","isFriendsListModalOpen","isNicknameReadOnly","tempNickname","groupDetails","nickname","members","owner","messages","photoDictionary","currentMessage","nameDictionary","blockedList","realtime_db","database","anchorRef","pullImage","createRef","memberUid","member","prevProps","blocked","Object","ref","orderByKey","on","val","current","scrollIntoView","storage","storageRef","pathName","child","getDownloadURL","img","getElementById","setAttribute","selectorFiles","file","newPicRef","put","profilePicture","timestamp","now","segmentValue","swipeToClose","chevronDownOutline","onChange","uploadImage","files","cloudUploadOutline","readonly","pencilOutline","checkmarkOutline","deleteGroup","friendList","FriendObj","addFriendToGroup","addOutline","unsubscribeButton","cssClass","button","peopleOutline","settingsOutline","leaveGroup","exitOutline","isGroupModalOpen","toggleGroupModal","persist","handleSegmentSwitch","scrollY","sendMessage","sendOutline","AddFriends","targetUserId","isAddFriendModalOpen","toggleAddFriendModal","addFriend","addCircleOutline","PendingRequests","incomingFriends","outgoingFriends","incomingRequests","IncomingFriend","outgoingRequests","OutgoingFriend","isPendingRequestsModalOpen","togglePendingRequestsModal","acceptFriend","declineFriend","cancelOutgingRequest","FriendView","friendViewPopoverEvent","isFriendViewPopoverOpen","friendDetails","uuid","removeFriend","personRemoveOutline","isFriendModalOpen","toggleFriendModal","Social","targetUsername","blockedUsers","isMessengerModalOpen","messageRef","isSocialPopoverOpen","socialPopoverEvent","isCreateGroupModalOpen","groupNickname","groupArray","numGroups","unsubscribeGroupArray","unsubscribeFriendsList","unsubscribeBlockedUsers","unsubscribeIncomingRequests","unsubscribeOutgoingRequests","unsubscribeIndiviudalFriends","segmentSelected","activeMessages","unsubscribeGroups","blockUser","generateUniqueFriendId","generateUniqueGroupId","createGroup","generateRandomString","friendsListSnapshot","friend","profileSnapshot","uuidDoc","stateFriendsList","friendObj","sentinel","stateFriend","unsubscribeIndividualGroup","group","email","possible","charAt","Math","floor","random","generateUniqueFriendIdPromise","resolve","reject","inUse","generateUniqueGroupIdPromise","uniqueFriendId","delete","targetUid","personAddOutline","listOutline","displayGroup","PushNotifications","Toast","isPushAvailable","Capacitor","isPluginAvailable","FCMPlugin","Settings","isBlockSourceModalOpen","isAccountSettingsModalOpen","isChangePasswordModalOpen","signOutAlert","isChangeUsernameModalOpen","isSignOutModalOpen","topics","currentUserName","sourceToBlock","sourceToUnBlock","localList","isSubbed","newPassword","newUsername","handleChange","blockSource","show","subscribeTo","addListener","token","alert","notification","notif","sourceName","addToList","isValidSite","anEmail","newEmail","isEmailAddress","updateEmail","signOut","password","updatePassword","newName","addEventListener","evt","list","entry","appendChild","createTextNode","siteName","substring","domainType","populate","arrowBackOutline","unBlockSource","Blocked","changePassword","arrowForwardOutline","changeUsername","header","buttons","role","handler","blah","signOutUser","personCircleOutline","mailOutline","checked","notify","newspaperOutline","Tabs","path","exact","render","to","component","tab","href","INITIAL_STATE","App","Boolean","window","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister","module","exports","webpackAsyncContext","__webpack_require__","o","Error","ids","keys"],"mappings":"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","file":"static/js/main.e1f62e26.chunk.js","sourcesContent":["\r\nimport firebase from 'firebase';\r\n\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyCAmbJVaYRk_N6RBcg_VnH865_9FzstE_I\",\r\n  authDomain: \"worldwatchlist.firebaseapp.com\",\r\n  databaseURL: \"https://worldwatchlist.firebaseio.com\",\r\n  projectId: \"worldwatchlist\",\r\n  storageBucket: \"worldwatchlist.appspot.com\",\r\n  messagingSenderId: \"106343909885\",\r\n  appId: \"1:106343909885:web:5cd924b3087d5e5b483194\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nexport const auth = firebase.auth();\r\nexport const db = firebase.firestore();\r\nexport default firebase;\r\n","import React from 'react';\r\nimport {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonItemDivider,\r\n  IonList,\r\n  IonItem,\r\n  IonContent,\r\n  IonInput,\r\n  IonTitle,\r\n  IonButton,\r\n  IonLabel\r\n} from '@ionic/react'\r\n\r\nimport './Landing.css'\r\nimport firebase, {auth, db} from '../firebase.js'\r\n\r\ntype MyState = {\r\n  loginEmail: string;\r\n  loginPassword: string;\r\n  registerEmail: string;\r\n  registerPassword: string;\r\n  registerConfirmPassword: string;\r\n  shouldLoginShow: boolean;\r\n  username: string;\r\n  btnText: string;\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n}\r\n\r\n\r\n\r\nclass Landing extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    loginEmail: '',\r\n    loginPassword: '',\r\n    registerEmail: '',\r\n    registerPassword: '',\r\n    registerConfirmPassword: '',\r\n    shouldLoginShow: true,\r\n    username: '',\r\n    btnText: ''\r\n  };\r\n\r\n\r\n\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n\r\n    this.login = this.login.bind(this);\r\n    this.register = this.register.bind(this);\r\n    this.state.btnText = 'Create an Account';\r\n  }\r\n\r\n  login() {\r\n    //attempts to sign a user into the app\r\n    //field checks\r\n    let guard = true\r\n    if(this.state.loginEmail === '') {\r\n      guard = false\r\n    }\r\n    if(this.state.loginPassword === '') {\r\n      guard = false\r\n    }\r\n    if(guard) {\r\n      firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(() => {\r\n        auth.signInWithEmailAndPassword(this.state.loginEmail, this.state.loginPassword).then(() => {\r\n          //user successfully logs in\r\n          //reroute here\r\n          console.log(auth.currentUser)\r\n          if(auth.currentUser) {\r\n            this.props.history.push(\"/main\")\r\n          }\r\n        }).catch((error) => {\r\n          //error handling\r\n          console.log(error.message)\r\n\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  register() {\r\n    let guard = true\r\n    if(this.state.registerEmail ==='') {\r\n      guard = false\r\n    }\r\n    if(this.state.registerPassword === '') {\r\n      guard = false\r\n    }\r\n    if(this.state.registerConfirmPassword !== this.state.registerPassword) {\r\n      guard = false\r\n    }\r\n    //attempts to register a user\r\n    //field checks\r\n\r\n    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(() => {\r\n      auth.createUserWithEmailAndPassword(this.state.registerEmail, this.state.registerPassword).then(() => {\r\n        //user successfully registers\r\n        //reroute here\r\n        this.uploadDataToFirebase().then((result) => {\r\n          this.props.history.push(\"/main\")\r\n        })\r\n       //admin.storage.ref().child(this.state.username+'#'+this.state.usernameIdentifier.toString() + '/new.jpg').put('../images/placeholder.png')\r\n       //firebase.put('asdf');\r\n\r\n      }).catch((error) => {\r\n        //error handling\r\n        console.log(error.message)\r\n      })\r\n    })\r\n  }\r\n\r\n  async uploadDataToFirebase() {\r\n    const createProfile : Promise<void> = db.collection('profiles').doc(auth.currentUser?.uid).set({\r\n      blockedSources:[],\r\n      groups: [],\r\n      displayName: this.state.username,\r\n      photo: '',\r\n      notifications: false\r\n    })\r\n    const createEmail : Promise<void> = db.collection('emails').doc(this.state.registerEmail).set({\r\n      userid: auth.currentUser?.uid\r\n    })\r\n    const createOutgoingFriendRequests : Promise<void> = db.collection(\"outgoingFriendRequests\").doc(auth.currentUser?.uid).set({\r\n      outgoingFriendRequests: []\r\n    })\r\n    const createIncomingFriendRequests : Promise<void> = db.collection(\"incomingFriendRequests\").doc(auth.currentUser?.uid).set({\r\n      incomingFriendRequests: []\r\n    })\r\n    const createFriends : Promise<void> = db.collection(\"friends\").doc(auth.currentUser?.uid).set({\r\n      friendsList: []\r\n    })\r\n\r\n    return await Promise.all([createProfile, createEmail, createOutgoingFriendRequests, createIncomingFriendRequests, createFriends])\r\n  }\r\n\r\n    render() {\r\n      return (\r\n      <IonPage>\r\n        <IonHeader>\r\n          <IonToolbar className='landingToolbar'>\r\n            <IonTitle class='loginTitle'>\r\n              {this.state.shouldLoginShow ? 'Login' : 'Create an Account'}\r\n            </IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent className='landingContent'>\r\n        {\r\n          this.state.shouldLoginShow ?\r\n            <div className='loginContainer'>\r\n              <div id='loginInputContainer'>\r\n                <h1 id='header'>World Watch-list</h1>\r\n                <IonItem lines='none' className='loginItem'>\r\n                <IonLabel class='loginLabel' position='floating'></IonLabel>\r\n                  <IonInput value={this.state.loginEmail} className='loginInput' type='email' placeholder = 'Email Address' onIonChange={(e) => {this.setState({loginEmail: (e.target as HTMLInputElement).value})}} />\r\n                </IonItem>\r\n\r\n                <IonItem lines='none' className='loginItem'>\r\n                  <IonLabel className='loginLabel' position='floating'></IonLabel>\r\n                  <IonInput value={this.state.loginPassword}  className='loginInput' type='password' placeholder = 'Password' onIonChange={(e) => {this.setState({loginPassword: (e.target as HTMLInputElement).value})}}/>\r\n                </IonItem>\r\n              </div>\r\n              <IonButton onClick={() => {this.login()}} className='loginButton'>Submit</IonButton>\r\n            </div>\r\n          :\r\n            <div className='registerContainer'>\r\n              <div id='registerInputContainer'>\r\n              <h1 id='header'>Register for an account</h1>\r\n                <IonItem lines='none' className='registerItem'>\r\n                <IonLabel className='registerLabel' position='floating' id = 'email'></IonLabel>\r\n                  <IonInput value={this.state.registerEmail} className='registerInput' type='email' placeholder = 'Email Address' onIonChange={(e) => {this.setState({registerEmail: (e.target as HTMLInputElement).value})}} />\r\n                </IonItem>\r\n\r\n                <IonItem lines='none' className='registerItem'>\r\n                  <IonLabel className='registerLabel' position='floating'></IonLabel>\r\n                  <IonInput value={this.state.registerPassword} className='registerInput' type='password' placeholder = 'Password' onIonChange={(e) => {this.setState({registerPassword: (e.target as HTMLInputElement).value})}}/>\r\n                </IonItem>\r\n\r\n                <IonItem lines='none' className='registerItem'>\r\n                  <IonLabel className='registerLabel' position='floating'></IonLabel>\r\n                  <IonInput value={this.state.registerConfirmPassword}  className='registerInput' type='password' placeholder = 'Confirm Password' onIonChange={(e) => {this.setState({registerConfirmPassword: (e.target as HTMLInputElement).value})}}/>\r\n                </IonItem>\r\n\r\n                <IonItem lines='none' className='registerItem'>\r\n                  <IonLabel className='registerLabel' position='floating'></IonLabel>\r\n                  <IonInput value={this.state.username} className='registerInput' type='text' placeholder = 'Username' onIonChange={(e) => {this.setState({username: (e.target as HTMLInputElement).value})}}/>\r\n                </IonItem>\r\n              </div>\r\n              <IonButton onClick={() => {this.register()}} className='registerButton'>Submit</IonButton>\r\n            </div>\r\n        }\r\n\r\n          <IonButton className = 'landingSwitch' onClick={() => {if(this.state.btnText=='Create an Account') this.state.btnText='Log In'; else this.state.btnText='Create an Account';this.setState({shouldLoginShow: !this.state.shouldLoginShow})}} >{this.state.btnText}</IonButton>\r\n        </IonContent>\r\n      </IonPage>\r\n      )\r\n    }\r\n\r\n}\r\n\r\nexport default Landing\r\n","import React from \"react\";\r\n\r\nconst ParentComponent = (props:any) => (\r\n    <div>\r\n      <div id=\"children-pane\">\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  );\r\nexport default ParentComponent;","import { IonButton, IonCard, IonCardContent, IonCardHeader, IonCardSubtitle, IonCardTitle } from '@ionic/react';\r\nimport React from 'react';\r\n\r\nimport './WeatherSubChild.css'\r\n\r\n\r\nfunction WeatherSubChild (props: {weather_code:any, temp:any, location: any, index:any, func: any}) {\r\n    function unsubClick(e: any) {\r\n        props.func(props.index);\r\n    }\r\n    return (\r\n    <IonCard>\r\n        <IonCardHeader >\r\n          <IonCardSubtitle>{props.location}</IonCardSubtitle>\r\n          <IonCardTitle >{props.temp}</IonCardTitle>\r\n        </IonCardHeader>\r\n        <IonCardContent>\r\n        {props.weather_code}\r\n        <IonButton id=\"unsubButton\" expand=\"block\" fill=\"outline\" type=\"submit\" shape=\"round\" onClick={unsubClick}>Unsubscribe</IonButton>\r\n        </IonCardContent>\r\n      </IonCard>);}\r\n\r\nexport default WeatherSubChild;","import React from 'react';\r\nimport ParentComponent from './SubscriptionParent';\r\nimport WeatherSubChild from './WeatherSubChild';\r\n\r\nfunction WeatherSubChildren(props: {subs: Array<any>, func: any}) {\r\n    let subs = props.subs.map((item, index) => {return <WeatherSubChild\r\n        key={item.location} \r\n        weather_code={item.weather_code}\r\n        temp={item.temp} location={item.location}\r\n        index={index} func={props.func}></WeatherSubChild>})\r\n    return <ParentComponent>{subs}</ParentComponent>;\r\n} \r\nexport default WeatherSubChildren;","import React from 'react';\r\nimport axios from 'axios'\r\nimport {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonContent,\r\n  IonTitle,\r\n  IonSearchbar,\r\n  IonInput,\r\n  IonButton,\r\n  IonLoading,\r\n  IonRouterOutlet,\r\n  IonIcon,\r\n  IonCard,\r\n  IonCardContent,\r\n  IonCardHeader,\r\n  IonCardSubtitle,\r\n  IonCardTitle,\r\n  IonModal,\r\n  IonButtons,\r\n\r\n} from '@ionic/react'\r\nimport './Weather.css'\r\nimport firebase, {db, auth} from '../firebase'\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { arrowBack, closeCircleOutline } from 'ionicons/icons';\r\nimport Tabs from './Tabs'\r\nimport ParentComponent from '../components/SubscriptionParent';\r\nimport { WeatherProps, WeatherState } from '../components/WeatherTypes';\r\nimport WeatherSubChildren from '../components/WeatherSubChildren';\r\n\r\n\r\nclass Weather extends React.Component<WeatherProps,WeatherState> {\r\n  state: WeatherState = {\r\n      lat: null,\r\n      long: null,\r\n      name: null,\r\n      req: null,\r\n      temp: null,\r\n      weather_code: null,\r\n      showLoading: false,\r\n      location: null,\r\n      subscription: [],\r\n      isUnsubscribing: false,\r\n      CurrentUser:null,\r\n      isweatherOpen:false\r\n  };\r\n\r\n\r\n  constructor(props: WeatherProps) {\r\n    super(props)\r\n    auth.onAuthStateChanged(async () => {\r\n      console.log(this.state.subscription)\r\n      if(auth.currentUser) {\r\n        //gets the username of our user\r\n        db.collection(\"users\").doc(auth.currentUser.uid).get().then(doc => {\r\n          if(doc.data()) {\r\n            this.setState({CurrentUser:doc.data()!.username})\r\n          }\r\n          // go into weatherSubscription collection\r\n          const dbSubscription = db.collection('weatherSubscription').doc(auth.currentUser?.uid)\r\n          // Check weather subscription array exist for user\r\n          dbSubscription.get().then((doc) => {\r\n            // use existing array\r\n            if (doc.exists) {\r\n              var subscriptionField = doc.data()\r\n              if (subscriptionField) {\r\n                this.setState({subscription:subscriptionField.subscription})\r\n              }\r\n            }\r\n            // create an array for the user.\r\n              else {\r\n                db.collection(\"weatherSubscription\").doc(auth.currentUser?.uid).set({\r\n                  subscription:[]\r\n            })\r\n            }\r\n        }).catch(function(error) {\r\n            console.log(\"Error getting document:\", error);\r\n        });\r\n\r\n        })\r\n      }\r\n  })\r\n\r\n  }\r\n  // ParentComponent = (props:any) => (\r\n  //   <div className=\"card calculator\">\r\n  //     <div id=\"children-pane\">\r\n  //       {props.children}\r\n  //     </div>\r\n  //   </div>\r\n  // );\r\n\r\n  ChildComponent = (props: {weather_code:any, temp:any, location: any, index:any}) =>\r\n  <IonCard>\r\n        <IonCardHeader >\r\n          <IonCardSubtitle>{props.location}</IonCardSubtitle>\r\n          <IonCardTitle >{props.temp}</IonCardTitle>\r\n        </IonCardHeader>\r\n        <IonCardContent>\r\n        {props.weather_code}\r\n        <IonButton id=\"unsubButton\" expand=\"block\" color=\"dark\" type=\"submit\" shape=\"round\" onClick={()=> this.unsubscribe(props.index) && this.setState({isUnsubscribing:true})}>unsub</IonButton>\r\n        </IonCardContent>\r\n      </IonCard>\r\n\r\n\r\n  /* remove item from subscribed based on index */\r\n  async unsubscribe(index:any) {\r\n    console.log(index)\r\n    this.state.subscription.splice(index,1)\r\n    db.collection('weatherSubscription').doc(auth.currentUser?.uid).update({\r\n      subscription: this.state.subscription\r\n    })\r\n  }\r\n\r\n  /* add new current weather location to subscribed array */\r\n  async subscribe(lat: any, long: any) {\r\n    await axios.get(\"http://api.openweathermap.org/data/2.5/weather?lat=\"+lat+\"&lon=\"+long+\"&APPID=853ea8c8d782be685ad81ace7b65291a&units=imperial\")\r\n    .then((response) => {\r\n      const data = response.data\r\n      console.log(data)\r\n      const new_location = this.state.name\r\n      const found = this.state.subscription.some(el => el.location === new_location);\r\n      if (found === true) {\r\n        console.log(\"already subscribed\")\r\n      } else {\r\n        console.log(\"adding to subscription\")\r\n        this.state.subscription.push({location: this.state.name, temp:data.main.temp+' F', weather_code: data.weather[0].description})\r\n      }\r\n      this.setState({temp:data.main.temp+'F',weather_code: data.weather[0].description, location: this.state.name})\r\n      /* Add data to firebase firestore */\r\n      db.collection('weatherSubscription').doc(auth.currentUser?.uid).update({\r\n        subscription: this.state.subscription\r\n      })\r\n    }).catch((error) => {\r\n      console.log(error)\r\n    });\r\n    this.setState({showLoading: false})\r\n  }\r\n\r\n  /* get latitude and longitude of location */\r\n  async geocode(location: any) {\r\n    if (location === null) {\r\n      console.log(\"Please enter a valid location\")\r\n    } else {\r\n      await axios.get('https://us1.locationiq.com/v1/search.php?key=pk.180fdf6168d1230db0cc5c937b7eaa98&q&q='+location+'&limit=1&countrycodes=US&namedetails=1&format=json')\r\n    .then((response) => {\r\n      let data = response.data[0]\r\n      console.log(data)\r\n      let lat = data.lat\r\n      let long = data.lon\r\n      let display_name = data.display_name\r\n      this.setState({lat: lat, long: long, name: display_name})\r\n    }).catch(err => {\r\n      console.error(err);\r\n    });\r\n    }\r\n  }\r\n\r\n  handleUnsub(index: number) {\r\n    this.unsubscribe(index);\r\n    this.setState({isUnsubscribing:true})\r\n  }\r\n  /* ClimaCell API (currently not in used because ran out of request) */\r\n  // async getWeatherData(lat: any, long: any) {\r\n  //   await fetch(\"https://api.climacell.co/v3/weather/forecast/daily?lat=\"+ lat + \"&lon=\"+ long +\"&unit_system=us&start_time=now&fields=feels_like&fields=\"+\r\n  //   \"wind_speed&fields=precipitation_probability&fields=weather_code&fields=humidity&apikey=YSpFrL7B389Ssy8msuqnPT3oY7keeAXf\", {\r\n  //     \"method\": \"GET\",\r\n  //     \"headers\": {}\r\n  //   })\r\n  //     .then(response => {\r\n  //       response.json().then((data) => {\r\n  //         var wlist = []\r\n  //         wlist.push({location: this.state.name, temp:data[0].feels_like[0].min.value +' '+data[0].feels_like[0].min.units, weather_code: data[0].weather_code.value})\r\n  //         this.state.subscription.push(wlist)\r\n  //         // console.log(this.state.subscription)\r\n  //         this.setState({temp:data[0].feels_like[0].min.value+data[0].feels_like[0].min.units+' ',weather_code: data[0].weather_code.value, location: this.state.name})\r\n  //         });\r\n  //     })\r\n  //     .catch(err => {\r\n  //       console.error(err);\r\n  //     });\r\n  // }\r\n\r\n    render() {\r\n\r\n      // const weatherDisplay = [];\r\n      // for (var i = 0; i < this.state.subscription.length; i+=1) {\r\n      //   weatherDisplay.push(<this.ChildComponent key={i} weather_code={this.state.subscription[i].weather_code}\r\n      //     temp={this.state.subscription[i].temp} location={this.state.subscription[i].location} index={i} />);\r\n      // };\r\n      return (\r\n      <IonModal isOpen={this.props.isOpen}>\r\n        <IonHeader>\r\n          <IonToolbar className='weatherToolbar'>\r\n            <IonTitle className='weatherTitle'>\r\n              Weather\r\n            </IonTitle>\r\n            <IonButtons slot='start'>\r\n                <IonButton onClick={() => {this.props.toggleWeatherModal()}} fill='clear'>\r\n                  <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n                </IonButton>\r\n            </IonButtons>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        <IonSearchbar placeholder=\"State, City, address...\" onIonInput={(e: any) => this.setState({req:e.target.value})} animated></IonSearchbar>\r\n        <IonButton id=\"searchButton\" size=\"default\" color=\"dark\" type=\"submit\" expand=\"full\" shape=\"round\" onClick={() => this.geocode(this.state.req)\r\n          && this.setState({showLoading: true })}>\r\n          Search\r\n        </IonButton>\r\n        <IonLoading\r\n        isOpen={this.state.showLoading}\r\n        onDidDismiss={() =>  this.subscribe(this.state.lat, this.state.long)}\r\n        message={'Getting data from API'}\r\n        duration={1000}\r\n        />\r\n\r\n      {/* <ParentComponent>\r\n       {weatherDisplay}\r\n      </ParentComponent> */}\r\n      <WeatherSubChildren subs={this.state.subscription} func={this.handleUnsub.bind(this)}></WeatherSubChildren>\r\n\r\n          </IonContent>\r\n        </IonModal>\r\n      )\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Weather\r\n","import firebase from 'firebase';\r\n\r\nvar config = {\r\n  apiKey: \"AIzaSyCiQa3wPMFOp_PidtF-8arljaCT3XFMLhc\",\r\n  authDomain: \"world-watchlist-server-8f86e.firebaseapp.com\",\r\n  databaseURL: \"https://world-watchlist-server-8f862.firebaseio.com\",\r\n  projectId: \"world-watchlist-server-8f86e\",\r\n  storageBucket: \"world-watchlist-server-8f86e.appspot.com\",\r\n  messagingSenderId: \"252689618671\",\r\n  appId: \"1:252689618671:web:3ac355cc3bbad710d02d1a\",\r\n};\r\n\r\nvar secondaryApp = firebase.initializeApp(config, \"Secondary\");\r\n/* Allow caching with unlimited size for accessing data offline */\r\nsecondaryApp.firestore().settings({\r\n  cacheSizeBytes: firebase.firestore.CACHE_SIZE_UNLIMITED\r\n});\r\nsecondaryApp.firestore().enablePersistence()\r\n  .catch((err) => {\r\n      if (err.code == 'failed-precondition') {\r\n          // Multiple tabs open, persistence can only be enabled\r\n          // in one tab at a a time.\r\n          // ...\r\n      } else if (err.code == 'unimplemented') {\r\n          // The current browser does not support all of the\r\n          // features required to enable persistence\r\n          // ...\r\n      }\r\n  });\r\n\r\n  \r\nexport const NewsDB = secondaryApp.firestore();\r\nexport default secondaryApp;","import React from 'react';\r\nimport { article } from './ArticleTypes';\r\nimport { Plugins } from '@capacitor/core';\r\nimport { IonCard, IonCardContent, IonCardHeader, IonCardSubtitle, IonCardTitle, IonButton, IonItem } from '@ionic/react';\r\nimport firebase, {db,auth} from '../firebase'\r\nimport './Article.css'\r\n\r\nconst { Browser } = Plugins;\r\n\r\nasync function openURL(url:any){\r\n  await Browser.open({ url: url });\r\n}\r\n\r\n function yeet(a:article) { //yeets an article\r\n  var temp = [];\r\n   db.collection(\"profiles\").doc(auth.currentUser?.uid)\r\n          .onSnapshot(async (doc) => {\r\n             temp = doc.data()!.blockedSources\r\n             temp.push(new URL(a.link).host)\r\n             db.collection('profiles').doc(auth.currentUser?.uid).update({\r\n               blockedSources:temp\r\n\r\n       // blockedSources : firebase.firestore.FieldValue.arrayUnion(str)\r\n\r\n           })\r\n\r\n  })\r\n \r\n         }\r\n\r\n\r\n\r\n\r\nfunction Article(props: {theArticle: article}) {\r\n    //console.log(props.theArticle);\r\n    return <IonCard>\r\n      <meta httpEquiv=\"Cache-control\" content=\"no-cache\"></meta>\r\n          <IonCardHeader>\r\n            <IonCardTitle>{props.theArticle.title}</IonCardTitle>\r\n            <IonCardSubtitle>\r\n            {props.theArticle.pubDate}\r\n            </IonCardSubtitle>\r\n          </IonCardHeader>\r\n          <IonCardContent>\r\n              {props.theArticle.description}\r\n            </IonCardContent>\r\n           \r\n            <IonCardContent>\r\n            news source: {props.theArticle.source}\r\n            <IonItem>\r\n            <IonButton onClick={()=> {var temp = [];\r\n   db.collection(\"profiles\").doc(auth.currentUser?.uid)\r\n          .onSnapshot(async (doc) => {\r\n             temp = doc.data()!.blockedSources\r\n             temp.push(new URL(props.theArticle.link).host)\r\n             db.collection('profiles').doc(auth.currentUser?.uid).update({\r\n              // blockedSources:temp\r\n             \r\n\r\n        blockedSources : firebase.firestore.FieldValue.arrayUnion(new URL(props.theArticle.link).host)\r\n\r\n           })\r\n             \r\n  })}} slot = 'end'>Block this Source</IonButton>\r\n            </IonItem>\r\n            <br></br>\r\n              <a onClick={()=>openURL(props.theArticle.link)}>link</a>\r\n              </IonCardContent>\r\n        </IonCard>\r\n}\r\n\r\nexport default Article;","import React from 'react';\r\nimport Article from './Article';\r\nimport { article, articleList } from './ArticleTypes';\r\n\r\nfunction ArticleList(props: {theArticleList: articleList}) {\r\n    //console.log(props.theArticleList);\r\n    let articles = props.theArticleList.map((x: article) =><div key={x.title}> <Article theArticle={x}></Article> </div>);\r\nreturn <div>{articles}</div>;\r\n}\r\nexport default ArticleList;","import { IonList, IonListHeader } from \"@ionic/react\";\r\nimport React from \"react\";\r\nimport ArticleList from \"./ArticleList\";\r\nimport { article } from \"./ArticleTypes\";\r\n\r\nimport './FeedList.css'\r\n\r\nfunction FeedList( props: {headerName: string, articleList: Array<article>}) {\r\n    return (\r\n    <IonList>\r\n        <IonListHeader id=\"feedHeader\">\r\n          {props.headerName}\r\n        </IonListHeader>\r\n        <ArticleList theArticleList={props.articleList}></ArticleList>\r\n    </IonList>)\r\n}\r\nexport default FeedList;","import { IonButton, IonButtons, IonIcon, IonTitle, IonToolbar } from '@ionic/react';\r\nimport { cloud, bookmarks, search } from 'ionicons/icons';\r\nimport React from 'react';\r\n\r\nimport './FeedToolbar.css'\r\n\r\nfunction FeedToolbar (props: { openWeather: any, showSubs: any, showModal: any}) {\r\n    \r\n    // let openWeather = () => props.openWeather();\r\n    // let showSubs = () => props.showSubs();\r\n    // let showModal = () => props.showModal();\r\n    return (<IonToolbar class ='feedToolbar'>\r\n    <IonTitle class='feedTitle'>\r\n      Feed\r\n    </IonTitle>\r\n    \r\n<IonButtons slot=\"start\">\r\n    <IonButton id=\"feedButton\" onClick={props.openWeather}  fill='clear'>\r\n        <IonIcon icon={cloud} />\r\n    </IonButton>\r\n    </IonButtons>\r\n    <IonButtons slot=\"end\">\r\n    <IonButton id=\"feedButton\" onClick={props.showSubs}  fill='clear'>\r\n        <IonIcon icon={bookmarks} />\r\n    </IonButton>\r\n    </IonButtons>\r\n    <IonButtons slot=\"end\">\r\n    <IonButton id=\"feedButton\" onClick={props.showModal}  fill='clear'>\r\n        <IonIcon icon={search} />\r\n    </IonButton>\r\n    </IonButtons>\r\n  </IonToolbar>);\r\n}\r\n\r\nexport default FeedToolbar;","import { IonButton, IonCard, IonCardContent, IonCardHeader, IonCardTitle } from '@ionic/react';\r\nimport React from 'react';\r\n\r\n\r\nfunction ChildComponent (props: {subscription:any, index:any, func: any }) {\r\n    function unsubClick(e: any) {\r\n        props.func(props.subscription, props.index);\r\n    }\r\n    return (<IonCard>\r\n      <IonCardHeader >\r\n        <IonCardTitle>{props.subscription}</IonCardTitle>\r\n        </IonCardHeader>\r\n        <IonCardContent>\r\n        <IonButton id=\"unsubButton\" expand=\"block\" fill=\"outline\" type=\"submit\" shape=\"round\" onClick={unsubClick}>Unsubscribe</IonButton>\r\n        </IonCardContent>\r\n    </IonCard>);}\r\n\r\nexport default ChildComponent;","import { IonItem } from '@ionic/react';\r\nimport React from 'react';\r\nimport ChildComponent from './SubscriptionChild'\r\nimport ParentComponent from './SubscriptionParent';\r\n\r\nfunction ChildrenComponent(props: {subs: Array<String>, func: any}) {\r\n    console.log(\"Child list: \"+props.subs.length+\" in list\");\r\n    let subs = props.subs.map((item, index)=> {return <ChildComponent key={item.toString()} subscription={item}\r\n     index={index} func={props.func}></ChildComponent>});\r\n  return <ParentComponent>{subs}</ParentComponent>;\r\n} \r\nexport default ChildrenComponent;","import { IonModal, IonHeader, IonToolbar, IonButtons, IonButton, IonIcon, IonTitle, IonContent, IonCard } from \"@ionic/react\"\r\nimport { closeCircleOutline } from \"ionicons/icons\"\r\nimport React from \"react\"\r\nimport { article } from \"./ArticleTypes\"\r\nimport ChildrenComponent from \"./SubscriptionChildren\"\r\n\r\nfunction SubscriptionModal(props: {showModal: boolean, closeButton: any, unsubButton: any, subscriptions: string[]}) {\r\n    return (<IonModal isOpen={props.showModal} onDidDismiss={props.closeButton}>\r\n<IonHeader>\r\n  <IonToolbar class='feedToolbar2'>\r\n    <IonButtons slot='start'>\r\n      <IonButton onClick={props.closeButton} fill='clear'>\r\n        <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n      </IonButton>\r\n    </IonButtons>\r\n\r\n  <IonTitle class='feedTitle2'>Subscriptions</IonTitle>\r\n  </IonToolbar>\r\n</IonHeader>\r\n<IonContent>\r\n  <IonCard>\r\n{/* <ParentComponent>\r\n{subs}\r\n</ParentComponent> */}\r\n    <ChildrenComponent subs={props.subscriptions} func={props.unsubButton}></ChildrenComponent>\r\n  </IonCard>\r\n</IonContent>\r\n</IonModal>\r\n);\r\n\r\n}\r\nexport default SubscriptionModal;","import React, { useState } from 'react';\r\nimport {\r\n  IonRefresher, IonRefresherContent,\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonContent,\r\n  IonTitle,\r\n  IonRouterOutlet,\r\n  IonIcon,\r\n  IonLabel,\r\n  IonButton,\r\n  IonButtons,\r\n  IonSearchbar,\r\n  IonLoading,\r\n  IonModal,\r\n  IonCard,\r\n  IonCardHeader,\r\n  IonCardTitle,\r\n  IonFabButton,\r\n  IonCardContent,\r\n  IonCardSubtitle,\r\n  IonItem,\r\n  IonCheckbox,\r\n  IonList, IonListHeader, IonAlert, IonToast\r\n} from '@ionic/react'\r\nimport { RefresherEventDetail } from '@ionic/core';\r\nimport './Feed.css'\r\nimport './AllPages.css'\r\nimport { NewsDB } from '../config/config';\r\nimport firebase, {db,auth} from '../firebase'\r\nimport ArticleList from '../components/ArticleList';\r\nimport { article, articleList } from '../components/ArticleTypes';\r\nimport Weather from './Weather'\r\nimport { add, addCircle, archive, bookmarks, closeCircleOutline, cloud, notificationsCircleOutline, search } from 'ionicons/icons';\r\nimport { LocalNotifications, Plugins } from '@capacitor/core';\r\nimport axios from 'axios';\r\nimport ParentComponent from '../components/SubscriptionParent';\r\nimport ChildrenComponent from '../components/SubscriptionChildren';\r\nimport { FeedProps, FeedState } from '../components/FeedTypes';\r\nimport FeedList from '../components/FeedList';\r\nimport FeedToolbar from '../components/FeedToolbar';\r\nimport { tempaddSubscription, tempremoveSubscription } from '../components/TempFunctions';\r\nimport SubscriptionModal from '../components/SubscriptionModal';\r\nconst { Storage } = Plugins;\r\n\r\n\r\n\r\nclass Feed extends React.Component<FeedProps, FeedState> {\r\n  state: FeedState = {\r\n    articles: [],\r\n    subs: [],\r\n    blockedSources: [],\r\n    articlesSearched:[],\r\n    subscribedArticles: undefined,\r\n    CurrentUser: null,\r\n    topicSearched:null,\r\n    showLoading:false,\r\n    showModal:false,\r\n    showSubscription:false,\r\n    allArticles:[],\r\n    locationBased:false,\r\n    isWeatherModalOpen:false,\r\n    isSearchingModal:false,\r\n    showSearchAlert:false,\r\n    showSubscribeAlert:false,\r\n    isChanging:false\r\n  };\r\n\r\n  constructor(props: FeedProps) {\r\n    super(props)\r\n    this.clear()\r\n    this.toggleWeatherModal = this.toggleWeatherModal.bind(this);\r\n    auth.onAuthStateChanged(async () => {\r\n      if(auth.currentUser) {\r\n\r\n\r\n        //gets the username of our user\r\n        await db.collection(\"users\").doc(auth.currentUser.uid).get().then(async docs => {\r\n          // everytime there is a new subscription, update news onto main feed\r\n          await db.collection(\"profiles\").doc(auth.currentUser?.uid)\r\n          .onSnapshot(async (doc) => {\r\n             this.setState({blockedSources:  doc.data()!.blockedSources});\r\n\r\n            if(doc.data()) {\r\n              \r\n             \r\n               await new Promise(r => setTimeout(r, 1000));\r\n        /* this.state.articles.forEach(element => {\r\n           \r\n           var domain = new URL(element.link).host;\r\n           //console.log(domain);\r\n\r\n           \r\n           if(this.state.blockedSources.includes(domain)) {\r\n             this.state.articles.splice(this.state.articles.indexOf(element),1)\r\n            // console.log(domain);\r\n           }\r\n\r\n             });*/\r\n            }\r\n          })\r\n          \r\n          db.collection(\"topicSubscription\").doc(auth.currentUser?.uid)\r\n          .onSnapshot(async (sub_list) => {\r\n            \r\n            if (sub_list.exists) {\r\n              this.setState({subs: await sub_list.data()!.subList});\r\n\r\n              console.log(\"subs\",this.state.subs)\r\n              // get articles\r\n              await this.getSubscribedArticles()\r\n              console.log(\"articles\",this.state.articles)\r\n            } else {\r\n              db.collection(\"topicSubscription\").doc(this.getId()).set({subList: []});\r\n            }\r\n          })\r\n        }).catch(function(error) {\r\n            console.log(\"Error getting document:\", error);\r\n        });\r\n        // end of getting data from server\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  async getSubscribedArticles(){\r\n    this.setState({articles:[]})\r\n    let aList : any[] = [];\r\n    for (var i = 0; i < this.state.subs.length; i++) {\r\n      /* Observe any changes in firestore and send a notification*/\r\n      await this.checkCollection(this.state.subs[i])\r\n      aList = []\r\n      var articlesLocal = await Storage.get({key:this.state.subs[i]})\r\n      // check local storage if collection exist take from cache, if collection changes, get from server\r\n      if ((articlesLocal.value)?.length === undefined || JSON.parse((articlesLocal.value)).length === 0 || this.state.isChanging===true) {\r\n        console.log(\"local storage empty for\", this.state.subs[i])\r\n        await NewsDB.collection(this.state.subs[i]).get()\r\n      .then(async (snapshot) => {\r\n        snapshot.forEach(async doc => {\r\n          if (doc.exists) {\r\n            console.log(\"here\")\r\n            let articleItem = doc.data();\r\n            var html = articleItem.Description;\r\n            var a = document.createElement(\"a\");\r\n            a.innerHTML = html;\r\n            var text = a.textContent || a.innerText || \"\";\r\n            //await new Promise(r => setTimeout(r, 1000));\r\n            var domain = new URL(articleItem.Link).host;\r\n\r\n            console.log(domain);\r\n            if(!this.state.blockedSources.includes(domain)) {\r\n              console.log(\"blocked\")\r\n\r\n              aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source:articleItem.source, pubDate: articleItem.pubDate})\r\n            }\r\n          } else {\r\n            console.log(\"Cannot find anything in database.\")\r\n          }\r\n        })\r\n        var source = snapshot.metadata.fromCache ? \"local cache\" : \"server\";\r\n        console.log(\"Sub Articles came from \" + source);\r\n        await Storage.set({ key: this.state.subs[i], value: JSON.stringify(aList)});\r\n        this.setState({articles: [...this.state.articles, ...aList]})\r\n      })\r\n      } else {\r\n        //var temp = this.state.articles;\r\n        //console.log(this.state.blockedSources)\r\n    \r\n\r\n           \r\n           /*if(this.state.blockedSources.includes(domain)) {\r\n             temp.splice(temp.indexOf(element),1)\r\n             console.log(domain);\r\n           }*/\r\n\r\n            \r\n        //this.setState({articles:temp})\r\n\r\n        this.setState({articles:[...this.state.articles, ...JSON.parse(articlesLocal.value)]})\r\n        console.log(\"taking from capacitor cache\")\r\n      }\r\n      this.setState({isChanging:false})\r\n    }\r\n  }\r\n\r\n  // refresh articles on feed\r\n  async doRefresh(event: CustomEvent<RefresherEventDetail>) {\r\n    this.setState({articles:[]})\r\n    let aList : any[] = [];\r\n    for (var i = 0; i < this.state.subs.length; i++) {\r\n        aList = []\r\n        await NewsDB.collection(this.state.subs[i]).get()\r\n      .then(async (snapshot) => {\r\n        snapshot.forEach(async doc => {\r\n          if (doc.exists) {\r\n            console.log(this.state.blockedSources)\r\n            let articleItem = doc.data();\r\n            var html = articleItem.Description;\r\n            var a = document.createElement(\"a\");\r\n            a.innerHTML = html;\r\n            var text = a.textContent || a.innerText || \"\";\r\n            aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source:articleItem.source, pubDate: articleItem.pubDate})\r\n          }\r\n        })\r\n      })\r\n    }\r\n    setTimeout(() => {\r\n      console.log('refreshing ended');\r\n      event.detail.complete();\r\n      this.setState({articles: [...this.state.articles, ...aList]})\r\n    }, 500);\r\n  }\r\n  \r\n  getId() {\r\n    // return user_id if current user else null\r\n    return auth.currentUser?.uid;\r\n  }\r\n  \r\n  toggleWeatherModal() {\r\n    this.setState({isWeatherModalOpen: !this.state.isWeatherModalOpen})\r\n  }\r\n\r\n  // check server collection for changes\r\n  async checkCollection(collection:string){\r\n    var observer = NewsDB.collection(collection).where('Title', '!=', '')\r\n    .onSnapshot(async querySnapshot => {\r\n        const LocalNotificationPendingList = await LocalNotifications.getPending()\r\n        // if there are changes to the metadata, clear cache and add new docs to the \r\n        if (querySnapshot.metadata.fromCache === false) {\r\n          // clear cache so new articles can be added to cache\r\n          this.clear()\r\n          this.setState({isChanging:true})\r\n          if (!(await LocalNotifications.requestPermission()).granted) return;\r\n          // send notification for every changes in collection\r\n            await LocalNotifications.schedule({\r\n              notifications: [{\r\n                title: 'Changes in your feed!',\r\n                body: \"Check them out!\",\r\n                id: 1,\r\n                schedule: {\r\n                  // notification 1 minutes after change in collections\r\n                  at:new Date(new Date().getTime() + 60000),\r\n                  repeats:false\r\n                },\r\n              }]\r\n            });\r\n      }\r\n      // makes sure they can't be more than 1 notifications on single changes\r\n      if (LocalNotificationPendingList.notifications.length>0) {\r\n        LocalNotifications.cancel(LocalNotificationPendingList)\r\n      }\r\n      console.log(LocalNotificationPendingList)\r\n    });\r\n  }\r\n\r\n  \r\n\r\n  /*clear capacitor local storage */\r\n  async clear() {\r\n    await Storage.clear();\r\n  }\r\n\r\n  /* can currently subscribe to: gaming, health, politics, sports, technology, world */\r\n  async addSubscription(sub: string) {\r\n    // tempaddSubscription(sub, this.getId());\r\n    if (sub!== \"\") {\r\n      await db.collection(\"topicSubscription\").doc(this.getId()).update({subList: firebase.firestore.FieldValue.arrayUnion(sub)})\r\n    }\r\n  }\r\n\r\n  async removeSubscription(index:any) {\r\n    // tempremoveSubscription(index, this.getId(), this.state.subs);\r\n    if (this.state.subs[index] !== \"\") {\r\n      await db.collection(\"topicSubscription\").doc(this.getId()).update({subList: firebase.firestore.FieldValue.arrayRemove(this.state.subs[index])})\r\n    }\r\n  }\r\n\r\n\r\n  toggleNewsModal(){\r\n    this.setState({isSearchingModal: true})\r\n  }\r\n\r\n  /* search firebase database for topic*/\r\n  async searchTopic(topic:any) {\r\n    this.setState({showLoading: true})\r\n    this.setState({articlesSearched:[]})\r\n      if (topic === null || topic === undefined || topic === '') {\r\n        console.log(\"Enter a valid topic\");\r\n        this.setState({showSearchAlert:true})\r\n      } else {\r\n        this.toggleNewsModal()\r\n        let aList : articleList = [];\r\n        /* cache data on topic search */\r\n        await NewsDB.collection(topic.toLowerCase()).get()\r\n        .then(async (snapshot) => {\r\n        if (snapshot.empty) {\r\n          // searching through api and sending to firestore instead of searching in main collection\r\n          await this.apiSearch(topic, 'search')\r\n       \r\n        } else {\r\n        console.log(\"collection exist, will pull data from that collection\")\r\n\r\n        aList = [];\r\n        snapshot.docChanges().forEach((change) => {\r\n          if (change.doc.exists) {\r\n            let articleItem = change.doc.data();\r\n            var html = articleItem.Description;\r\n            var a = document.createElement(\"a\");\r\n            a.innerHTML = html;\r\n            var text = a.textContent || a.innerText || \"\";\r\n            aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source: articleItem.source, pubDate: articleItem.pubDate})\r\n          }\r\n          this.setState({articlesSearched: aList})\r\n        })\r\n        }\r\n      })\r\n    }\r\n    this.setState({showLoading: false})\r\n    return 0\r\n  }\r\n\r\n  async subscribe(topic:any) {\r\n    if (topic === null || topic === undefined || topic === '') {\r\n      console.log(\"Enter a valid topic\");\r\n    } else {\r\n      /* cache data on subscribe */\r\n      await NewsDB.collection(topic.toLowerCase()).get()\r\n        .then(async (snapshot) => {\r\n       /* Creating a new collection if topic collection doesn't exist and subscribing to it */\r\n      if (snapshot.empty) {\r\n        await this.apiSearch(topic, 'subscribe')\r\n       \r\n      }\r\n      else {\r\n        console.log(\"News about \"+ topic +\" has been found and will be subscribed.\")\r\n        await this.addSubscription(topic.toLowerCase());\r\n      }\r\n      var source = snapshot.metadata.fromCache ? \"local cache\" : \"server\";\r\n          console.log(\"Data came from \" + source);\r\n    })\r\n  }\r\n  }\r\n\r\n  async unsubscribe(topic:any,index:any) {\r\n    console.log(\"News about \"+ topic +\" has been found and will be unsubscribed.\")\r\n    await this.removeSubscription(index);\r\n  }\r\n\r\n  async apiSearch(topic: any, type:string) {\r\n    let aList : articleList = [];\r\n    await axios({\r\n      method: 'GET',\r\n      /* using server api to turn rss feeds into json to avoid cors policy errors */\r\n      url:'https://world-watchlist-server-8f86e.web.app/'+topic\r\n    })\r\n    .then(async (response) => {\r\n      console.log(response)\r\n      await response.data.forEach((articleItem: any) => {\r\n        /* remove <a> html tag from description */\r\n        var html = articleItem.description;\r\n        var a = document.createElement(\"a\");\r\n        a.innerHTML = html;\r\n        var text = a.textContent || a.innerText || \"\";\r\n        var pathArray = articleItem.link.split( '/' );\r\n        var protocol = pathArray[0];\r\n        var host = pathArray[2];\r\n        var baseUrl = protocol + '//' + host;\r\n        aList.push({title: articleItem.title, link: articleItem.link, description: text, source: baseUrl, pubDate:articleItem.pubDate})\r\n      })\r\n      if (type==='search') {\r\n        this.setState({articlesSearched: aList})\r\n      } else {\r\n        aList.forEach(async newsItem => {\r\n          var html = newsItem.description;\r\n          var a = document.createElement(\"a\");\r\n          a.innerHTML = html;\r\n          var text = a.textContent || a.innerText || \"\";\r\n          var pathArray = newsItem.link.split( '/' );\r\n          var protocol = pathArray[0];\r\n          var host = pathArray[2];\r\n          var baseUrl = protocol + '//' + host;\r\n          await NewsDB.collection(topic.toLowerCase()).doc(newsItem.title).set({Title: newsItem.title, Link: newsItem.link, Description: text, source: baseUrl, pubDate:newsItem.pubDate});\r\n        })\r\n        await this.addSubscription(topic.toLowerCase());\r\n\r\n      }\r\n    }).catch((error) => {\r\n      console.log(error)\r\n    });\r\n  }\r\n\r\n\r\n\r\n  // async componentDidMount() {\r\n  //     setInterval(() => {    \r\n  //       this.clear()\r\n  //     },180000000)\r\n  // }\r\n\r\n  // async scheduleLocalNotifications() {\r\n  //   try {\r\n  //     // Request/ check permissions\r\n  //     if ((await LocalNotifications.requestPermission()).granted) {\r\n  //       await LocalNotifications.schedule({\r\n  //         notifications: [{\r\n  //           title: 'New articles in your feed!',\r\n  //           body: \"new news on \" + this.state.subs.pop(),\r\n  //           id: 1,\r\n  //           schedule: {\r\n  //             at:new Date(new Date().getTime() + 1000)\r\n  //           }\r\n  //         }]\r\n  //       });\r\n  //     }\r\n  //     // Clear old notifications in prep for refresh (OPTIONAL)\r\n  //   } catch (error) {\r\n  //     console.error(error);\r\n  //   }\r\n  // }\r\n\r\n\r\n\r\n  render() {\r\n    \r\n    return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        {/* <IonToolbar class ='feedToolbar'>\r\n          <IonTitle class='feedTitle'>\r\n            Feed\r\n          </IonTitle>\r\n          \r\n      <IonButtons slot=\"start\">\r\n          <IonButton onClick={() => {this.setState({isWeatherModalOpen: true})}}  fill='clear'>\r\n              <IonIcon icon={cloud} />\r\n          </IonButton>\r\n          </IonButtons>\r\n          <IonButtons slot=\"end\">\r\n          <IonButton onClick={() => {this.setState({showSubscription: true})}}  fill='clear'>\r\n              <IonIcon icon={bookmarks} />\r\n          </IonButton>\r\n          </IonButtons>\r\n          <IonButtons slot=\"end\">\r\n          <IonButton onClick={() => {this.setState({showModal: true})}}  fill='clear'>\r\n              <IonIcon icon={search} />\r\n          </IonButton>\r\n          </IonButtons>\r\n        </IonToolbar> */}\r\n        <FeedToolbar \r\n         openWeather={() => this.setState({isWeatherModalOpen: true})} \r\n         showSubs={() => {this.setState({showSubscription: true})}}\r\n         showModal={() => {this.setState({showModal: true})}}></FeedToolbar>\r\n      </IonHeader>\r\n      <IonContent>\r\n      <IonRefresher slot=\"fixed\" pullFactor={0.5} pullMin={100} pullMax={200} onIonRefresh={event=>this.doRefresh(event)}>\r\n        <IonRefresherContent></IonRefresherContent>\r\n      </IonRefresher>\r\n        <Weather toggleWeatherModal={this.toggleWeatherModal} isOpen={this.state.isWeatherModalOpen}/>\r\n        {/* Modal for searching topics */}\r\n    <IonModal isOpen={this.state.showModal} onDidDismiss={() =>this.setState({showModal: false})}>\r\n        <IonHeader>\r\n            <IonToolbar class='feedToolbar2'>\r\n        <IonButtons slot='start'>\r\n                <IonButton onClick={() => {this.setState({showModal: false})}} fill='clear'>\r\n                  <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n                </IonButton>\r\n        </IonButtons>\r\n\r\n        <IonTitle class='feedTitle2'>\r\n          Search Topics\r\n\r\n        </IonTitle>\r\n        </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        <IonSearchbar placeholder=\"Enter a Topic or Location\" value={this.state.topicSearched} onIonInput={(e: any) => this.setState({topicSearched:e.target.value} )} animated>\r\n      </IonSearchbar>\r\n\r\n      <IonButton id=\"searchButton\" expand=\"block\" fill=\"outline\" type=\"submit\" shape=\"round\" onClick={async () => await this.searchTopic(this.state.topicSearched)}>\r\n          Search\r\n      </IonButton>\r\n\r\n      <IonAlert\r\n          isOpen={this.state.showSearchAlert}\r\n          onDidDismiss={() => this.setState({showSearchAlert:false})}\r\n          message=\"Enter a valid topic or location\"\r\n       />\r\n      <IonLoading\r\n        isOpen={this.state.showLoading}\r\n        message={'Loading...'}\r\n        duration={7000}\r\n      />\r\n\r\n\r\n      {/* <IonItem> */}\r\n         {/* check if person wants to search location */}\r\n  {/* <IonLabel>Location based search</IonLabel> */}\r\n  {/* <IonCheckbox onIonChange={e=> this.setState({locationBased:e.detail.checked}) }></IonCheckbox> */}\r\n  {/* </IonItem> */}\r\n      <IonModal isOpen={this.state.isSearchingModal} >\r\n      <IonHeader>\r\n      <IonToolbar id=\"newsToolbar\">\r\n      <IonButtons slot='start'>\r\n                <IonButton onClick={() => this.setState({isSearchingModal: false})} fill='clear'>\r\n                  <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n                </IonButton>\r\n        </IonButtons>\r\n        <IonButtons slot='end'>\r\n        <IonButton onClick={()=> this.subscribe(this.state.topicSearched) && this.setState({showSubscribeAlert:true})} fill='clear'>\r\n        <IonIcon id=\"addTopic\" icon={addCircle}/>\r\n        </IonButton>\r\n      </IonButtons>\r\n      <IonTitle id=\"newsTitle\">\r\n          News\r\n        </IonTitle>\r\n      </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent>\r\n\r\n      <ArticleList theArticleList={this.state.articlesSearched}></ArticleList>\r\n      <IonAlert\r\n          isOpen={this.state.showSubscribeAlert}\r\n          onDidDismiss={() => this.setState({showSubscribeAlert:false,isSearchingModal:false})}\r\n          message={\"Subscribed to \" + this.state.topicSearched}\r\n       />\r\n      </IonContent>\r\n      </IonModal>\r\n        </IonContent>\r\n    </IonModal>\r\n    <SubscriptionModal showModal={this.state.showSubscription}\r\n    closeButton={() => {this.setState({showSubscription: false})}}\r\n    unsubButton={this.unsubscribe.bind(this)}\r\n    subscriptions={this.state.subs}\r\n    ></SubscriptionModal>\r\n    {/*</IonContent><IonModal isOpen={this.state.showSubscription}>\r\n        <IonHeader>\r\n          <IonToolbar class='feedToolbar2'>\r\n            <IonButtons slot='start'>\r\n              <IonButton onClick={() => {this.setState({showSubscription: false})}} fill='clear'>\r\n                <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n\r\n          <IonTitle class='feedTitle2'>Subscriptions</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n          <IonCard>\r\n        {/* <ParentComponent>\r\n       {subs}\r\n      </ParentComponent>\r\n            <ChildrenComponent subs={this.state.subs} func={this.unsubscribe.bind(this)}></ChildrenComponent>\r\n          </IonCard>\r\n        </IonContent>\r\n    </IonModal> */}\r\n    <FeedList headerName=\"Recent News\" articleList={this.state.articles}></FeedList>\r\n    {/* <IonList>\r\n        <IonListHeader>\r\n          Recent News\r\n        </IonListHeader>\r\n      <ArticleList theArticleList={this.state.articles}></ArticleList>\r\n    </IonList> */}\r\n      </IonContent>\r\n\r\n    </IonPage>\r\n    )\r\n  }\r\n}\r\nexport default Feed;\r\n","import React from 'react';\r\nimport Placeholder from '../images/placeholder.png'\r\nimport './Message.css'\r\nimport {\r\n  IonAvatar,\r\n  IonItem,\r\n  IonLabel\r\n} from '@ionic/react'\r\n\r\ninterface MessageProps {\r\n  photo: string;\r\n  content: string;\r\n  sender: string;\r\n}\r\n\r\nfunction Message(props: MessageProps) {\r\n    return (\r\n      <div>\r\n      <IonLabel class='messageLabel' position='stacked'>{props.sender}</IonLabel>\r\n      <IonItem class='messageItem'>\r\n        <IonAvatar slot=\"start\">\r\n          <img src={props.photo !== '' ? props.photo : Placeholder} />\r\n        </IonAvatar>\r\n\r\n        <IonLabel class='messageContent'>{props.content}</IonLabel>\r\n      </IonItem>\r\n      </div>\r\n    );\r\n}\r\nexport default Message;\r\n","import { Plugins } from \"@capacitor/core\";\r\n// import { IonContent, IonPage } from \"@ionic/react\";\r\n// import firebase from \"firebase\";\r\n// import React from \"react\";\r\n// import { NewsDB } from \"../config/config\";\r\n// import { auth, db } from \"../firebase\";\r\n// import Feed from \"../pages/Feed\";\r\n// import { articleList } from \"./ArticleTypes\";\r\n// import FeedList from \"./FeedList\";\r\n// import { FeedProps, FeedState, GroupFeedProps, GroupFeedState } from \"./FeedTypes\";\r\n\r\nimport React from \"react\";\r\nimport { db } from \"../firebase\";\r\nimport { article } from \"./ArticleTypes\";\r\nimport FeedList from \"./FeedList\";\r\n\r\nconst { Storage } = Plugins;\r\n// class GroupFeed extends Feed {\r\n//     // state: FeedState = {\r\n//     //   articles: [],\r\n//     //   subs: [],\r\n//     //   articlesSearched:[],\r\n//     //   subscribedArticles: undefined,\r\n//     //   CurrentUser: null,\r\n//     //   topicSearched:null,\r\n//     //   showLoading:false,\r\n//     //   showModal:false,\r\n//     //   showSubscription:false,\r\n//     //   allArticles:[],\r\n//     //   locationBased:false,\r\n//     //   isWeatherModalOpen:false,\r\n//     //   isSearchingModal:false,\r\n//     //   showSearchAlert:false,\r\n//     //   showSubscribeAlert:false,\r\n//     //   isChanging:false\r\n//     // };\r\n//     state: FeedState = {\r\n//       articles: [],\r\n//       subs: [],\r\n//       articlesSearched:[],\r\n//       subscribedArticles: undefined,\r\n//       CurrentUser: null,\r\n//       topicSearched:null,\r\n//       showLoading:false,\r\n//       showModal:false,\r\n//       showSubscription:false,\r\n//       allArticles:[],\r\n//       locationBased:false,\r\n//       isSearchingModal:false,\r\n//       showSearchAlert:false,\r\n//       showSubscribeAlert:false,\r\n//       isChanging:false,\r\n//       isWeatherModalOpen: false\r\n//     }\r\n//     state2 = {\r\n//       groupId: \"\"\r\n//     }\r\n//     constructor(props: GroupFeedProps) {\r\n//       super(props)\r\n//       this.state2 = {groupId: props.groupId};\r\n//       let aList : any = [];\r\n//       auth.onAuthStateChanged(async () => {\r\n//         if(auth.currentUser) {\r\n//           //gets the username of our user\r\n//           await db.collection(\"users\").doc(auth.currentUser.uid).get().then(async doc => {\r\n//             if(doc.data()) {\r\n//               console.log('current user: ' + doc.data()!.username)\r\n//               this.setState({CurrentUser:doc.data()!.username})\r\n//             }\r\n//             // everytime there is a new subscription, update news onto main feed\r\n//             db.collection(\"topicSubscription\").doc(this.state.CurrentUser).onSnapshot(async (sub_list) => {\r\n//               this.setState({articles:[]})\r\n//               this.setState({subs: await sub_list.data()!.subList});\r\n//               if (sub_list.exists) {\r\n//                 console.log(\"current sub list: \", sub_list.data()!.subList)\r\n//                 for (var i = 0; i < this.state.subs.length; i++) {\r\n//                   var articlesLocal = await Storage.get({key:this.state.subs[i]})\r\n//                   // check local storage if collection exist\r\n//                   if ((articlesLocal.value)?.length === undefined || JSON.parse((articlesLocal.value)).length === 0) {\r\n//                     console.log(\"local storage empty for\", this.state.subs[i])\r\n//                     await NewsDB.collection(this.state.subs[i]).get()\r\n//                   .then(async (snapshot) => {\r\n//                     snapshot.forEach(doc => {\r\n//                       if (doc.exists) {\r\n//                         let articleItem = doc.data();\r\n//                         var html = articleItem.description; \r\n//                         var a = document.createElement(\"a\"); \r\n//                         a.innerHTML = html; \r\n//                         var text = a.textContent || a.innerText || \"\"; \r\n//                         aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source:articleItem.source, pubDate:articleItem.pubDate})\r\n//                       } else {\r\n//                         console.log(\"Cannot find anything in database.\")\r\n//                       }\r\n//                     })\r\n//                     var source = snapshot.metadata.fromCache ? \"local cache\" : \"server\";\r\n//                     console.log(\"Sub Articles came from \" + source);\r\n//                     await Storage.set({ key: this.state.subs[i], value: JSON.stringify(aList) });\r\n//                     this.setState({articles: aList})\r\n//                   })\r\n//                   } else {\r\n//                     let cache = JSON.parse(articlesLocal.value)\r\n//                     this.setState({articles: cache})\r\n//                     console.log(\"taking from capacitor cache\")\r\n//                   }\r\n//                 }\r\n//               } else {\r\n//                 db.collection(\"topicSubscription\").doc(this.state.CurrentUser).set({subList: []});\r\n//               }\r\n//             })\r\n//           }).catch(function(error) {\r\n//               console.log(\"Error getting document:\", error);\r\n//           });\r\n//           // end of getting data from server\r\n//         }\r\n//       })\r\n//     }\r\n    \r\n//     getId() {\r\n//       // return groupId\r\n//       return \"\";\r\n//     }\r\n\r\n//     render() {\r\n//       return (<IonContent>\r\n//         <FeedList headerName=\"Group News\" articleList={this.state.articles}></FeedList>\r\n//       </IonContent>)\r\n//     }\r\n//   }\r\n\r\nfunction GroupFeed(props: {headerName: string, articles: article[]}) {\r\n  // let articles = Array<article>();\r\n  // db.collection('topicSubscription').doc(props.groupId).get().then(docData => {\r\n  //   if (docData.exists) {\r\n  //     let subs = docData.data()?.subList;\r\n\r\n  //   }\r\n  // })\r\n  return <FeedList headerName={props.headerName} articleList={props.articles}></FeedList>\r\n}\r\nexport default GroupFeed;","// converted methods in Feed.tsx to functions, attempted move of constructors\r\nimport { LocalNotifications, Plugins } from \"@capacitor/core\";\r\nimport axios from \"axios\";\r\nimport firebase from \"firebase\"\r\nimport { NewsDB } from \"../config/config\";\r\nimport { db } from \"../firebase\"\r\nimport { articleList } from \"./ArticleTypes\";\r\nconst { Storage } = Plugins;\r\n\r\nexport const tempaddSubscription = async (sub: string, userId: string|undefined) => {\r\n    console.log(\"Temp add called\");\r\n  if (sub!== \"\")\r\n    await db.collection(\"topicSubscription\").doc(userId).update({subList: firebase.firestore.FieldValue.arrayUnion(sub)});\r\n}\r\n\r\nexport const tempremoveSubscription = async (index:any, userId: string|undefined, subs: string[]) => {\r\n    console.log(\"temp remove called\");\r\n    if (subs[index] !== \"\") {\r\n      await db.collection(\"topicSubscription\").doc(userId).update({subList: firebase.firestore.FieldValue.arrayRemove(subs[index])});\r\n    }\r\n}\r\n\r\nexport const tempsubscribe = async (topic:any, userId: string|undefined) => {\r\n    if (topic === null || topic === undefined || topic === '') {\r\n        console.log(\"Enter a valid topic\");\r\n    } else {\r\n      /* cache data on subscribe */\r\n      await NewsDB.collection(topic.toLowerCase()).get()\r\n        .then(async (snapshot) => {\r\n       /* Creating a new collection if topic collection doesn't exist and subscribing to it */\r\n        if (snapshot.empty) {\r\n            await tempapiSearch(topic, 'subscribe', userId);\r\n        } else {\r\n        console.log(\"News about \"+ topic +\" has been found and will be subscribed.\");\r\n        await tempaddSubscription(topic.toLowerCase(), userId);\r\n      }\r\n            var source = snapshot.metadata.fromCache ? \"local cache\" : \"server\";\r\n            console.log(\"Data came from \" + source);\r\n        })\r\n    }\r\n}\r\n\r\nexport const tempapiSearch = async (topic: any, type:string, userId: string|undefined) => {\r\n  let aList : articleList = [];\r\n  /* needed for the api.rss2json to work */\r\n  let temp = topic.replace(/\\ /g,\"%2520\")\r\n  let rssurl = \"https%3A%2F%2Fnews.google.com%2Frss%2Fsearch%3Fq%3D\"+temp+\"%26hl%3Den-US%26gl%3DUS%26ceid%3DUS%3Aen\"\r\n  await axios({\r\n    method: 'GET',\r\n    url:'https://api.rss2json.com/v1/api.json?rss_url='+rssurl+\"&api_key=ygho9vm848pakf5b24oawteww7slkcj2ccgiu13w\"\r\n  // url: \"https://send-rss-get-json.herokuapp.com/convert/?u=\"+\"https://news.google.com/rss/search?q=\"+topic+\"&hl=en-US&gl=US&ceid=US:en\"\r\n  // https://api.rss2json.com/v1/api.json?rss_url=\r\n  })\r\n  .then(async (response) => {\r\n    const data = await response.data\r\n    console.log(data)\r\n    await data.items.forEach((articleItem: any) => {\r\n      /* remove <a> html tag from description */\r\n      var html = articleItem.description;\r\n      var a = document.createElement(\"a\");\r\n      a.innerHTML = html;\r\n      var text = a.textContent || a.innerText || \"\";\r\n      var pathArray = articleItem.link.split( '/' );\r\n      var protocol = pathArray[0];\r\n      var host = pathArray[2];\r\n      var baseUrl = protocol + '//' + host;\r\n      aList.push({title: articleItem.title, link: articleItem.link, description: text, source: baseUrl, pubDate:articleItem.pubDate})\r\n    })\r\n    if (type==='search') {\r\n      return aList;\r\n    } else {\r\n      aList.forEach(async newsItem => {\r\n        var html = newsItem.description;\r\n        var a = document.createElement(\"a\");\r\n        a.innerHTML = html;\r\n        var text = a.textContent || a.innerText || \"\";\r\n        var pathArray = newsItem.link.split( '/' );\r\n        var protocol = pathArray[0];\r\n        var host = pathArray[2];\r\n        var baseUrl = protocol + '//' + host;\r\n        await NewsDB.collection(topic.toLowerCase()).doc(newsItem.title).set({Title: newsItem.title, Link: newsItem.link, Description: text, source: baseUrl, pubDate:newsItem.pubDate});\r\n      })\r\n      await tempaddSubscription(topic.toLowerCase(), userId);\r\n    }\r\n  }).catch((error) => {\r\n    console.log(error)\r\n  });\r\n}\r\n\r\nexport const getArticles = async (userId: string|undefined) => {\r\n    let aList: any[] = [];\r\n    let articles: any[] = [];\r\n    let subscriptions: any[] = [];\r\n    db.collection(\"topicSubscription\").doc(userId).onSnapshot(async (sub_list) => {\r\n        articles = []; // this.setState({articles:[]});\r\n        if (sub_list.exists) {\r\n            subscriptions = await sub_list.data()!.subList; // this.setState({subs: await sub_list.data()!.subList});\r\n            console.log(\"subs\",subscriptions);\r\n            for (var i = 0; i < subscriptions.length; i++) {\r\n            /* Observe any changes in firestore and send a notification*/\r\n            let isChanging = await tempcheckCollection(subscriptions[i]);\r\n            aList = [];\r\n            var articlesLocal = await Storage.get({key:subscriptions[i]});\r\n            // check local storage if collection exist take from cache, if collection changes, get from server\r\n            if ((articlesLocal.value)?.length === undefined || JSON.parse((articlesLocal.value)).length === 0 || isChanging===true) {\r\n                console.log(\"local storage empty for\", subscriptions[i]);\r\n                await NewsDB.collection(subscriptions[i]).get().then(async (snapshot) => {\r\n                    snapshot.forEach(async doc => {\r\n                        if (doc.exists) {\r\n                            let articleItem = doc.data();\r\n                            var html = articleItem.Description;\r\n                            var a = document.createElement(\"a\");\r\n                            a.innerHTML = html;\r\n                            var text = a.textContent || a.innerText || \"\";\r\n                            aList.push({title: articleItem.Title, link: articleItem.Link, description: text, source:articleItem.source, pubDate: articleItem.pubDate});\r\n                        } else {\r\n                            console.log(\"Cannot find anything in database.\");\r\n                        }\r\n                    })\r\n            var source = snapshot.metadata.fromCache ? \"local cache\" : \"server\";\r\n            console.log(\"Sub Articles came from \" + source);\r\n            await Storage.set({ key: subscriptions[i], value: JSON.stringify(aList)});\r\n            articles = [...articles, ...aList]; // this.setState({articles: [...articles, ...aList]});\r\n        })\r\n        } else {\r\n            articles = [...articles, ...JSON.parse(articlesLocal.value)]; // this.setState({articles:[...articles, ...JSON.parse(articlesLocal.value)]});\r\n            console.log(\"taking from capacitor cache\");\r\n        }\r\n        }\r\n        console.log(\"articles\",articles);\r\n    } else {\r\n        db.collection(\"topicSubscription\").doc(userId).set({subList: []});\r\n    }\r\n    })\r\n    return {articles: articles, subs: subscriptions};\r\n}\r\n\r\nexport const tempcheckCollection = async (collection:string) => {\r\n    let isChanging = false;\r\n    var observer = NewsDB.collection(collection).where('Title', '!=', '')\r\n    .onSnapshot(async querySnapshot => {\r\n        // if there are changes to the metadata, clear cache and add new docs to the \r\n        if (querySnapshot.metadata.fromCache === false) {\r\n          tempclear();\r\n            isChanging = true;\r\n        //   this.setState({isChanging:true})\r\n          if (!(await LocalNotifications.requestPermission()).granted) return;\r\n          // send notification for every changes in collection\r\n            await LocalNotifications.schedule({\r\n              notifications: [{\r\n                title: 'New articles in your feed!',\r\n                body: \"Check them out!\",\r\n                id: 1,\r\n                schedule: {\r\n                  at:new Date(new Date().getTime() + 1000),\r\n                  repeats:false,\r\n                }\r\n              }]\r\n            });\r\n      }\r\n    });\r\n    return isChanging;\r\n}\r\n\r\nexport const tempclear = async () => {\r\n    await Storage.clear();\r\n}","import React from 'react';\r\nimport {\r\n  IonModal,\r\n  IonContent,\r\n  IonHeader,\r\n  IonButtons,\r\n  IonButton,\r\n  IonToolbar,\r\n  IonIcon,\r\n  IonTitle,\r\n  IonAvatar,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonLabel,\r\n  IonItem,\r\n  IonInput,\r\n  IonSegment,\r\n  IonSegmentButton\r\n} from '@ionic/react'\r\n\r\nimport './GroupView.css'\r\n\r\nimport firebase, {db, auth} from '../firebase'\r\nimport Placeholder from '../images/placeholder.png'\r\nimport {\r\n  closeCircleOutline,\r\n  exitOutline,\r\n  peopleOutline,\r\n  settingsOutline,\r\n  chevronDownOutline,\r\n  pencilOutline,\r\n  checkmarkOutline,\r\n  cloudUploadOutline,\r\n  addOutline,\r\n  sendOutline\r\n} from 'ionicons/icons'\r\n\r\nimport Message from '../components/Message'\r\nimport GroupFeed from '../components/GroupFeed';\r\nimport { article } from '../components/ArticleTypes';\r\nimport { tempremoveSubscription, tempsubscribe } from '../components/TempFunctions';\r\nimport SubscriptionModal from '../components/SubscriptionModal';\r\n\r\n// type SubState = {\r\n//   showModal: boolean,\r\n//   closeButton: () => {},\r\n//   unsubscribeButton: () => {},\r\n//   subscriptions: string[]\r\n// }\r\n\r\ntype MyState = {\r\n  articles: article[],\r\n  blockedSources: string[],\r\n  subscriptions: string[],\r\n  showSubscriptionModal: boolean,\r\n  groupSegment: string|undefined,\r\n  groupViewPopoverEvent: any,\r\n  isGroupViewPopoverOpen: boolean,\r\n  isSettingsModalOpen: boolean,\r\n  isMembersModalOpen: boolean,\r\n  isFriendsListModalOpen: boolean,\r\n  isNicknameReadOnly: boolean,\r\n  tempNickname: string,\r\n  members: Member[],\r\n  owner: Member | undefined,\r\n  messages: any[],\r\n  photoDictionary: any,\r\n  currentMessage: string,\r\n  nameDictionary: any,\r\n  blockedList: string[]\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n  groupDetails: GroupType;\r\n  isGroupModalOpen: boolean;\r\n  toggleGroupModal: any;\r\n  leaveGroup: () => void,\r\n  deleteGroup: () => void,\r\n  friendList: Friend[],\r\n  addFriendToGroup: (friend : string, group: string) => void,\r\n}\r\n\r\ntype GroupType = {\r\n  nickname: string;\r\n  members: string[];\r\n  id: string;\r\n  profilePicture: string;\r\n  owner: string;\r\n}\r\n\r\ntype Friend = {\r\n  uuid: string;\r\n  uid: string;\r\n  displayName: string;\r\n  photo: string;\r\n}\r\n\r\ntype Member = {\r\n  uid: string;\r\n  displayName: string;\r\n  photo: string;\r\n}\r\n\r\n\r\nclass GroupView extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    articles: [],\r\n    blockedSources:[],\r\n    subscriptions: [],\r\n    showSubscriptionModal: false,\r\n    groupSegment: 'feed',\r\n    groupViewPopoverEvent: undefined,\r\n    isGroupViewPopoverOpen: false,\r\n    isSettingsModalOpen: false,\r\n    isMembersModalOpen: false,\r\n    isFriendsListModalOpen: false,\r\n    isNicknameReadOnly: true,\r\n    tempNickname: this.props.groupDetails.nickname,\r\n    members: [],\r\n    owner: {uid: '', displayName: '', photo: ''},\r\n    messages: [],\r\n    photoDictionary: {},\r\n    currentMessage: '',\r\n    nameDictionary: {},\r\n    blockedList: []\r\n  };\r\n  realtime_db = firebase.database();\r\n  anchorRef: React.RefObject<HTMLDivElement>;\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n    this.pullImage()\r\n    this.anchorRef = React.createRef()\r\n  }\r\n\r\n  componentDidMount() {\r\n    let members : Member[] = []\r\n    this.props.groupDetails.members.forEach(memberUid => {\r\n      db.collection('profiles').doc(memberUid).get().then((document) => {\r\n        let member : Member = {\r\n          photo: document.data()?.photo,\r\n          displayName: document.data()!.displayName,\r\n          uid: memberUid\r\n        }\r\n\r\n        members.push(member)\r\n        if(memberUid === this.props.groupDetails.owner) {\r\n          this.setState({\r\n            owner: member\r\n          })\r\n        }\r\n      })\r\n    })\r\n    this.setState({\r\n      members: members,\r\n    })\r\n  }\r\n\r\n  componentDidUpdate(prevProps: MyProps) {\r\n    if(prevProps.groupDetails.members.length !== this.props.groupDetails.members.length) {\r\n      if(auth.currentUser) {\r\n        db.collection('blockedUsers').doc(auth.currentUser?.uid).get().then((document) => {\r\n          this.setState({blockedList: document.data()!.blocked})\r\n        })\r\n      }\r\n      let members : Member[] = []\r\n      let photoDictionary : any = new Object()\r\n      photoDictionary[\"World-Watchlist\"] = \"https://firebasestorage.googleapis.com/v0/b/worldwatchlist.appspot.com/o/images%2Fearth.jpg?alt=media&token=8dfce470-5dac-4126-b3d2-4f3d42a07b8a\"\r\n      let nameDictionary : any = new Object()\r\n      nameDictionary[\"World-Watchlist\"] = \"World-Watchlist\"\r\n      this.props.groupDetails.members.forEach(memberUid => {\r\n        db.collection('profiles').doc(memberUid).get().then((document) => {\r\n          let member : Member = {\r\n            photo: document.data()?.photo,\r\n            displayName: document.data()!.displayName,\r\n            uid: memberUid\r\n          }\r\n          members.push(member)\r\n          photoDictionary[member.uid] = member.photo\r\n          nameDictionary[member.uid] = member.displayName\r\n          console.log(photoDictionary[member.uid])\r\n          console.log(nameDictionary[member.uid])\r\n          if(memberUid === this.props.groupDetails.owner) {\r\n            this.setState({\r\n              owner: member\r\n            })\r\n          }\r\n        })\r\n      })\r\n      this.setState({\r\n        members: members,\r\n        photoDictionary: photoDictionary,\r\n        nameDictionary: nameDictionary\r\n      })\r\n    }\r\n    if(prevProps.groupDetails.id !== this.props.groupDetails.id) {\r\n      this.setState({messages: []})\r\n      let messages : any[] = []\r\n      this.realtime_db.ref(this.props.groupDetails.id).orderByKey().on('child_added', (snapshot) => {\r\n        messages.push({...snapshot.val(), key: snapshot.key})\r\n        console.log({...snapshot.val(), key: snapshot.key})\r\n\r\n        this.setState({messages: messages})\r\n        if ( this.state.groupSegment === \"messages\")\r\n          this.anchorRef.current!.scrollIntoView();\r\n\r\n      })\r\n    }\r\n  }\r\n\r\n   async pullImage() {\r\n      if(auth.currentUser) {\r\n      var storage = firebase.storage();\r\n      var storageRef = firebase.storage().ref();\r\n      var pathReference;\r\n      var pathName = 'groupImages/' +this.props.groupDetails!.id+'.jpg';\r\n      pathReference = storageRef.child(pathName);\r\n\r\n        pathReference.getDownloadURL().then((url)=> {\r\n         var img = document.getElementById('groupImage');\r\n         if(img!=null)\r\n          img.setAttribute('src', url);\r\n\r\n      })\r\n      .catch((error) => {\r\n  // A full list of error codes is available at\r\n  // https://firebase.google.com/docs/storage/web/handle-errors\r\n  switch (error.code) {\r\n    case 'storage/object-not-found':\r\n    firebase.storage().ref().child('placeholder.png').getDownloadURL().then((url)=> {\r\n         var img = document.getElementById('groupImg');\r\n         if(img!=null)\r\n          img.setAttribute('src', url);\r\n      })\r\n\r\n      break;\r\n    case 'storage/unauthorized':\r\n      // User doesn't have permission to access the object\r\n      break;\r\n    case 'storage/canceled':\r\n      // User canceled the upload\r\n      break;\r\n    case 'storage/unknown':\r\n      // Unknown error occurred, inspect the server response\r\n      break;\r\n  }\r\n});\r\n\r\n\r\n  }\r\n}\r\n\r\n  async uploadImage(selectorFiles: FileList)\r\n    {\r\n        if(selectorFiles[0]!=null) {\r\n        var storageRef = firebase.storage().ref();\r\n        var file = selectorFiles[0];\r\n        var uid = this.props.groupDetails!.id;\r\n        var newPicRef = storageRef.child('groupImages/' + uid+ '.jpg');\r\n        newPicRef.put(file);\r\n        await new Promise(r => setTimeout(r, 1000));\r\n        var url = await newPicRef.getDownloadURL();\r\n\r\n\r\n          db.collection('groups').doc(this.props.groupDetails.id).update({\r\n          profilePicture: url\r\n        })\r\n\r\n\r\n        this.pullImage();\r\n\r\n    }\r\n  }\r\n\r\n  sendMessage() {\r\n    let timestamp = Date.now()\r\n    this.realtime_db.ref(this.props.groupDetails.id).child(timestamp.toString()).set({message: this.state.currentMessage, sender: auth.currentUser?.uid})\r\n    this.setState({\r\n      currentMessage: ''\r\n    })\r\n  }\r\n  getId() {\r\n    return this.props.groupDetails.id;\r\n  }\r\n  handleSegmentSwitch(e: any) {\r\n    let segmentValue = e.detail.value;\r\n    this.setState({groupSegment: segmentValue});\r\n    if (segmentValue === \"messages\") {\r\n      console.log(\"Messages selected\");\r\n      this.anchorRef.current!.scrollIntoView();\r\n    }\r\n  }\r\n  closeButton() {\r\n    this.setState({showSubscriptionModal: false});\r\n  }\r\n  unsubscribeButton(index: number) {\r\n    tempremoveSubscription(index, this.getId(), this.state.subscriptions);\r\n  }\r\n  subscribeButton(topic: string) {\r\n    tempsubscribe(topic, this.getId())\r\n  }\r\n  \r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n      <IonModal swipeToClose={false} isOpen={this.state.isMembersModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar>\r\n            <IonButtons slot = 'start'>\r\n              <IonButton fill='clear' onClick={() => {this.setState({isMembersModalOpen: false})}}>\r\n                <IonIcon className='groupViewIcon' icon={chevronDownOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonTitle>Members</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n          <IonListHeader>Owner</IonListHeader>\r\n          <IonList>\r\n            <IonItem>\r\n              <IonTitle>\r\n                {this.state.owner!.displayName}\r\n              </IonTitle>\r\n            </IonItem>\r\n          </IonList>\r\n          <IonListHeader>Members ({this.props.groupDetails.members.length - 1}) </IonListHeader>\r\n          <IonList>\r\n            {\r\n              this.state.members.map((member) => {\r\n                return member.uid !== this.props.groupDetails!.owner ?\r\n                  <IonItem key={member.uid}>\r\n                    <IonTitle>\r\n                      {member.displayName}\r\n                    </IonTitle>\r\n                  </IonItem>\r\n                 : undefined\r\n              })\r\n            }\r\n          </IonList>\r\n        </IonContent>\r\n      </IonModal>\r\n\r\n      <IonModal swipeToClose={false} isOpen={this.state.isSettingsModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar>\r\n            <IonButtons slot = 'start'>\r\n              <IonButton fill='clear' onClick={() => {this.setState({isSettingsModalOpen: false})}}>\r\n                <IonIcon className='groupViewIcon' icon={chevronDownOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonTitle>Group Settings</IonTitle>\r\n\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        {\r\n          this.props.groupDetails.owner === auth.currentUser?.uid ?\r\n            <div>\r\n              <IonItem>\r\n                Change Profile Picture\r\n               <IonButtons slot = 'end'>\r\n\r\n                  <IonButton id = 'submit'>\r\n\r\n<input type=\"file\" id = 'fileSelect' onChange={ (e) => (this.uploadImage(e.target.files!)) } />\r\n\r\n <IonIcon id = 'cloudUploadOutline' icon={cloudUploadOutline}/>\r\n</IonButton>\r\n\r\n\r\n\r\n        </IonButtons>\r\n              </IonItem>\r\n              <IonItem>\r\n                <IonInput onIonChange={(e) => {this.setState({tempNickname: (e.target as HTMLInputElement).value})}} placeholder={this.props.groupDetails.nickname} readonly={this.state.isNicknameReadOnly} value={this.state.tempNickname}/>\r\n                <IonButton onClick={\r\n                  () => {this.setState({\r\n                    isNicknameReadOnly: !this.state.isNicknameReadOnly\r\n                  });\r\n                  db.collection('groups').doc(this.props.groupDetails.id).update({\r\n                    nickname: this.state.tempNickname\r\n                  })\r\n                }\r\n                } slot='end' fill='clear'>\r\n                  <IonIcon icon={this.state.isNicknameReadOnly ? pencilOutline : checkmarkOutline} />\r\n                </IonButton>\r\n              </IonItem>\r\n              <IonItem onClick={() => {this.setState({isSettingsModalOpen: false}); this.props.deleteGroup()}}>\r\n                Delete Group\r\n              </IonItem>\r\n            </div> : undefined\r\n        }\r\n\r\n        </IonContent>\r\n      </IonModal>\r\n\r\n      <IonModal swipeToClose={false} isOpen={this.state.isFriendsListModalOpen}>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonButtons slot = 'start'>\r\n            <IonButton fill='clear' onClick={() => {this.setState({isFriendsListModalOpen: false})}}>\r\n              <IonIcon className='groupViewIcon' icon={chevronDownOutline}/>\r\n            </IonButton>\r\n          </IonButtons>\r\n          <IonTitle>Add Member</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent>\r\n        <IonListHeader>Friends ({this.props.friendList.length})</IonListHeader>\r\n        <IonList>\r\n          {\r\n            this.props.friendList.map((FriendObj) => {\r\n              return (\r\n                <IonItem key={FriendObj.uid}>\r\n                  <IonLabel>\r\n                    {FriendObj.displayName}\r\n                  </IonLabel>\r\n                  <IonButton onClick={() => {this.props.addFriendToGroup(FriendObj.uid, this.props.groupDetails.id)}} fill='clear'>\r\n                    <IonIcon slot='end' icon={this.props.groupDetails.members.includes(FriendObj.uid) ? checkmarkOutline : addOutline}/>\r\n                  </IonButton>\r\n                </IonItem>\r\n              )\r\n            })\r\n          }\r\n        </IonList>\r\n      </IonContent>\r\n      </IonModal>\r\n\r\n      <SubscriptionModal showModal={this.state.showSubscriptionModal}\r\n      closeButton={this.closeButton.bind(this)}\r\n      unsubButton={this.unsubscribeButton.bind(this)}\r\n      subscriptions={this.state.subscriptions}></SubscriptionModal>\r\n\r\n        <IonPopover\r\n          cssClass='groupViewPopover'\r\n          event={this.state.groupViewPopoverEvent}\r\n          isOpen={this.state.isGroupViewPopoverOpen}\r\n          onDidDismiss={() => {this.setState({isGroupViewPopoverOpen: false, groupViewPopoverEvent: undefined})}}\r\n        >\r\n          <IonContent>\r\n            <IonList>\r\n              <IonListHeader id='groupViewPopoverListHeader'><b>Group Options</b></IonListHeader>\r\n              <IonItem button={true} onClick={() => {this.setState({isGroupViewPopoverOpen: false, isMembersModalOpen: true})}}>\r\n                <IonLabel>Members</IonLabel>\r\n                <IonIcon className='groupViewPopoverIcon' slot='end' icon={peopleOutline}/>\r\n              </IonItem>\r\n              <IonItem button={true}  onClick={() => {this.setState({isGroupViewPopoverOpen: false, isFriendsListModalOpen: true})}}>\r\n                <IonLabel>Add Member</IonLabel>\r\n                <IonIcon className='groupViewPopoverIcon' slot='end' icon={addOutline}/>\r\n              </IonItem>\r\n              <IonItem button={true}  onClick={() => {this.setState({isGroupViewPopoverOpen: false, isSettingsModalOpen: true})}}>\r\n                <IonLabel>Settings</IonLabel>\r\n                <IonIcon className='groupViewPopoverIcon' slot='end' icon={settingsOutline}/>\r\n              </IonItem>\r\n              <IonItem onClick={() => {this.setState({isGroupViewPopoverOpen: false}); this.props.leaveGroup()}} button={true}>\r\n                <IonLabel id='leaveGroup'>Leave Group</IonLabel>\r\n                <IonIcon id='groupViewPopoverLeave' slot='end' icon={exitOutline}/>\r\n              </IonItem>\r\n\r\n            </IonList>\r\n          </IonContent>\r\n        </IonPopover>\r\n\r\n        <IonModal cssClass='modalScroll' swipeToClose={true} isOpen={this.props.isGroupModalOpen}>\r\n          <IonHeader>\r\n            <IonToolbar>\r\n              <IonButtons slot = 'start'>\r\n                <IonButton fill='clear' onClick={() => {this.props.toggleGroupModal()}}>\r\n                  <IonIcon className='groupViewIcon' icon={closeCircleOutline}/>\r\n                </IonButton>\r\n              </IonButtons>\r\n              <IonButtons slot='end'>\r\n\r\n              <IonAvatar onClick={(event : any) => {event.persist(); this.setState({isGroupViewPopoverOpen: true, groupViewPopoverEvent: event})}} className='groupViewProfilePicture'>\r\n                <img src = {this.props.groupDetails.profilePicture !== \"\" ? this.props.groupDetails.profilePicture : Placeholder}/>\r\n              </IonAvatar>\r\n\r\n\r\n              </IonButtons>\r\n\r\n              <IonTitle>{this.props.groupDetails ? this.props.groupDetails.nickname : undefined}</IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n          {/* Pulled from Social Page */}\r\n          <IonSegment id=\"groupSegment\" onIonChange={this.handleSegmentSwitch.bind(this)} value={this.state.groupSegment}>\r\n          <IonSegmentButton value='messages' class=\"groupSegmentButton\">\r\n            <IonLabel>Messages</IonLabel>\r\n          </IonSegmentButton>\r\n          <IonSegmentButton value='feed' class=\"groupSegmentButton\">\r\n            <IonLabel>Feed</IonLabel>\r\n          </IonSegmentButton>\r\n        </IonSegment>\r\n          {(this.state.groupSegment === \"messages\") ?\r\n          <IonContent className='groupViewMessageContainer' scrollY={true}>\r\n          <div className='messageContainerDiv'>\r\n            {this.state.messages.map((message) => {\r\n              return !this.state.blockedList.includes(message.sender) ?\r\n               <Message key={message.key} sender={this.state.nameDictionary[message.sender]} content={message.message}  photo={this.state.photoDictionary[message.sender]} /> :\r\n               <Message key={message.key} sender={this.state.nameDictionary[message.sender]} content={'This content is from a blocked user.'}  photo={this.state.photoDictionary[message.sender]} />\r\n            })}\r\n            <div className='groupViewAnchor'  />\r\n            <div className='groupViewAnchor2' ref={this.anchorRef} />\r\n          </div>\r\n            <div className='groupViewMessageBox'>\r\n              <IonInput value={this.state.currentMessage} onIonChange={(e) => {this.setState({currentMessage: (e.target as HTMLInputElement).value})}} className='groupViewMessageInput' />\r\n              <IonButton onClick={() => {this.sendMessage()}} fill='clear' className='groupViewMessageButton'>\r\n                <IonIcon slot=\"icon-only\" className='groupViewMessageSend' icon={sendOutline} />\r\n              </IonButton>\r\n            </div>\r\n            <div className='bottomSpaceFiller' />\r\n          </IonContent>\r\n\r\n          :\r\n          <IonContent>\r\n            <GroupFeed headerName=\"Group News\" articles={this.state.articles}></GroupFeed>\r\n          </IonContent>\r\n  }\r\n        </IonModal>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default GroupView;\r\n","import React from 'react';\r\nimport {\r\n  IonModal,\r\n  IonContent,\r\n  IonHeader,\r\n  IonButtons,\r\n  IonButton,\r\n  IonToolbar,\r\n  IonIcon,\r\n  IonTitle,\r\n  IonAvatar,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonLabel,\r\n  IonItem,\r\n  IonInput\r\n} from '@ionic/react'\r\n\r\nimport './AddFriends.css'\r\n\r\nimport firebase, {db, auth} from '../firebase'\r\nimport Placeholder from '../images/placeholder.png'\r\nimport {\r\n  closeCircleOutline,\r\n  addCircleOutline\r\n} from 'ionicons/icons'\r\n\r\ntype MyState = {\r\n  targetUserId: string;\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n  isAddFriendModalOpen: boolean;\r\n  addFriend: (targetUserId: string) => void;\r\n  toggleAddFriendModal: () => void;\r\n}\r\n\r\n\r\nclass AddFriends extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    targetUserId: ''\r\n  };\r\n\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <IonModal isOpen={this.props.isAddFriendModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar class='socialToolbar2'>\r\n            <IonButtons slot='start'>\r\n              <IonButton onClick={() => {this.props.toggleAddFriendModal()}} id='addFriendModalCloseButton' fill='clear'>\r\n                <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonTitle class='socialTitle2'>\r\n              Add Friend\r\n            </IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        <IonLabel class='addFriendDescription'>\r\n        Please input the email of the user you wish to add.\r\n        </IonLabel>\r\n          <IonItem lines='none' id='searchFriendItem'>\r\n            <IonInput id='addFriendSearch' onIonChange={(e) => {this.setState({targetUserId: (e.target as HTMLInputElement).value})}} />\r\n            <IonButton onClick={() => {this.props.addFriend(this.state.targetUserId)}} slot='end' id='addFriendButton' fill='clear'>\r\n              <IonIcon id='addFriendButtonIcon' icon={addCircleOutline} />\r\n            </IonButton>\r\n          </IonItem>\r\n\r\n        </IonContent>\r\n      </IonModal>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default AddFriends;\r\n","import React from 'react';\r\nimport {\r\n  IonModal,\r\n  IonContent,\r\n  IonHeader,\r\n  IonButtons,\r\n  IonButton,\r\n  IonToolbar,\r\n  IonIcon,\r\n  IonTitle,\r\n  IonAvatar,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonLabel,\r\n  IonItem,\r\n  IonInput\r\n} from '@ionic/react'\r\n\r\nimport './GroupView.css'\r\n\r\nimport firebase, {db, auth} from '../firebase'\r\nimport Placeholder from '../images/placeholder.png'\r\nimport {\r\n  closeCircleOutline,\r\n  addCircleOutline\r\n} from 'ionicons/icons'\r\n\r\ntype MyState = {\r\n  incomingFriends: Friend[];\r\n  outgoingFriends: Friend[];\r\n}\r\n\r\ntype Friend = {\r\n  displayName: string;\r\n  photo: string;\r\n  uid: string;\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n  isPendingRequestsModalOpen: boolean;\r\n  togglePendingRequestsModal: () => void;\r\n  incomingRequests: string[];\r\n  outgoingRequests: string[];\r\n  acceptFriend: (targetUserId: string) => void;\r\n  declineFriend: (targetUserId: string) => void;\r\n  cancelOutgingRequest: (targetUserId: string) => void;\r\n}\r\n\r\n\r\nclass PendingRequests extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    incomingFriends: [],\r\n    outgoingFriends: []\r\n  };\r\n\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    this.props.incomingRequests.map(IncomingFriend => {\r\n      return db.collection(\"profiles\").doc(IncomingFriend).get().then((document) => {\r\n        if(document.data()) {\r\n          this.setState({\r\n            incomingFriends: [...this.state.incomingFriends, {displayName: document.data()!.displayName, uid: IncomingFriend, photo: document.data()!.photo}]\r\n          })\r\n        }\r\n      })\r\n    })\r\n    this.props.outgoingRequests.map(OutgoingFriend => {\r\n      return db.collection(\"profiles\").doc(OutgoingFriend).get().then((document) => {\r\n        if(document.data()) {\r\n          this.setState({\r\n            outgoingFriends: [...this.state.outgoingFriends, {displayName: document.data()!.displayName, uid: OutgoingFriend, photo: document.data()!.photo}]\r\n          })\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  componentDidUpdate(prevProps: MyProps) {\r\n\r\n    if(this.props.incomingRequests !== prevProps.incomingRequests) {\r\n      this.setState({\r\n        incomingFriends: []\r\n      })\r\n        this.props.incomingRequests.map(IncomingFriend => {\r\n          return db.collection(\"profiles\").doc(IncomingFriend).get().then((document) => {\r\n            if(document.data()) {\r\n              this.setState({\r\n                incomingFriends: [...this.state.incomingFriends, {displayName: document.data()!.displayName, uid: IncomingFriend, photo: document.data()!.photo}]\r\n              })\r\n            }\r\n          })\r\n        })\r\n    }\r\n    if(this.props.outgoingRequests !== prevProps.outgoingRequests) {\r\n      this.setState({\r\n        outgoingFriends: []\r\n      })\r\n      this.props.outgoingRequests.map(async OutgoingFriend => {\r\n        const document = await db.collection(\"profiles\").doc(OutgoingFriend).get();\r\n        if (document.data()) {\r\n          this.setState({\r\n            outgoingFriends: [...this.state.outgoingFriends, { displayName: document.data()!.displayName, uid: OutgoingFriend, photo: document.data()!.photo }]\r\n          });\r\n        }\r\n    })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <IonModal isOpen={this.props.isPendingRequestsModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar class='socialToolbar2'>\r\n            <IonButtons slot='start'>\r\n              <IonButton onClick={() => {this.props.togglePendingRequestsModal()}} id='addFriendModalCloseButton' fill='clear'>\r\n                <IonIcon id='addFriendModalCloseIcon' icon={closeCircleOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonTitle class=\"socialTitle2\">\r\n              Pending Requests\r\n            </IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n          <h2 id='incomingFriendRequestHeader'>Incoming Friend Requests</h2>\r\n          {this.state.incomingFriends.map(IncomingFriend =>\r\n            <IonItem key={IncomingFriend.uid}>\r\n              <IonLabel>{IncomingFriend.displayName}</IonLabel>\r\n              <IonButton onClick={() => {this.props.acceptFriend(IncomingFriend.uid)}} className='acceptButton' slot='end' fill='clear'>\r\n                <IonIcon className='addIcon' icon={addCircleOutline} />\r\n              </IonButton>\r\n              <IonButton onClick={() => {this.props.declineFriend(IncomingFriend.uid)}} className='denyButton' slot='end' fill='clear'>\r\n                <IonIcon className='denyIcon' icon={closeCircleOutline} />\r\n              </IonButton>\r\n            </IonItem>)}\r\n\r\n          <h2 id='outgoingFriendRequestHeader'>Outgoing Friend Requests</h2>\r\n          {this.state.outgoingFriends.map(OutgoingFriend =>\r\n            <IonItem key={OutgoingFriend.uid}>\r\n              <IonLabel>{OutgoingFriend.displayName}</IonLabel>\r\n              <IonButton onClick={() => {this.props.cancelOutgingRequest(OutgoingFriend.uid)}} className='denyButton' slot='end' fill='clear'>\r\n                <IonIcon className='denyIcon' icon={closeCircleOutline} />\r\n              </IonButton>\r\n            </IonItem>)}\r\n        </IonContent>\r\n      </IonModal>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default PendingRequests;\r\n","import React from 'react';\r\nimport {\r\n  IonModal,\r\n  IonContent,\r\n  IonHeader,\r\n  IonButtons,\r\n  IonButton,\r\n  IonToolbar,\r\n  IonIcon,\r\n  IonTitle,\r\n  IonAvatar,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonLabel,\r\n  IonItem,\r\n  IonInput,\r\n} from '@ionic/react'\r\n\r\nimport './FriendView.css'\r\n\r\nimport firebase, {db, auth} from '../firebase'\r\nimport Placeholder from '../images/placeholder.png'\r\nimport {\r\n  closeCircleOutline,\r\n  sendOutline,\r\n  personRemoveOutline\r\n} from 'ionicons/icons'\r\n\r\nimport Message from '../components/Message'\r\n\r\n\r\n\r\ntype MyState = {\r\n  friendViewPopoverEvent: any,\r\n  isFriendViewPopoverOpen: boolean,\r\n  isSettingsModalOpen: boolean,\r\n  isMembersModalOpen: boolean,\r\n  isFriendsListModalOpen: boolean,\r\n  messages: any[],\r\n  photoDictionary: any,\r\n  currentMessage: string,\r\n  nameDictionary: any\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n  friendDetails: Friend;\r\n  isFriendModalOpen: boolean;\r\n  toggleFriendModal: any;\r\n  removeFriend: (targetUserId: string) => void,\r\n}\r\n\r\n\r\ntype Friend = {\r\n  uuid: string;\r\n  uid: string;\r\n  displayName: string;\r\n  photo: string;\r\n}\r\n\r\n\r\n\r\nclass FriendView extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    friendViewPopoverEvent: undefined,\r\n    isFriendViewPopoverOpen: false,\r\n    isSettingsModalOpen: false,\r\n    isMembersModalOpen: false,\r\n    isFriendsListModalOpen: false,\r\n    messages: [],\r\n    photoDictionary: {},\r\n    currentMessage: '',\r\n    nameDictionary: {}\r\n  };\r\n  realtime_db = firebase.database();\r\n  anchorRef: React.RefObject<HTMLDivElement>;\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n    this.anchorRef = React.createRef()\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n  }\r\n\r\n  componentDidUpdate(prevProps: MyProps) {\r\n    if(prevProps.friendDetails.uid !== this.props.friendDetails.uid) {\r\n      this.setState({messages: []})\r\n      let photoDictionary : any = new Object()\r\n      photoDictionary[\"World-Watchlist\"] = \"https://firebasestorage.googleapis.com/v0/b/worldwatchlist.appspot.com/o/images%2Fearth.jpg?alt=media&token=8dfce470-5dac-4126-b3d2-4f3d42a07b8a\"\r\n      let nameDictionary : any = new Object()\r\n      nameDictionary[\"World-Watchlist\"] = \"World-Watchlist\"\r\n      if(auth.currentUser?.uid) {\r\n        db.collection('profiles').doc(auth.currentUser!.uid).get().then((document) => {\r\n          nameDictionary[auth.currentUser!.uid] = document.data()!.displayName\r\n          photoDictionary[auth.currentUser!.uid] = document.data()!.photo\r\n          photoDictionary[this.props.friendDetails.uid] = this.props.friendDetails.photo\r\n          nameDictionary[this.props.friendDetails.uid] = this.props.friendDetails.displayName\r\n          console.log(this.props.friendDetails.photo)\r\n        })\r\n      }\r\n      let messages : any[] = []\r\n      if(this.props.friendDetails.uuid !== '') {\r\n        this.realtime_db.ref(this.props.friendDetails.uuid).orderByKey().on('child_added', (snapshot: { val: () => any; key: any; }) => {\r\n          messages.push({...snapshot.val(), key: snapshot.key})\r\n          console.log({...snapshot.val(), key: snapshot.key})\r\n          this.setState({messages: messages})\r\n          this.anchorRef.current!.scrollIntoView();\r\n        })\r\n      }\r\n      this.setState({\r\n        photoDictionary: photoDictionary,\r\n        nameDictionary: nameDictionary\r\n      })\r\n    }\r\n  }\r\n\r\n  sendMessage() {\r\n    let timestamp = Date.now()\r\n    this.realtime_db.ref(this.props.friendDetails.uuid).child(timestamp.toString()).set({message: this.state.currentMessage, sender: auth.currentUser?.uid})\r\n    this.setState({\r\n      currentMessage: ''\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <IonPopover\r\n          cssClass='friendViewPopover'\r\n          event={this.state.friendViewPopoverEvent}\r\n          isOpen={this.state.isFriendViewPopoverOpen}\r\n          onDidDismiss={() => {this.setState({isFriendViewPopoverOpen: false, friendViewPopoverEvent: undefined})}}\r\n        >\r\n          <IonContent>\r\n            <IonList>\r\n              <IonListHeader id='friendViewPopoverListHeader'><b>Friend Options</b></IonListHeader>\r\n              <IonItem button={true} onClick={() => {this.props.removeFriend(this.props.friendDetails.uid)}}>\r\n                <IonLabel>Remove Friend</IonLabel>\r\n                <IonIcon className='friendViewPopoverIcon' slot='end' icon={personRemoveOutline}/>\r\n              </IonItem>\r\n            </IonList>\r\n          </IonContent>\r\n        </IonPopover>\r\n\r\n        <IonModal cssClass='modalScroll' swipeToClose={true} isOpen={this.props.isFriendModalOpen}>\r\n          <IonHeader>\r\n            <IonToolbar>\r\n              <IonButtons slot = 'start'>\r\n                <IonButton fill='clear' onClick={() => {this.props.toggleFriendModal()}}>\r\n                  <IonIcon className='friendViewIcon' icon={closeCircleOutline}/>\r\n                </IonButton>\r\n              </IonButtons>\r\n              <IonButtons slot='end'>\r\n\r\n              <IonAvatar onClick={(event : any) => {event.persist(); this.setState({isFriendViewPopoverOpen: true, friendViewPopoverEvent: event})}} className='friendViewProfilePicture'>\r\n                <img src = {this.props.friendDetails.photo !== \"\" && this.props.friendDetails.photo !== undefined ? this.props.friendDetails.photo : Placeholder}/>\r\n              </IonAvatar>\r\n\r\n\r\n              </IonButtons>\r\n\r\n              <IonTitle>{this.props.friendDetails ? this.props.friendDetails.displayName : undefined}</IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n\r\n\r\n          <IonContent className='friendViewMessageContainer' scrollY={true}>\r\n          <div className='messageContainerDiv'>\r\n            {this.state.messages.map((message) => {\r\n              return <Message key={message.key} sender={this.state.nameDictionary[message.sender]} content={message.message} photo={this.state.photoDictionary[message.sender]} />\r\n            })}\r\n            <div className='friendViewAnchor'  />\r\n            <div className='friendViewAnchor2' ref={this.anchorRef} />\r\n          </div>\r\n            <div className='friendViewMessageBox'>\r\n              <IonInput value={this.state.currentMessage} onIonChange={(e) => {this.setState({currentMessage: (e.target as HTMLInputElement).value})}} className='friendViewMessageInput' />\r\n              <IonButton onClick={() => {this.sendMessage()}} fill='clear' className='friendViewMessageButton'>\r\n                <IonIcon slot=\"icon-only\" className='friendViewMessageSend' icon={sendOutline} />\r\n              </IonButton>\r\n            </div>\r\n            <div className='bottomSpaceFiller' />\r\n          </IonContent>\r\n        </IonModal>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default FriendView;\r\n","import React from 'react';\r\nimport {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonContent,\r\n  IonTitle,\r\n  IonButtons,\r\n  IonButton,\r\n  IonIcon,\r\n  IonModal,\r\n  IonInput,\r\n  IonItem,\r\n  IonLabel,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonAvatar,\r\n  IonSegment,\r\n  IonSegmentButton\r\n} from '@ionic/react'\r\n\r\nimport GroupView from './GroupView'\r\nimport Placeholder from '../images/placeholder.png'\r\n\r\nimport firebase, {db, auth} from '../firebase'\r\nimport {\r\n  personAddOutline,\r\n  closeCircleOutline,\r\n  listOutline,\r\n  addOutline,\r\n  addCircleOutline,\r\n  sendOutline\r\n} from 'ionicons/icons'\r\n\r\nimport './Social.css'\r\nimport AddFriends from './AddFriends';\r\nimport PendingRequests from './PendingRequests';\r\nimport FriendView from './FriendView'\r\n\r\ntype MyState = {\r\n  isAddFriendModalOpen: boolean;\r\n  targetUsername: string;\r\n  friendsList: Friend[];\r\n  blockedUsers: [];\r\n  isPendingRequestsModalOpen: boolean;\r\n  isMessengerModalOpen: boolean;\r\n  incomingRequests: string[];\r\n  outgoingRequests: string[];\r\n  messageRef: string;\r\n  isSocialPopoverOpen: boolean;\r\n  socialPopoverEvent: any;\r\n  isCreateGroupModalOpen: boolean;\r\n  groupNickname: string;\r\n  groupArray: Group[];\r\n  numGroups: number;\r\n  unsubscribeGroupArray: any[];\r\n  groupDetails: Group;\r\n  isGroupModalOpen: boolean;\r\n  unsubscribeFriendsList: any;\r\n  unsubscribeBlockedUsers: any;\r\n  unsubscribeIncomingRequests: any;\r\n  unsubscribeOutgoingRequests: any;\r\n  segmentSelected: string | undefined;\r\n  unsubscribeIndiviudalFriends: any[];\r\n  activeMessages: any[];\r\n  isFriendModalOpen: boolean;\r\n  friendDetails: Friend\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n}\r\n\r\ntype Group = {\r\n  nickname: string;\r\n  members: string[];\r\n  id: string;\r\n  profilePicture: string;\r\n  owner: string;\r\n}\r\n\r\ntype Friend = {\r\n  uuid: string;\r\n  uid: string;\r\n  displayName: string;\r\n  photo: string;\r\n}\r\n\r\nclass Social extends React.Component<MyProps, MyState> {\r\n  realtime_db = firebase.database();\r\n  state: MyState = {\r\n    isAddFriendModalOpen: false,\r\n    targetUsername: '',\r\n    friendsList: [],\r\n    blockedUsers: [],\r\n    isPendingRequestsModalOpen: false,\r\n    isMessengerModalOpen: false,\r\n    incomingRequests: [],\r\n    outgoingRequests: [],\r\n    messageRef: '',\r\n    isSocialPopoverOpen: false,\r\n    socialPopoverEvent: undefined,\r\n    isCreateGroupModalOpen: false,\r\n    groupNickname: '',\r\n    groupArray: [],\r\n    numGroups: 0,\r\n    unsubscribeGroupArray: [],\r\n    groupDetails: {\r\n      nickname: '',\r\n      members: [],\r\n      id: '',\r\n      profilePicture: '',\r\n      owner: '',\r\n    },\r\n    friendDetails: {\r\n      uuid: '',\r\n      uid: '',\r\n      displayName: '',\r\n      photo: ''\r\n    },\r\n    isGroupModalOpen: false,\r\n    unsubscribeFriendsList: () => {},\r\n    unsubscribeBlockedUsers: null,\r\n    unsubscribeIncomingRequests: () => {},\r\n    unsubscribeOutgoingRequests: () => {},\r\n    unsubscribeIndiviudalFriends: [],\r\n    segmentSelected: 'groups',\r\n    activeMessages: [],\r\n    isFriendModalOpen: false\r\n  };\r\n\r\n\r\n  unsubscribeGroups: any;\r\n\r\n\r\n  constructor(props: MyProps) {\r\n    super(props)\r\n\r\n\r\n    //Begin Functin bindings\r\n\r\n    this.addFriend = this.addFriend.bind(this);\r\n    this.acceptFriend = this.acceptFriend.bind(this);\r\n    this.declineFriend = this.declineFriend.bind(this);\r\n    this.removeFriend = this.removeFriend.bind(this);\r\n    this.blockUser = this.blockUser.bind(this);\r\n    this.cancelOutgingRequest = this.cancelOutgingRequest.bind(this);\r\n    this.generateUniqueFriendId = this.generateUniqueFriendId.bind(this);\r\n    this.generateUniqueGroupId = this.generateUniqueGroupId.bind(this);\r\n    this.createGroup = this.createGroup.bind(this);\r\n    this.toggleGroupModal = this.toggleGroupModal.bind(this);\r\n    this.deleteGroup = this.deleteGroup.bind(this);\r\n    this.leaveGroup = this.leaveGroup.bind(this);\r\n    this.toggleGroupModal = this.toggleGroupModal.bind(this);\r\n    this.toggleAddFriendModal = this.toggleAddFriendModal.bind(this);\r\n    this.togglePendingRequestsModal = this.togglePendingRequestsModal.bind(this);\r\n    this.addFriendToGroup = this.addFriendToGroup.bind(this);\r\n    this.generateRandomString = this.generateRandomString.bind(this);\r\n    this.toggleFriendModal = this.toggleFriendModal.bind(this);\r\n    //End Function Bindings\r\n\r\n    //Begin firebase data subscriptins\r\n    auth.onAuthStateChanged(() => {\r\n      if(auth.currentUser) {\r\n        //gets the username of our user\r\n        db.collection(\"profiles\").doc(auth.currentUser.uid).get().then(doc => {\r\n          if(doc.data()) {\r\n            //creates a subscription to our user's friends list\r\n\r\n            let unsubscribeFriendsList = db.collection('friends').doc(auth.currentUser?.uid).onSnapshot((friendsListSnapshot) => {\r\n            let friends : Friend[] = []\r\n            friendsListSnapshot.data()!.friendsList.map((friend : string) => {\r\n              db.collection('profiles').doc(friend).onSnapshot((profileSnapshot) => {\r\n                db.collection('friends').doc(auth.currentUser?.uid).collection('uuids').doc(friend).get().then((uuidDoc) => {\r\n\r\n                  let stateFriendsList = this.state.friendsList\r\n                  let friendObj = {\r\n                    photo: profileSnapshot.data()?.photo,\r\n                    displayName: profileSnapshot.data()!.displayName,\r\n                    uuid: uuidDoc.data()!.uuid,\r\n                    uid: friend\r\n                  }\r\n                  let sentinel = true\r\n                  stateFriendsList.map((stateFriend, index) => {\r\n                    if(stateFriendsList[index].uid === friendObj.uid) {\r\n                      stateFriendsList[index] = friendObj\r\n                      sentinel = false\r\n                    }\r\n\r\n                  })\r\n                  if(sentinel) {\r\n                    stateFriendsList.push(friendObj)\r\n                  }\r\n                  this.setState({friendsList: stateFriendsList})\r\n                })\r\n              })\r\n            })\r\n          })\r\n\r\n            // create subscription to user's blocked users list\r\n            this.state.unsubscribeBlockedUsers = db.collection('blockedUsers').doc(auth.currentUser?.uid).onSnapshot((snapshot) => {\r\n              if(snapshot.exists && snapshot.data()!.blocked !== undefined) {\r\n                this.setState({blockedUsers: snapshot.data()!.blocked})\r\n              } else {\r\n                db.collection(\"blockedUsers\").doc(auth.currentUser?.uid).set({blocked: []})\r\n                this.setState({blockedUsers: []})\r\n              }\r\n            })\r\n\r\n            //creates a subscription to our user's incoming friend requests\r\n            let unsubscribeIncomingRequests = db.collection('incomingFriendRequests').doc(auth.currentUser?.uid).onSnapshot((snapshot) => {\r\n              if(snapshot.data()) {\r\n                console.log(snapshot.data()!.incomingFriendRequests)\r\n                this.setState({incomingRequests: snapshot.data()!.incomingFriendRequests})\r\n              }\r\n            })\r\n\r\n            //creates a subscription to our user's outgoing friend requests\r\n            let unsubscribeOutgoingRequests = db.collection('outgoingFriendRequests').doc(auth.currentUser!.uid).onSnapshot((snapshot) => {\r\n              if(snapshot.data()) {\r\n                console.log(snapshot.data()!.outgoingFriendRequests)\r\n                this.setState({outgoingRequests: snapshot.data()!.outgoingFriendRequests})\r\n              }\r\n            })\r\n\r\n            //crate a subscription to the list of a users groups\r\n            this.unsubscribeGroups = db.collection('profiles').doc(auth.currentUser?.uid).onSnapshot((snapshot) => {\r\n              if(snapshot.data()) {\r\n                this.setState({\r\n                  numGroups: snapshot.data()!.groups.length,\r\n                  groupArray: []\r\n                })\r\n                let unsubscribeGroupArray = []\r\n                for(let i = 0; i < this.state.numGroups; i++) {\r\n                  let unsubscribeIndividualGroup = db.collection('groups').doc(snapshot.data()!.groups[i]).onSnapshot((snapshot) => {\r\n                    let groupArray = [...this.state.groupArray]\r\n                    if(snapshot.data()) {\r\n                      let group : Group = {\r\n                        nickname: snapshot.data()!.nickname,\r\n                        members: snapshot.data()!.members,\r\n                        id: snapshot.data()!.id,\r\n                        profilePicture: snapshot.data()!.profilePicture,\r\n                        owner: snapshot.data()!.owner\r\n                      }\r\n                      groupArray[i] = group\r\n                      this.setState({groupArray: groupArray})\r\n                      if(this.state.groupDetails.id === group.id) {\r\n                        this.setState({groupDetails: group})\r\n                      }\r\n                      console.log(group)\r\n                    }\r\n                  })\r\n                  unsubscribeGroupArray.push(unsubscribeIndividualGroup)\r\n                }\r\n                this.setState({\r\n                  unsubscribeGroupArray: unsubscribeGroupArray\r\n                })\r\n              }\r\n\r\n            })\r\n\r\n            this.setState({\r\n              unsubscribeIncomingRequests: unsubscribeIncomingRequests,\r\n              unsubscribeOutgoingRequests: unsubscribeOutgoingRequests\r\n            })\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    //End firebase data subscriptins\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    //since we have subscriptions, we cancel them here to prevent a memory leak\r\n    this.state.unsubscribeFriendsList()\r\n    this.state.unsubscribeIncomingRequests()\r\n    this.state.unsubscribeOutgoingRequests()\r\n    for(let i = 0; i < this.state.unsubscribeGroupArray.length; i++) {\r\n      this.state.unsubscribeGroupArray[i]()\r\n    }\r\n  }\r\n\r\n  subscribeGroups() {\r\n\r\n  }\r\n\r\n\r\n  addFriend(email: string) { //sends a friend request to a user\r\n    if(email !== \"\" && email !== auth.currentUser?.email) {\r\n      db.collection('emails').doc(email).get().then(document => {\r\n        if(document.exists) {\r\n          db.collection('incomingFriendRequests').doc(document.data()!.userid).update({\r\n            incomingFriendRequests: firebase.firestore.FieldValue.arrayUnion(auth.currentUser?.uid)\r\n          })\r\n          db.collection('outgoingFriendRequests').doc(auth.currentUser?.uid).update({\r\n            outgoingFriendRequests: firebase.firestore.FieldValue.arrayUnion(document.data()!.userid)\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  cancelOutgingRequest(targetUserId: string) {\r\n    if(targetUserId !== \"\" && targetUserId !== auth.currentUser?.email) {\r\n      db.collection('incomingFriendRequests').doc(targetUserId).update({\r\n        incomingFriendRequests: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid)\r\n      })\r\n      db.collection('outgoingFriendRequests').doc(auth.currentUser?.uid).update({\r\n        outgoingFriendRequests: firebase.firestore.FieldValue.arrayRemove(targetUserId)\r\n      })\r\n    }\r\n  }\r\n\r\n  generateRandomString(length: number) {\r\n    var text = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_~';\r\n    for (var i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return text;\r\n  }\r\n\r\n  async generateUniqueFriendId() : Promise<string> {\r\n  let generateUniqueFriendIdPromise = new Promise<string>((resolve, reject) => {\r\n      let code = this.generateRandomString(50)\r\n      db.collection('friendIds').doc(code).get().then((doc) => {\r\n        if(!doc.exists) {\r\n          db.collection('friendIds').doc(code).set({\r\n            inUse: true\r\n          })\r\n          resolve(code)\r\n        } else {\r\n          if(!doc.data()?.inUse) {\r\n            db.collection('friendIds').doc(code).set({\r\n              inUse: true\r\n            })\r\n          } else {\r\n            this.generateUniqueFriendId()\r\n          }\r\n        }\r\n      })\r\n    })\r\n    return await generateUniqueFriendIdPromise\r\n  }\r\n\r\n  async generateUniqueGroupId() : Promise<string> {\r\n    let generateUniqueGroupIdPromise = new Promise<string>((resolve, reject) => {\r\n        let code = this.generateRandomString(50)\r\n        db.collection('groudIds').doc(code).get().then((doc) => {\r\n          if(!doc.exists) {\r\n            db.collection('groupIds').doc(code).set({\r\n              inUse: true\r\n            })\r\n            resolve(code)\r\n          } else {\r\n            if(!doc.data()?.inUse) {\r\n              db.collection('groupIds').doc(code).set({\r\n                inUse: true\r\n              })\r\n            } else {\r\n              this.generateUniqueGroupId()\r\n            }\r\n          }\r\n        })\r\n      })\r\n\r\n      return await generateUniqueGroupIdPromise\r\n  }\r\n\r\n  acceptFriend(targetUserId: string) {\r\n    //accepts a friend request from a user\r\n    //generates a friend UUID that can uniquely identify this friend pair\r\n    if(targetUserId != \"\") { //ensure we are not calling firebase path with empty string\r\n      this.generateUniqueFriendId().then((uniqueFriendId : string) => {\r\n        //remove incoming and outgoing friend requests\r\n        db.collection('outgoingFriendRequests').doc(targetUserId).update({\r\n          outgoingFriendRequests: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid),\r\n        })\r\n        db.collection('incomingFriendRequests').doc(auth.currentUser?.uid).update({\r\n          incomingFriendRequests: firebase.firestore.FieldValue.arrayRemove(targetUserId),\r\n        })\r\n        db.collection('friends').doc(auth.currentUser?.uid).update({\r\n          friendsList: firebase.firestore.FieldValue.arrayUnion(targetUserId)\r\n        })\r\n        db.collection('friends').doc(targetUserId).update({\r\n          friendsList: firebase.firestore.FieldValue.arrayUnion(auth.currentUser?.uid)\r\n        })\r\n        //set unique friend uuid pair for messaging\r\n        db.collection('friends').doc(auth.currentUser?.uid).collection('uuids').doc(targetUserId).set({\r\n          uuid: uniqueFriendId,\r\n          friend: targetUserId\r\n        })\r\n        db.collection('friends').doc(targetUserId).collection('uuids').doc(auth.currentUser?.uid).set({\r\n          uuid: uniqueFriendId,\r\n          friend: auth.currentUser?.uid\r\n        })\r\n        let timestamp = Date.now()\r\n        this.realtime_db.ref(uniqueFriendId).child(timestamp.toString()).set({message: 'Join the conversation! Send a message here to get started.', sender: 'World-Watchlist'})\r\n      })\r\n    }\r\n  }\r\n\r\n  declineFriend(targetUserId: string) { //declines a friend request from a user\r\n    if(targetUserId != \"\") {\r\n      db.collection('outgoingFriendRequests').doc(targetUserId).update({\r\n        outgoingFriendRequests: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid),\r\n      })\r\n      db.collection('incomingFriendRequests').doc(auth.currentUser?.uid).update({\r\n        incomingFriendRequests: firebase.firestore.FieldValue.arrayRemove(targetUserId),\r\n      })\r\n    }\r\n  }\r\n\r\n  removeFriend(targetUserId: string) { //removes a user from friend list\r\n    if(targetUserId != \"\") {\r\n      db.collection('friends').doc(auth.currentUser?.uid).collection('uuids').doc(targetUserId).get().then((document) => {\r\n        db.collection('friendIds').doc(document.data()!.uuid).update({\r\n          inUse: false\r\n        })\r\n        db.collection('friends').doc(auth.currentUser?.uid).collection('uuids').doc(targetUserId).delete()\r\n        db.collection('friends').doc(targetUserId).collection('uuids').doc(auth.currentUser?.uid).delete()\r\n        db.collection('friends').doc(auth.currentUser?.uid).update({\r\n          friendsList: firebase.firestore.FieldValue.arrayRemove(targetUserId)\r\n        })\r\n        db.collection('friends').doc(targetUserId).update({\r\n          friendsList: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid)\r\n        })\r\n        this.setState({isFriendModalOpen: false})\r\n      })\r\n    }\r\n  }\r\n\r\n  blockUser(userid: string) { // adds given friend to blocked list, users on blocked list are excluded from stuff\r\n    if(userid !== \"\") {\r\n      // assuming userid exists\r\n      // let chosenUser = db.collection('usernames').doc(username);\r\n      // let chosenUser = db.collection('email').doc(userid).get().then(docData => {\r\n      //   if (docData.exists)\r\n      //     return docData.data()?.userid}).catch(catchData => console.log(\"Data crash!\"));\r\n      // if( chosenUser === undefined)\r\n      //   return;\r\n      console.log(\"User exists, attempting to block\");\r\n      db.collection('blockedUsers').doc(auth.currentUser?.uid).update({blocked: firebase.firestore.FieldValue.arrayUnion(userid)});\r\n      console.log(\"User should be added to blocked list\");\r\n      /*if ( this.isFriend(username))\r\n       *  this.removeFriend(username); // remove user once added to blocked list, line included for future possibility\r\n       */\r\n    }\r\n  }\r\n\r\n  exists(username: string) {\r\n    return username !== \"\" //&& db.collection('usernames').doc(username) !== undefined\r\n  }\r\n\r\n  createGroup() {\r\n    this.generateUniqueGroupId().then((code) => {\r\n      db.collection('groups').doc(code).set({\r\n        owner: auth.currentUser?.uid,\r\n        members: [auth.currentUser?.uid],\r\n        nickname: this.state.groupNickname,\r\n        id: code,\r\n        profilePicture: ''\r\n      })\r\n      db.collection('profiles').doc(auth.currentUser?.uid).update({\r\n        groups: firebase.firestore.FieldValue. arrayUnion(code),\r\n      })\r\n      let timestamp = Date.now()\r\n      this.realtime_db.ref(code).child(timestamp.toString()).set({message: 'Join the conversation! Send a message here to get started.', sender: 'World-Watchlist'})\r\n    })\r\n\r\n  }\r\n\r\n  leaveGroup() {\r\n    //function is intended to be called from the groupView page\r\n    //1 remove our user from the group collection\r\n    //2 remove the group from the user collection\r\n\r\n    //1\r\n    if(auth.currentUser?.uid !== this.state.groupDetails.owner) {\r\n      //user is not the owner of the group, can simply leave.\r\n      db.collection('groups').doc(this.state.groupDetails.id).update({\r\n        members: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid)\r\n      })\r\n\r\n    } else {\r\n      //user is the host of the group\r\n      if(this.state.groupDetails.members.length === 1) {\r\n        //user is the only member in the group. delete the group.\r\n        this.deleteGroup()\r\n      } else {\r\n        //user is the host but there are other members in the group. user is not deleting the group.\r\n        if(this.state.groupDetails.members[0] !== auth.currentUser?.uid) {\r\n            db.collection('groups').doc(this.state.groupDetails.id).update({\r\n              owner: this.state.groupDetails.members[0],\r\n              members: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid)\r\n\r\n            })\r\n        } else {\r\n          db.collection('groups').doc(this.state.groupDetails.id).update({\r\n            owner: this.state.groupDetails.members[1],\r\n            members: firebase.firestore.FieldValue.arrayRemove(auth.currentUser?.uid)\r\n          })\r\n        }\r\n      }\r\n    }\r\n    //2\r\n    db.collection('profiles').doc(auth.currentUser?.uid).update({\r\n      groups: firebase.firestore.FieldValue.arrayRemove(this.state.groupDetails.id)\r\n    })\r\n    this.setState({isGroupModalOpen: false})\r\n  }\r\n\r\n  deleteGroup() {\r\n    //delete a group\r\n    //intended to be used from the groupView page\r\n    if(auth.currentUser?.uid === this.state.groupDetails.owner) {\r\n      this.state.groupDetails.members.forEach((member) => {\r\n        db.collection('profiles').doc(member).update({\r\n          groups: firebase.firestore.FieldValue.arrayRemove(this.state.groupDetails.id)\r\n        })\r\n        db.collection('groups').doc(this.state.groupDetails.id).delete()\r\n      })\r\n      this.setState({\r\n        isGroupModalOpen: false\r\n      })\r\n    } else {\r\n      console.log('User should not be able to use this function')\r\n    }\r\n\r\n  }\r\n\r\n  addFriendToGroup(targetUid: string, group: string) {\r\n    db.collection('profiles').doc(targetUid).update({\r\n      groups: firebase.firestore.FieldValue.arrayUnion(group)\r\n    })\r\n    db.collection('groups').doc(group).update({\r\n      members: firebase.firestore.FieldValue.arrayUnion(targetUid)\r\n    })\r\n  }\r\n\r\n  toggleGroupModal() {\r\n    this.setState({isGroupModalOpen: !this.state.isGroupModalOpen})\r\n  }\r\n  toggleAddFriendModal() {\r\n    this.setState({isAddFriendModalOpen: !this.state.isAddFriendModalOpen})\r\n  }\r\n  togglePendingRequestsModal() {\r\n    this.setState({isPendingRequestsModalOpen: !this.state.isPendingRequestsModalOpen})\r\n  }\r\n  toggleFriendModal() {\r\n    this.setState({isFriendModalOpen: !this.state.isFriendModalOpen})\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    render() {\r\n\r\n      let groupState = \"group\";\r\n      return (\r\n      <IonPage>\r\n        <AddFriends\r\n          {...this.props}\r\n          isAddFriendModalOpen={this.state.isAddFriendModalOpen}\r\n          toggleAddFriendModal={this.toggleAddFriendModal}\r\n          addFriend={this.addFriend}\r\n        />\r\n\r\n        <PendingRequests\r\n          {...this.props}\r\n          incomingRequests = {this.state.incomingRequests}\r\n          outgoingRequests = {this.state.outgoingRequests}\r\n          acceptFriend = {this.acceptFriend}\r\n          declineFriend = {this.declineFriend}\r\n          cancelOutgingRequest = {this.cancelOutgingRequest}\r\n          isPendingRequestsModalOpen = {this.state.isPendingRequestsModalOpen}\r\n          togglePendingRequestsModal = {this.togglePendingRequestsModal}\r\n\r\n        />\r\n\r\n        <GroupView\r\n          isGroupModalOpen={this.state.isGroupModalOpen}\r\n          groupDetails={this.state.groupDetails}\r\n          {...this.props}\r\n          toggleGroupModal={this.toggleGroupModal}\r\n          leaveGroup={this.leaveGroup}\r\n          deleteGroup={this.deleteGroup}\r\n          friendList={this.state.friendsList}\r\n          addFriendToGroup={this.addFriendToGroup}\r\n        />\r\n\r\n        <FriendView\r\n          {...this.props}\r\n          friendDetails = {this.state.friendDetails}\r\n          isFriendModalOpen = {this.state.isFriendModalOpen}\r\n          toggleFriendModal = {this.toggleFriendModal}\r\n          removeFriend = {this.removeFriend}\r\n        />\r\n\r\n        <IonPopover\r\n          cssClass='socialPopover'\r\n          event={this.state.socialPopoverEvent}\r\n          isOpen={this.state.isSocialPopoverOpen}\r\n          onDidDismiss={() => {this.setState({isSocialPopoverOpen: false, socialPopoverEvent: undefined})}}\r\n        >\r\n          <IonContent>\r\n            <IonList>\r\n              <IonListHeader id='socialPopoverListHeader'><b>Social Options</b></IonListHeader>\r\n              <IonItem button={true} onClick={() => {this.setState({isSocialPopoverOpen: false, isAddFriendModalOpen: true})}}><IonLabel>Add Friend</IonLabel><IonIcon className='socialPopoverIcon' slot='end' icon={personAddOutline}/></IonItem>\r\n              <IonItem button={true}  onClick={() => {this.setState({isSocialPopoverOpen: false, isCreateGroupModalOpen: true})}}><IonLabel>Create Group</IonLabel><IonIcon className='socialPopoverIcon' slot='end' icon={addCircleOutline}/></IonItem>\r\n              <IonItem button={true}><IonLabel>New Message</IonLabel><IonIcon className='socialPopoverIcon' slot='end' icon={sendOutline}/></IonItem>\r\n            </IonList>\r\n          </IonContent>\r\n        </IonPopover>\r\n\r\n        <IonModal isOpen={this.state.isCreateGroupModalOpen}>\r\n          <IonHeader>\r\n            <IonToolbar class='socialToolbar2'>\r\n            <IonButtons slot='start'>\r\n              <IonButton onClick={() => {this.setState({isCreateGroupModalOpen: false})}} fill='clear'>\r\n                <IonIcon id='closeCreateGroupModalIcon' icon={closeCircleOutline} />\r\n              </IonButton>\r\n            </IonButtons>\r\n              <IonTitle class='socialTitle2'>Create Group</IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n          <IonContent>\r\n            <IonInput className='createGroupInput' placeholder='Group Nickname' onIonChange={(e) => {this.setState({groupNickname: (e.target as HTMLInputElement).value})}}/>\r\n            <IonButton onClick={() => {this.createGroup(); this.setState({isCreateGroupModalOpen: false})}} id='createGroupButton'>Create</IonButton>\r\n          </IonContent>\r\n        </IonModal>\r\n\r\n        <IonHeader>\r\n          <IonToolbar class='socialToolbar'>\r\n            <IonTitle class='socialTitle'>\r\n              Social\r\n            </IonTitle>\r\n            <IonButtons slot=\"start\">\r\n              <IonButton class='socialHeaderButton' onClick={() => {this.setState({isPendingRequestsModalOpen: true})}}  fill='clear'>\r\n                <IonIcon icon={listOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonButtons slot='end'>\r\n              <IonButton class='socialHeaderButton' onClick={(event : any) => {event.persist(); this.setState({isSocialPopoverOpen: true, socialPopoverEvent: event})}} fill='clear'>\r\n                <IonIcon icon={addOutline} />\r\n              </IonButton>\r\n            </IonButtons>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        <IonSegment onIonChange={e => this.setState({segmentSelected: e.detail.value})} value={this.state.segmentSelected}>\r\n          <IonSegmentButton value='groups'>\r\n            <IonLabel>Groups</IonLabel>\r\n          </IonSegmentButton>\r\n          <IonSegmentButton value='friends'>\r\n            <IonLabel>Friends</IonLabel>\r\n          </IonSegmentButton>\r\n        </IonSegment>\r\n        {\r\n          this.state.segmentSelected === 'groups' ?\r\n          <div>{\r\n            this.state.groupArray.map((displayGroup : Group) => {\r\n              return (\r\n                <IonItem onClick={() => {this.setState({groupDetails: displayGroup, isGroupModalOpen: true})}} lines='none' button={true} className='socialGroupItem' key={displayGroup.id}>\r\n                  <IonAvatar slot='start' className='socialGroupAvatar'>\r\n                    <img src = {displayGroup.profilePicture ? displayGroup.profilePicture : Placeholder}/>\r\n                  </IonAvatar>\r\n                  <IonLabel className='socialGroupLabel'>\r\n                    {displayGroup.nickname}\r\n                  </IonLabel>\r\n\r\n                </IonItem>\r\n              )\r\n            })\r\n          }\r\n        </div> :\r\n        <div>\r\n        {this.state.friendsList.map((friend: Friend) => {\r\n          return (\r\n            <IonItem onClick={() => {this.setState({friendDetails: friend, isFriendModalOpen: true})}} lines='none' button={true} className='socialGroupItem' key={friend.uid}>\r\n              <IonAvatar slot='start' className='socialGroupAvatar'>\r\n                <img src = {friend.photo ? friend.photo : Placeholder}/>\r\n              </IonAvatar>\r\n              <IonLabel className='socialGroupLabel'>\r\n                {friend.displayName}\r\n              </IonLabel>\r\n\r\n            </IonItem>\r\n            )\r\n          })\r\n      }\r\n        </div>\r\n      }\r\n\r\n\r\n        </IonContent>\r\n      </IonPage>\r\n      )\r\n    }\r\n\r\n}\r\n\r\nexport default Social\r\n","// (Mostly) Clay Mallory\r\n// File input code borrowed from https://medium.com/front-end-weekly/file-input-with-react-js-and-typescript-64dcea4b0a86.\r\nimport React, { useState } from 'react';\r\nimport { IonReactRouter } from '@ionic/react-router';\r\nimport { PushNotification, PushNotificationToken, PushNotificationActionPerformed, Capacitor, Plugins, CameraResultType, FilesystemDirectory} from '@capacitor/core';\r\n\r\nimport {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonContent,\r\n  IonTitle,\r\n  IonButton,\r\n  IonButtons,\r\n  IonItem,\r\n  IonLabel,\r\n  IonToggle,\r\n  IonIcon,\r\n  IonModal,\r\n  IonInput,\r\n  IonAvatar,\r\n  IonChip,\r\n  IonAlert\r\n\r\n} from '@ionic/react'\r\nimport firebase, {db, auth} from '../firebase'\r\nimport {addCircleOutline, closeCircleOutline, newspaperOutline, exitOutline, mailOutline, arrowBackOutline, arrowForwardOutline, personCircleOutline, cloudUploadOutline} from 'ionicons/icons'\r\nimport './Settings.css'\r\n const { PushNotifications } = Plugins;\r\n const { Toast } = Plugins;\r\n const isPushAvailable = Capacitor.isPluginAvailable(\"PushNotifications\");\r\n const { FCMPlugin } = Plugins;\r\n\r\n\r\n\r\ntype MyState = {\r\n  isBlockSourceModalOpen:boolean;\r\n  isAccountSettingsModalOpen:boolean;\r\n  isChangePasswordModalOpen:boolean;\r\n  isChangeUsernameModalOpen:boolean;\r\n  isSignOutModalOpen:boolean;\r\n  signOutAlert:boolean;\r\n  blockedSources:string[];\r\n  topics:[];\r\n  currentUserName:string;\r\n  sourceToBlock:string;\r\n  sourceToUnBlock:string;\r\n  localList:string[];\r\n  newPassword:string;\r\n  newUsername:string;\r\n  notifications: [{}];\r\n  isSubbed:boolean;\r\n\r\n\r\n}\r\n\r\ntype MyProps = {\r\n  history: any;\r\n  location: any;\r\n}\r\n\r\nclass Settings extends React.Component<MyProps, MyState> {\r\n\r\n  state: MyState = {\r\n    isBlockSourceModalOpen: false,\r\n    isAccountSettingsModalOpen:false,\r\n    isChangePasswordModalOpen: false,\r\n    signOutAlert:false,\r\n    isChangeUsernameModalOpen: false,\r\n    isSignOutModalOpen: false,\r\n    blockedSources: [],\r\n    topics:[],\r\n    currentUserName :'',\r\n    sourceToBlock:\"\",\r\n    sourceToUnBlock:\"\",\r\n    localList: [],\r\n    isSubbed:false,\r\n    newPassword:'',\r\n    newUsername:'',\r\n    notifications:[{ id: 'id', title: 'Test Push', body: \"This is my first push notification\" }]\r\n\r\n\r\n  };\r\n\r\n\r\n  constructor(props: MyProps) {\r\n    super(props);\r\n    console.log(\"Here\" + this.state.currentUserName);\r\n    this.handleChange = this.handleChange.bind(this);\r\n     //this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.blockSource = this.blockSource.bind(this);\r\n\r\n        if(auth.currentUser) { // gets the name of the current user\r\n          db.collection(\"profiles\").doc(auth.currentUser.uid).get().then(doc => {\r\n            if(doc.data()) {\r\n              this.setState({currentUserName: doc.data()!.displayName})\r\n              this.setState({currentUserName: doc.data()!.isSubbed})\r\n\r\n              var temp= db.collection('profiles').doc(firebase.auth().currentUser!.uid).onSnapshot((snapshot) => { //blockedSources not in firebase?\r\n                if(snapshot.data()) {\r\n                 //this.setState({blockedSources: snapshot.data()!.blockedSources})\r\n               //  this.setState({topics: snapshot.data()!.subList})\r\n                // this.setState({currentUserName: snapshot.data()!.displayName})\r\n                }\r\n              })\r\n            \r\n            }\r\n          })\r\n\r\n        }\r\n        else\r\n          this.props.history.push(\"/landing\")\r\n\r\n       this.pullImage();\r\n       console.log(\"I'm here \" + this.state.currentUserName);\r\n  }\r\n\r\n\r\n\r\n  async show() {\r\n  await Toast.show({\r\n    text: 'Hello!'\r\n  });\r\n}\r\n\r\n  push() { // This code is borrowed from https://enappd.com/blog/firebase-push-notification-in-ionic-react-capacitor/111/\r\n    \r\n    PushNotifications.register();\r\n    var temp = this.state.topics;\r\n    for(var i = 0; i < temp.length; i++) {\r\n      PushNotifications.register().then(()=> {\r\n        console.log(\"subscribed to\" + temp[i]);\r\n        FCMPlugin.subscribeTo({topic:temp[i]})\r\n      }).catch((err)=>console.log(err));\r\n  }\r\n\r\n    // On succcess, we should be able to receive notifications\r\n    PushNotifications.addListener('registration',\r\n      (token: PushNotificationToken) => {\r\n        alert('Push registration success, token: ' + token.value);\r\n      }\r\n    );\r\n\r\n    // Some issue with your setup and push will not work\r\n    PushNotifications.addListener('registrationError',\r\n      (error: any) => {\r\n        alert('Error on registration: ' + JSON.stringify(error));\r\n      }\r\n    );\r\n\r\n    // Show us the notification payload if the app is open on our device\r\n    PushNotifications.addListener('pushNotificationReceived',\r\n      (notification: PushNotification) => {\r\n        let notif = this.state.notifications;\r\n        notif.push({ id: notification.id, title: notification.title, body: notification.body })\r\n        this.setState({\r\n          notifications: notif\r\n        })\r\n      }\r\n    );\r\n\r\n    // Method called when tapping on a notification\r\n    PushNotifications.addListener('pushNotificationActionPerformed',\r\n      (notification: PushNotificationActionPerformed) => {\r\n        let notif = this.state.notifications;\r\n        notif.push({ id: notification.notification.data.id, title: notification.notification.data.title, body: notification.notification.data.body })\r\n        this.setState({\r\n          notifications: notif\r\n        })\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n\r\n  async handleChange(selectorFiles: FileList)\r\n    {\r\n      if(selectorFiles!=null) {\r\n        console.log(selectorFiles);\r\n        var storage = firebase.storage();\r\n        var storageRef = firebase.storage().ref();\r\n        var file = selectorFiles[0];\r\n        var uid = firebase.auth().currentUser!.uid;\r\n        var newPicRef = storageRef.child('profileImages/' + uid+ '.jpg');\r\n\r\n        newPicRef.put(file);\r\n        await new Promise(r => setTimeout(r, 1000));\r\n        newPicRef.getDownloadURL().then((url) => {\r\n          db.collection('profiles').doc(auth.currentUser?.uid).update({\r\n            photo: url\r\n          })\r\n        })\r\n\r\n        this.pullImage();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  blockSource(sourceName:string) {\r\n\r\n    if(sourceName!=\"\" && sourceName.length > 3) { //makes sure the source is a valid site and isn't blank\r\n      if(!this.state.localList.includes(sourceName))\r\n        this.state.localList.push(sourceName);\r\n      this.addToList(sourceName);\r\n      this.state.blockedSources.push(sourceName);\r\n      console.log(this.state.blockedSources);\r\n      db.collection('usernames').doc(this.state.currentUserName).get().then(document => {\r\n      if(document.exists && this.isValidSite(sourceName)) {\r\n        db.collection('usernames').doc(this.state.currentUserName).update({\r\n        blockedSources : firebase.firestore.FieldValue.arrayUnion(sourceName)\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nunBlockSource(sourceName:string) {\r\n  if(sourceName!=\"\" ) { //makes sure the source is a valid site and isn't blank\r\n    db.collection('usernames').doc(this.state.currentUserName).get().then(document => {\r\n    if(document.exists) {\r\n      db.collection('usernames').doc(this.state.currentUserName).update({\r\n        blockedSources: firebase.firestore.FieldValue.arrayRemove(sourceName)\r\n      })\r\n    }\r\n  })\r\n}\r\n}\r\n\r\npopulate() {\r\nvar temp = this.state.blockedSources;\r\nfor (var i = temp.length - 1; i >= 0; i--) {\r\n  this.addToList(temp[i]);\r\n}\r\n\r\n}\r\n\r\nisEmailAddress(anEmail: string) {\r\n  return anEmail !== \"\" && anEmail.includes(\"@\");\r\n}\r\n\r\nchangeEmail(newEmail: string) {\r\n  if(auth.currentUser && this.isEmailAddress(newEmail)) {\r\n    auth.currentUser.updateEmail(newEmail).then(function() {\r\n\r\n  }).catch(function(error){\r\n\r\n  })\r\n}\r\n}\r\n\r\nsignOutUser() {\r\n  if (auth.currentUser) {\r\n    auth.signOut()\r\n    this.props.history.push(\"/landing\")\r\n  }\r\n  const alert = document.createElement('IonAlert');\r\n\r\n}\r\n\r\nchangePassword(password:string) {\r\n  if(auth.currentUser) {\r\n    auth.currentUser.updatePassword(password).then(function() {\r\n\r\n\r\n  }).catch(function(error){\r\n\r\n\r\n  })\r\n}\r\n}\r\n\r\nnotify() {\r\n  if(isPushAvailable&&this.state.isSubbed) \r\n    this.push();\r\n  else if(!this.state.isSubbed) {\r\n\r\n  }\r\ndb.collection('profiles').doc(firebase.auth().currentUser!.uid).update({\r\n          notifications:this.state.isSubbed,\r\n         \r\n        })\r\n\r\n    \r\n}\r\n\r\n/*changeEmail(email:string) {\r\n  if(this.state.currentUserName!=undefined&& email.length > 3) { //makes sure the source is a valid site and isn't blank\r\n    db.collection('usernames').doc(this.state.currentUserName).get().then(document => { //works for one specific user currently\r\n    if(document.exists) {\r\n      db.collection('usernames').doc(this.state.currentUserName).update({\r\n        \"email.firebase\" : email\r\n      })\r\n\r\n    }\r\n  })\r\n}\r\n  }*/\r\n\r\n  changeUsername(newName:string) {\r\n    if(this.state.currentUserName!=undefined&& newName.length > 3) { //makes sure the source is a valid site and isn't blank\r\n      db.collection('profiles').doc(firebase.auth().currentUser!.uid).get().then(document => { //works for one specific user currently\r\n      if(document.exists) {\r\n        db.collection('profiles').doc(firebase.auth().currentUser!.uid).update({\r\n          displayName:newName,\r\n         \r\n\r\n        })\r\n        this.setState({currentUserName : newName});\r\n\r\n      }\r\n    })\r\n  }\r\n\r\n    }\r\n\r\n\r\n\r\n    pullImage(){\r\n      if(auth.currentUser) {\r\n      var storage = firebase.storage();\r\n      var storageRef = firebase.storage().ref();\r\n      var pathReference;\r\n      var pathName = 'profileImages/' +firebase.auth().currentUser!.uid+'.jpg';\r\n      pathReference = storageRef.child(pathName);\r\n\r\n        pathReference.getDownloadURL().then((url)=> {\r\n         var img = document.getElementById('myimg');\r\n         if(img!=null)\r\n          img.setAttribute('src', url);\r\n\r\n      })\r\n      .catch((error) => {\r\n  // A full list of error codes is available at\r\n  // https://firebase.google.com/docs/storage/web/handle-errors\r\n  switch (error.code) {\r\n    case 'storage/object-not-found':\r\n    firebase.storage().ref().child('placeholder.png').getDownloadURL().then((url)=> {\r\n         var img = document.getElementById('myimg');\r\n         if(img!=null)\r\n          img.setAttribute('src', url);\r\n      })\r\n\r\n      break;\r\n    case 'storage/unauthorized':\r\n      // User doesn't have permission to access the object\r\n      break;\r\n    case 'storage/canceled':\r\n      // User canceled the upload\r\n      break;\r\n    case 'storage/unknown':\r\n      // Unknown error occurred, inspect the server response\r\n      break;\r\n  }\r\n});\r\n\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n   uploadImage() {\r\n    var y = React.createRef();\r\n      var storage = firebase.storage();\r\n      var storageRef = firebase.storage().ref();\r\n      var newPicRef = storageRef.child('images/new.jpg');\r\n      var file = document.getElementById('image');\r\n      if(file!=null) {\r\n      file.addEventListener('change', function(evt) {\r\n        if(evt.target!=null) {\r\n      }\r\n  })\r\n  }\r\n    }\r\n\r\n\r\naddToList(name:string) {\r\n  if(!this.state.localList.includes(name)) {\r\n  var list = document.getElementById(\"blockedList\");\r\n  var entry = document.createElement(\"li\");\r\n  entry.setAttribute(\"id\", name);\r\n  entry.appendChild(document.createTextNode(name));\r\n  if(list!=null)\r\n  list.appendChild(entry);\r\n  console.log(list);\r\n}\r\n\r\n}\r\n\r\nisValidSite(siteName:string) {\r\n  if(siteName!='' && siteName.length>4) {\r\n    if(siteName.substring(siteName.length-4, siteName.length-3)=='.') {\r\n      var domainType = siteName.substring(siteName.length-3);\r\n      if(domainType == 'com'|| domainType=='org'||domainType == 'net')\r\n      return true;\r\n    }\r\n    }\r\n    return false;\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n      const { notifications } = this.state;\r\n      return (\r\n      <IonPage>\r\n      <IonModal isOpen={this.state.isBlockSourceModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar class='settingsToolbar2'>\r\n            <IonButtons>\r\n              <IonButton onClick={() => {this.populate();this.setState({isBlockSourceModalOpen: false})}} id='toBlock' fill='clear'>\r\n              <IonIcon id='closeBlockIcon' icon={arrowBackOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n            <IonTitle class='settingsTitle2'>\r\n              Block a Source\r\n\r\n            </IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n        <IonItem lines='none' id='block'>\r\n          <IonInput class='addSource' onIonChange={(e) => {this.setState({sourceToBlock: (e.target as HTMLInputElement).value})}} />\r\n          <IonButton onClick={() => {this.blockSource(this.state.sourceToBlock)}}  fill='clear'>\r\n            <IonIcon id='addBlockIcon' icon={addCircleOutline} />\r\n          </IonButton>\r\n        </IonItem>\r\n        <br/>\r\n        <IonTitle id ='unblockText'>\r\n        Unblock a Source\r\n        </IonTitle>\r\n        <br/>\r\n        <br/>\r\n        <IonItem lines='none' id='block'>\r\n          <IonInput class='addSource' onIonChange={(e) => {this.setState({sourceToUnBlock: (e.target as HTMLInputElement).value})}} />\r\n          <IonButton onClick={() => {this.unBlockSource(this.state.sourceToUnBlock)}}  fill='clear'>\r\n            <IonIcon id='addBlockIcon' icon={addCircleOutline} />\r\n          </IonButton>\r\n        </IonItem>\r\n        <br/>\r\n        <IonHeader id = 'blockedSourcesHeader'>You Won't See Content From:</IonHeader>\r\n        <br/>\r\n\r\n        <ul id = \"blockedList\"></ul>\r\n          {\r\n            this.state.blockedSources.map(Blocked =>\r\n              <IonItem key = {Blocked.toString()}>\r\n              <IonItem class = 'blockedListEntry'>{Blocked.toString()}</IonItem>\r\n              </IonItem>\r\n            )}\r\n        </IonContent>\r\n      </IonModal>\r\n\r\n\r\n\r\n      <IonModal isOpen={this.state.isChangePasswordModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar class='settingsToolbar2'>\r\n            <IonButtons>\r\n              <IonButton onClick={() => {this.setState({isChangePasswordModalOpen: false})}} id='toBlock' fill='clear'>\r\n              <IonIcon id='closeBlockIcon' icon={arrowBackOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n\r\n            <IonTitle class='settingsTitle2'>\r\n              Change Password\r\n\r\n            </IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n        <IonContent>\r\n        <IonItem lines='none' id='block'>\r\n          <IonInput class = 'addSource' onIonChange={(e) => {this.setState({newPassword: (e.target as HTMLInputElement).value})}} />\r\n          <IonButton onClick={() => {this.changePassword(this.state.newPassword)}}  fill='clear' placeholder='Enter new password'>\r\n            <IonIcon id='addBlockIcon' icon={arrowForwardOutline} />\r\n          </IonButton>\r\n        </IonItem>\r\n        </IonContent>\r\n      </IonModal>\r\n\r\n      <IonModal isOpen={this.state.isChangeUsernameModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar class='settingsToolbar2'>\r\n            <IonButtons>\r\n              <IonButton onClick={() => {this.setState({isChangeUsernameModalOpen: false})}} id='toBlock' fill='clear'>\r\n              <IonIcon id='closeBlockIcon' icon={arrowBackOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n\r\n            <IonTitle class='settingsTitle2'>\r\n              Change Username\r\n\r\n            </IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n        <IonContent>\r\n        <IonItem lines='none' id='block'>\r\n          <IonInput class = 'addSource' onIonChange={(e) => {this.setState({newUsername: (e.target as HTMLInputElement).value})}} />\r\n          <IonButton onClick={() => {this.changeUsername(this.state.newUsername)}}  fill='clear'>\r\n            <IonIcon id='addBlockIcon' icon={arrowForwardOutline} />\r\n          </IonButton>\r\n        </IonItem>\r\n        </IonContent>\r\n\r\n      </IonModal>\r\n      <IonModal isOpen={this.state.isAccountSettingsModalOpen}>\r\n        <IonHeader>\r\n          <IonToolbar class='settingsToolbar2'>\r\n            <IonButtons>\r\n              <IonButton onClick={() => {this.setState({isAccountSettingsModalOpen: false})}} id='toBlock' fill='clear'>\r\n              <IonIcon id='closeBlockIcon' icon={arrowBackOutline}/>\r\n              </IonButton>\r\n            </IonButtons>\r\n\r\n            <IonTitle class='settingsTitle2'>\r\n              Account Settings\r\n            </IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n        <IonContent>\r\n        <IonItem id ='changeUsername'>\r\n\r\n            Sign Out\r\n          <IonButtons slot='end'>\r\n            <IonButton onClick={() => {this.setState({signOutAlert:true})}} fill='clear'>\r\n              <IonIcon id = 'userNameChangeButton' icon={exitOutline}/>\r\n              </IonButton>\r\n              <IonAlert\r\n          isOpen= {this.state.signOutAlert}\r\n          onDidDismiss={() => this.setState({signOutAlert:false})}\r\n          \r\n          header={'Are you sure you want to sign out?'}\r\n         \r\n          \r\n          buttons={[\r\n            {\r\n              text: 'No',\r\n              role: 'cancel',\r\n              cssClass: 'secondary',\r\n              handler: blah => {\r\n                console.log('Confirm Cancel: blah');\r\n              }\r\n            },\r\n            {\r\n              text: 'Yes',\r\n              handler: () => {\r\n                {this.signOutUser();\r\n                  this.setState({isAccountSettingsModalOpen:false})\r\n\r\n                };\r\n              }\r\n            }\r\n          ]}\r\n        />\r\n              </IonButtons>\r\n              </IonItem>\r\n        \r\n          \r\n        <IonItem id ='changeUsername'>\r\n            Change Display Name\r\n          <IonButtons slot='end'>\r\n            <IonButton onClick={() => {this.setState({isChangeUsernameModalOpen: true})}} fill='clear'>\r\n\r\n              <IonIcon id = 'userNameChangeButton' icon={personCircleOutline}/>\r\n              </IonButton>\r\n              </IonButtons>\r\n              </IonItem>\r\n\r\n               <IonItem id ='updateEmail'>\r\n          Change Password\r\n        <IonButtons slot='end'>\r\n          <IonButton onClick={() => {this.setState({isChangePasswordModalOpen: true})}} fill='clear'>\r\n\r\n            <IonIcon id = 'emailChangeButton' icon={mailOutline}/>\r\n          </IonButton>\r\n          </IonButtons>\r\n          </IonItem>\r\n\r\n        </IonContent>\r\n      </IonModal>\r\n        <IonHeader>\r\n          <IonToolbar class='settingsToolbar'>\r\n            <IonTitle class='settingsTitle'>\r\n              Settings\r\n            </IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonItem>\r\n        <IonAvatar>\r\n          <img id = 'myimg' />\r\n        </IonAvatar>\r\n        {this.state.currentUserName}\r\n        {console.log(\"testname \" + this.state.currentUserName)}\r\n        </IonItem>\r\n        <IonItem>\r\n            <IonLabel>Notifications</IonLabel>\r\n            <IonToggle checked = {this.state.isSubbed} onClick={(()=> {this.state.isSubbed = !this.state.isSubbed; this.notify()})} value=\"Notifications\" />\r\n          </IonItem>\r\n\r\n        <IonContent>\r\n        <IonItem>\r\n        Content Filter\r\n        <IonButtons slot='end'>\r\n          <IonButton onClick={() => {this.setState({isBlockSourceModalOpen: true})}} fill='clear'>\r\n            <IonIcon id = 'contentFilterButton' icon={newspaperOutline} />\r\n          </IonButton>\r\n        </IonButtons>\r\n        </IonItem>\r\n\r\n               <IonItem id ='updateEmail'>\r\n               Change Profile Picture\r\n               <IonButtons slot = 'end'>\r\n\r\n                  <IonButton id = 'submit'>\r\n\r\n        <input type=\"file\" id = 'fileSelect' onChange={ (e) => (this.handleChange(e.target.files!)) } />\r\n\r\n       <IonIcon id = 'cloudUploadOutline' icon={cloudUploadOutline}/>\r\n        </IonButton>\r\n\r\n\r\n\r\n        </IonButtons>\r\n          </IonItem>\r\n            \r\n\r\n              <IonItem id ='changeUsername'>\r\n            Account Settings\r\n          <IonButtons slot='end'>\r\n            <IonButton onClick={() => {this.setState({isAccountSettingsModalOpen: true})}} fill='clear'>\r\n\r\n              <IonIcon id = 'userNameChangeButton' icon={personCircleOutline}/>\r\n              </IonButton>\r\n              </IonButtons>\r\n              </IonItem>\r\n\r\n        </IonContent>\r\n      </IonPage>\r\n      )\r\n    }\r\n\r\n}\r\n\r\nexport default Settings\r\n","import React from 'react';\r\nimport {\r\n  IonTabBar,\r\n  IonTabButton,\r\n  IonTabs,\r\n  IonLabel,\r\n  IonIcon,\r\n  IonRouterOutlet\r\n} from '@ionic/react'\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { newspaperOutline, peopleOutline, settingsOutline} from 'ionicons/icons';\r\nimport Feed from './Feed'\r\nimport Social from './Social'\r\nimport Settings from './Settings'\r\nimport './Tabs.css'\r\n\r\nconst Tabs: React.FC = () => {\r\n  return (\r\n    <IonTabs>\r\n      <IonRouterOutlet>\r\n        <Route path=\"/main\" exact render={() => <Redirect to=\"/main/feed\"/>} />\r\n        <Route path=\"/main/feed\" component={Feed} exact={true} />\r\n        <Route path=\"/main/social\" component={Social} exact={true} />\r\n        <Route path=\"/main/settings\" component={Settings} exact={true}/>\r\n      </IonRouterOutlet>\r\n      <IonTabBar color='dark'class='tabToolbar' slot=\"bottom\">\r\n          <IonTabButton class='tabIcon' tab=\"feed\" href=\"/main/feed\">\r\n            <IonIcon icon={newspaperOutline} />\r\n            <IonLabel>Feed</IonLabel>\r\n          </IonTabButton>\r\n          <IonTabButton class='tabIcon' tab=\"social\" href=\"/main/social\">\r\n            <IonIcon icon={peopleOutline} />\r\n            <IonLabel>Social</IonLabel>\r\n          </IonTabButton>\r\n          <IonTabButton class='tabIcon' tab=\"settings\" href=\"/main/settings\">\r\n            <IonIcon icon={settingsOutline} />\r\n            <IonLabel>Settings</IonLabel>\r\n          </IonTabButton>\r\n        </IonTabBar>\r\n      </IonTabs>\r\n  )\r\n}\r\n\r\nexport default Tabs\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport {\r\n  IonApp,\r\n  IonRouterOutlet,\r\n} from '@ionic/react';\r\nimport { IonReactRouter } from '@ionic/react-router';\r\nimport { Plugins, PushNotification, PushNotificationToken, PushNotificationActionPerformed } from '@capacitor/core';\r\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, withIonLifeCycle, IonButton, IonFooter, IonList, IonItem, IonLabel, IonListHeader, IonText } from '@ionic/react';\r\n\r\n\r\n\r\nimport Landing from './pages/Landing'\r\nimport Weather from './pages/Weather'\r\nimport Feed from './pages/Feed'\r\nimport Tabs from './pages/Tabs'\r\n/* Core CSS required for Ionic components to work properly */\r\nimport '@ionic/react/css/core.css';\r\n\r\n/* Basic CSS for apps built with Ionic */\r\nimport '@ionic/react/css/normalize.css';\r\nimport '@ionic/react/css/structure.css';\r\nimport '@ionic/react/css/typography.css';\r\n\r\n/* Optional CSS utils that can be commented out */\r\nimport '@ionic/react/css/padding.css';\r\nimport '@ionic/react/css/float-elements.css';\r\nimport '@ionic/react/css/text-alignment.css';\r\nimport '@ionic/react/css/text-transformation.css';\r\nimport '@ionic/react/css/flex-utils.css';\r\nimport '@ionic/react/css/display.css';\r\n\r\n/* Theme variables */\r\nimport './theme/variables.css';\r\n\r\nconst App: React.FC = () => (\r\n    <IonApp>\r\n      <IonReactRouter>\r\n        <IonRouterOutlet>\r\n        <Route path=\"/main\" component={Tabs}/>\r\n          <Route path=\"/Weather\" component={Weather}/>\r\n          <Route path=\"/feed\" component={Feed}/>\r\n          <Route path=\"/main\" component={Tabs}/>\r\n          <Route path=\"/landing\" component={Landing} exact={true} />\r\n          <Route exact path=\"/\" render={() => <Redirect to=\"/landing\" />} />\r\n        </IonRouterOutlet>\r\n      </IonReactRouter>\r\n    </IonApp>\r\n)\r\nconst { PushNotifications } = Plugins;\r\nconst INITIAL_STATE = {\r\n  notifications: [{ id: 'id', title: \"Test Push\", body: \"This is my first push notification\" }],\r\n};\r\n\r\nexport class Home extends React.Component {\r\n  state: any = {};\r\n  props: any = {};\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = { ...INITIAL_STATE };\r\n  }\r\n\r\n  push() {\r\n    // Register with Apple / Google to receive push via APNS/FCM\r\n \r\n    PushNotifications.register();\r\n\r\n    // On succcess, we should be able to receive notifications\r\n    PushNotifications.addListener('registration',\r\n      (token: PushNotificationToken) => {\r\n        alert('Push registration success, token: ' + token.value);\r\n      }\r\n    );\r\n\r\n    // Some issue with your setup and push will not work\r\n    PushNotifications.addListener('registrationError',\r\n      (error: any) => {\r\n        alert('Error on registration: ' + JSON.stringify(error));\r\n      }\r\n    );\r\n\r\n    // Show us the notification payload if the app is open on our device\r\n    PushNotifications.addListener('pushNotificationReceived',\r\n      (notification: PushNotification) => {\r\n        let notif = this.state.notifications;\r\n        notif.push({ id: notification.id, title: notification.title, body: notification.body })\r\n        this.setState({\r\n          notifications: notif\r\n        })\r\n      }\r\n    );\r\n\r\n    // Method called when tapping on a notification\r\n    PushNotifications.addListener('pushNotificationActionPerformed',\r\n      (notification: PushNotificationActionPerformed) => {\r\n        let notif = this.state.notifications;\r\n        notif.push({ id: notification.notification.data.id, title: notification.notification.data.title, body: notification.notification.data.body })\r\n        this.setState({\r\n          notifications: notif\r\n        })\r\n      }\r\n    );\r\n  }\r\n  render() {\r\n    const { notifications } = this.state;\r\n    return (\r\n      <IonPage>\r\n        ...\r\n      </IonPage >\r\n    );\r\n  };\r\n}\r\n\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = \"data:image/png;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAQAAAAAAAAAAAAAAAAAAAAAA8J8HasaIBWRZAAAAAElFTkSuQmCC\"","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t141,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t142,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t143,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t144,\n\t\t18\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t145,\n\t\t19\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t146,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t147,\n\t\t20\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t148,\n\t\t21\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t149,\n\t\t22\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t150,\n\t\t23\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t151,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t152,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t153,\n\t\t24\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t154,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t155,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t156,\n\t\t25\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t157,\n\t\t26\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t158,\n\t\t27\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t159,\n\t\t28\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t160,\n\t\t29\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t161,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t162,\n\t\t15\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t163,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t164,\n\t\t30\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t165,\n\t\t31\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t166,\n\t\t32\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t167,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t168,\n\t\t17\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t169,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t170,\n\t\t33\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t171,\n\t\t34\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t172,\n\t\t35\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t173,\n\t\t36\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t174,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t175,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t176,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t177,\n\t\t37\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t178,\n\t\t16\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t179,\n\t\t38\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t180,\n\t\t39\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t181,\n\t\t40\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t182,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t183,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 87;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t187,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 89;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}