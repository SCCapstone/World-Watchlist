(this["webpackJsonpproject-folder"]=this["webpackJsonpproject-folder"]||[]).push([[1],{115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(44),i=n.n(o),s=n(25),c=n(9),l=n(10),u=n(12),A=n(13),d=n(40),p=n(2),m=n(78),f=n(18),h=n(4),g=n.n(h),v=n(6),b=n(8),E=(n(94),n(27));E.a.initializeApp({apiKey:"AIzaSyCAmbJVaYRk_N6RBcg_VnH865_9FzstE_I",authDomain:"worldwatchlist.firebaseapp.com",databaseURL:"https://worldwatchlist.firebaseio.com",projectId:"worldwatchlist",storageBucket:"worldwatchlist.appspot.com",messagingSenderId:"106343909885",appId:"1:106343909885:web:5cd924b3087d5e5b483194"});var k=E.a.auth(),w=E.a.firestore(),y=E.a,O=function(e){Object(u.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={loginEmail:"",loginPassword:"",registerEmail:"",registerPassword:"",registerConfirmPassword:"",shouldLoginShow:!0,username:"",btnText:""},a.login=a.login.bind(Object(b.a)(a)),a.register=a.register.bind(Object(b.a)(a)),a.state.btnText="Create an Account",a}return Object(l.a)(n,[{key:"login",value:function(){var e=this,t=!0;""===this.state.loginEmail&&(t=!1),""===this.state.loginPassword&&(t=!1),t&&y.auth().setPersistence(y.auth.Auth.Persistence.LOCAL).then((function(){k.signInWithEmailAndPassword(e.state.loginEmail,e.state.loginPassword).then((function(){console.log(k.currentUser),k.currentUser&&e.props.history.push("/main")})).catch((function(e){console.log(e.message)}))}))}},{key:"register",value:function(){var e=this;this.state.registerEmail,this.state.registerPassword,this.state.registerConfirmPassword,this.state.registerPassword,y.auth().setPersistence(y.auth.Auth.Persistence.LOCAL).then((function(){k.createUserWithEmailAndPassword(e.state.registerEmail,e.state.registerPassword).then((function(){e.uploadDataToFirebase().then((function(t){e.props.history.push("/main")}))})).catch((function(e){console.log(e.message)}))}))}},{key:"uploadDataToFirebase",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,n,a,r,o,i,s,c,l,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w.collection("profiles").doc(null===(t=k.currentUser)||void 0===t?void 0:t.uid).set({blockedSources:[],groups:[],displayName:this.state.username,photo:"",notifications:!1}),s=w.collection("emails").doc(this.state.registerEmail).set({userid:null===(n=k.currentUser)||void 0===n?void 0:n.uid}),c=w.collection("outgoingFriendRequests").doc(null===(a=k.currentUser)||void 0===a?void 0:a.uid).set({outgoingFriendRequests:[]}),l=w.collection("incomingFriendRequests").doc(null===(r=k.currentUser)||void 0===r?void 0:r.uid).set({incomingFriendRequests:[]}),u=w.collection("friends").doc(null===(o=k.currentUser)||void 0===o?void 0:o.uid).set({friendsList:[]}),e.next=7,Promise.all([i,s,c,l,u]);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(p.u,null,r.a.createElement(p.l,null,r.a.createElement(p.I,{className:"landingToolbar"},r.a.createElement(p.G,{class:"loginTitle"},this.state.shouldLoginShow?"Login":"Create an Account"))),r.a.createElement(p.k,{className:"landingContent"},this.state.shouldLoginShow?r.a.createElement("div",{className:"loginContainer"},r.a.createElement("div",{id:"loginInputContainer"},r.a.createElement("h1",{id:"header"},"World Watch-list"),r.a.createElement(p.o,{lines:"none",className:"loginItem"},r.a.createElement(p.p,{class:"loginLabel",position:"floating"}),r.a.createElement(p.n,{value:this.state.loginEmail,className:"loginInput",type:"email",placeholder:"Email Address",onIonChange:function(t){e.setState({loginEmail:t.target.value})}})),r.a.createElement(p.o,{lines:"none",className:"loginItem"},r.a.createElement(p.p,{className:"loginLabel",position:"floating"}),r.a.createElement(p.n,{value:this.state.loginPassword,className:"loginInput",type:"password",placeholder:"Password",onIonChange:function(t){e.setState({loginPassword:t.target.value})}}))),r.a.createElement(p.d,{onClick:function(){e.login()},className:"loginButton"},"Submit")):r.a.createElement("div",{className:"registerContainer"},r.a.createElement("div",{id:"registerInputContainer"},r.a.createElement("h1",{id:"header"},"Register for an account"),r.a.createElement(p.o,{lines:"none",className:"registerItem"},r.a.createElement(p.p,{className:"registerLabel",position:"floating",id:"email"}),r.a.createElement(p.n,{value:this.state.registerEmail,className:"registerInput",type:"email",placeholder:"Email Address",onIonChange:function(t){e.setState({registerEmail:t.target.value})}})),r.a.createElement(p.o,{lines:"none",className:"registerItem"},r.a.createElement(p.p,{className:"registerLabel",position:"floating"}),r.a.createElement(p.n,{value:this.state.registerPassword,className:"registerInput",type:"password",placeholder:"Password",onIonChange:function(t){e.setState({registerPassword:t.target.value})}})),r.a.createElement(p.o,{lines:"none",className:"registerItem"},r.a.createElement(p.p,{className:"registerLabel",position:"floating"}),r.a.createElement(p.n,{value:this.state.registerConfirmPassword,className:"registerInput",type:"password",placeholder:"Confirm Password",onIonChange:function(t){e.setState({registerConfirmPassword:t.target.value})}})),r.a.createElement(p.o,{lines:"none",className:"registerItem"},r.a.createElement(p.p,{className:"registerLabel",position:"floating"}),r.a.createElement(p.n,{value:this.state.username,className:"registerInput",type:"text",placeholder:"Username",onIonChange:function(t){e.setState({username:t.target.value})}}))),r.a.createElement(p.d,{onClick:function(){e.register()},className:"registerButton"},"Submit")),r.a.createElement(p.d,{className:"landingSwitch",onClick:function(){"Create an Account"==e.state.btnText?e.state.btnText="Log In":e.state.btnText="Create an Account",e.setState({shouldLoginShow:!e.state.shouldLoginShow})}},this.state.btnText)))}}]),n}(r.a.Component),S=n(37),C=n.n(S),x=(n(115),n(5)),j=function(e){return r.a.createElement("div",null,r.a.createElement("div",{id:"children-pane"},e.children))};n(116);var M=function(e){return r.a.createElement(p.f,null,r.a.createElement(p.h,null,r.a.createElement(p.i,null,e.location),r.a.createElement(p.j,null,e.temp)),r.a.createElement(p.g,null,e.weather_code,r.a.createElement(p.d,{id:"unsubButton",expand:"block",fill:"outline",type:"submit",shape:"round",onClick:function(t){e.func(e.index)}},"Unsubscribe")))};var D=function(e){var t=e.subs.map((function(t,n){return r.a.createElement(M,{key:t.location,weather_code:t.weather_code,temp:t.temp,location:t.location,index:n,func:e.func})}));return r.a.createElement(j,null,t)},I=function(e){Object(u.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={lat:null,long:null,name:null,req:null,temp:null,weather_code:null,showLoading:!1,location:null,subscription:[],isUnsubscribing:!1,CurrentUser:null,isweatherOpen:!1},a.ChildComponent=function(e){return r.a.createElement(p.f,null,r.a.createElement(p.h,null,r.a.createElement(p.i,null,e.location),r.a.createElement(p.j,null,e.temp)),r.a.createElement(p.g,null,e.weather_code,r.a.createElement(p.d,{id:"unsubButton",expand:"block",color:"dark",type:"submit",shape:"round",onClick:function(){return a.unsubscribe(e.index)&&a.setState({isUnsubscribing:!0})}},"unsub")))},k.onAuthStateChanged(Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(a.state.subscription),k.currentUser&&w.collection("users").doc(k.currentUser.uid).get().then((function(e){var t;e.data()&&a.setState({CurrentUser:e.data().username}),w.collection("weatherSubscription").doc(null===(t=k.currentUser)||void 0===t?void 0:t.uid).get().then((function(e){if(e.exists){var t=e.data();t&&a.setState({subscription:t.subscription})}else{var n;w.collection("weatherSubscription").doc(null===(n=k.currentUser)||void 0===n?void 0:n.uid).set({subscription:[]})}})).catch((function(e){console.log("Error getting document:",e)}))}));case 2:case"end":return e.stop()}}),e)})))),a}return Object(l.a)(n,[{key:"unsubscribe",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),this.state.subscription.splice(t,1),w.collection("weatherSubscription").doc(null===(n=k.currentUser)||void 0===n?void 0:n.uid).update({subscription:this.state.subscription});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(){var e=Object(v.a)(g.a.mark((function e(t,n){var a=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("http://api.openweathermap.org/data/2.5/weather?lat="+t+"&lon="+n+"&APPID=853ea8c8d782be685ad81ace7b65291a&units=imperial").then((function(e){var t,n=e.data;console.log(n);var r=a.state.name;!0===a.state.subscription.some((function(e){return e.location===r}))?console.log("already subscribed"):(console.log("adding to subscription"),a.state.subscription.push({location:a.state.name,temp:n.main.temp+" F",weather_code:n.weather[0].description})),a.setState({temp:n.main.temp+"F",weather_code:n.weather[0].description,location:a.state.name}),w.collection("weatherSubscription").doc(null===(t=k.currentUser)||void 0===t?void 0:t.uid).update({subscription:a.state.subscription})})).catch((function(e){console.log(e)}));case 2:this.setState({showLoading:!1});case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"geocode",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=4;break}console.log("Please enter a valid location"),e.next=6;break;case 4:return e.next=6,C.a.get("https://us1.locationiq.com/v1/search.php?key=pk.180fdf6168d1230db0cc5c937b7eaa98&q&q="+t+"&limit=1&countrycodes=US&namedetails=1&format=json").then((function(e){var t=e.data[0];console.log(t);var a=t.lat,r=t.lon,o=t.display_name;n.setState({lat:a,long:r,name:o})})).catch((function(e){console.error(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleUnsub",value:function(e){this.unsubscribe(e),this.setState({isUnsubscribing:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(p.t,{isOpen:this.props.isOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,{className:"weatherToolbar"},r.a.createElement(p.G,{className:"weatherTitle"},"Weather"),r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{onClick:function(){e.props.toggleWeatherModal()},fill:"clear"},r.a.createElement(p.m,{id:"addFriendModalCloseIcon",icon:x.o}))))),r.a.createElement(p.k,null,r.a.createElement(p.A,{placeholder:"State, City, address...",onIonInput:function(t){return e.setState({req:t.target.value})},animated:!0}),r.a.createElement(p.d,{id:"searchButton",size:"default",color:"dark",type:"submit",expand:"full",shape:"round",onClick:function(){return e.geocode(e.state.req)&&e.setState({showLoading:!0})}},"Search"),r.a.createElement(p.s,{isOpen:this.state.showLoading,onDidDismiss:function(){return e.subscribe(e.state.lat,e.state.long)},message:"Getting data from API",duration:1e3}),r.a.createElement(D,{subs:this.state.subscription,func:this.handleUnsub.bind(this)})))}}]),n}(r.a.Component),F=n(19),U=(n(117),n(118),E.a.initializeApp({apiKey:"AIzaSyCiQa3wPMFOp_PidtF-8arljaCT3XFMLhc",authDomain:"world-watchlist-server-8f86e.firebaseapp.com",databaseURL:"https://world-watchlist-server-8f862.firebaseio.com",projectId:"world-watchlist-server-8f86e",storageBucket:"world-watchlist-server-8f86e.appspot.com",messagingSenderId:"252689618671",appId:"1:252689618671:web:3ac355cc3bbad710d02d1a"},"Secondary"));U.firestore().settings({cacheSizeBytes:E.a.firestore.CACHE_SIZE_UNLIMITED}),U.firestore().enablePersistence().catch((function(e){"failed-precondition"==e.code||e.code}));var N=U.firestore(),P=(n(119),f.c.Browser);function L(){return(L=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.open({url:t});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=function(e){return r.a.createElement(p.f,null,r.a.createElement("meta",{httpEquiv:"Cache-control",content:"no-cache"}),r.a.createElement(p.h,null,r.a.createElement(p.j,null,e.theArticle.title),r.a.createElement(p.i,null,e.theArticle.pubDate)),r.a.createElement(p.g,null,e.theArticle.description),r.a.createElement(p.g,null,"news source: ",e.theArticle.source,r.a.createElement(p.o,null,r.a.createElement(p.d,{onClick:function(){var t;w.collection("profiles").doc(null===(t=k.currentUser)||void 0===t?void 0:t.uid).onSnapshot(function(){var t=Object(v.a)(g.a.mark((function t(n){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.data().blockedSources.push(new URL(e.theArticle.link).host),w.collection("profiles").doc(null===(a=k.currentUser)||void 0===a?void 0:a.uid).update({blockedSources:y.firestore.FieldValue.arrayUnion(new URL(e.theArticle.link).host)});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},slot:"end"},"Block this Source")),r.a.createElement("br",null),r.a.createElement("a",{onClick:function(){return function(e){return L.apply(this,arguments)}(e.theArticle.link)}},"link")))};var B=function(e){var t=e.theArticleList.map((function(e){return r.a.createElement("div",{key:e.title}," ",r.a.createElement(R,{theArticle:e})," ")}));return r.a.createElement("div",null,t)};n(120);var T=function(e){return r.a.createElement(p.q,null,r.a.createElement(p.r,{id:"feedHeader"},e.headerName),r.a.createElement(B,{theArticleList:e.articleList}))};n(121);var G=function(e){return r.a.createElement(p.I,{class:"feedToolbar"},r.a.createElement(p.G,{class:"feedTitle"},"Feed"),r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{id:"feedButton",onClick:e.openWeather,fill:"clear"},r.a.createElement(p.m,{icon:x.q}))),r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.d,{id:"feedButton",onClick:e.showSubs,fill:"clear"},r.a.createElement(p.m,{icon:x.g}))),r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.d,{id:"feedButton",onClick:e.showModal,fill:"clear"},r.a.createElement(p.m,{icon:x.F}))))};var q=function(e){return r.a.createElement(p.f,null,r.a.createElement(p.h,null,r.a.createElement(p.j,null,e.subscription)),r.a.createElement(p.g,null,r.a.createElement(p.d,{id:"unsubButton",expand:"block",fill:"outline",type:"submit",shape:"round",onClick:function(t){e.func(e.subscription,e.index)}},"Unsubscribe")))};var V=function(e){console.log("Child list: "+e.subs.length+" in list");var t=e.subs.map((function(t,n){return r.a.createElement(q,{key:t.toString(),subscription:t,index:n,func:e.func})}));return r.a.createElement(j,null,t)};var H=function(e){return r.a.createElement(p.t,{isOpen:e.showModal,onDidDismiss:e.closeButton},r.a.createElement(p.l,null,r.a.createElement(p.I,{class:"feedToolbar2"},r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{onClick:e.closeButton,fill:"clear"},r.a.createElement(p.m,{id:"addFriendModalCloseIcon",icon:x.o}))),r.a.createElement(p.G,{class:"feedTitle2"},"Subscriptions"))),r.a.createElement(p.k,null,r.a.createElement(p.f,null,r.a.createElement(V,{subs:e.subscriptions,func:e.unsubButton}))))},z=f.c.Storage,Q=function(e){Object(u.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={articles:[],subs:[],blockedSources:[],articlesSearched:[],subscribedArticles:void 0,CurrentUser:null,topicSearched:null,showLoading:!1,showModal:!1,showSubscription:!1,allArticles:[],locationBased:!1,isWeatherModalOpen:!1,isSearchingModal:!1,showSearchAlert:!1,showSubscribeAlert:!1,isChanging:!1},a.clear(),a.toggleWeatherModal=a.toggleWeatherModal.bind(Object(b.a)(a)),k.onAuthStateChanged(Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.currentUser){e.next=3;break}return e.next=3,w.collection("users").doc(k.currentUser.uid).get().then(function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection("profiles").doc(null===(n=k.currentUser)||void 0===n?void 0:n.uid).onSnapshot(function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({blockedSources:t.data().blockedSources}),!t.data()){e.next=4;break}return e.next=4,new Promise((function(e){return setTimeout(e,1e3)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:w.collection("topicSubscription").doc(null===(r=k.currentUser)||void 0===r?void 0:r.uid).onSnapshot(function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.exists){e.next=13;break}return e.t0=a,e.next=4,t.data().subList;case 4:return e.t1=e.sent,e.t2={subs:e.t1},e.t0.setState.call(e.t0,e.t2),console.log("subs",a.state.subs),e.next=10,a.getSubscribedArticles();case 10:console.log("articles",a.state.articles),e.next=14;break;case 13:w.collection("topicSubscription").doc(a.getId()).set({subList:[]});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Error getting document:",e)}));case 3:case"end":return e.stop()}}),e)})))),a}return Object(l.a)(n,[{key:"getSubscribedArticles",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,n,a,r,o=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({articles:[]}),t=[],n=0;case 3:if(!(n<this.state.subs.length)){e.next=22;break}return e.next=6,this.checkCollection(this.state.subs[n]);case 6:return t=[],e.next=9,z.get({key:this.state.subs[n]});case 9:if(r=e.sent,void 0!==(null===(a=r.value)||void 0===a?void 0:a.length)&&0!==JSON.parse(r.value).length&&!0!==this.state.isChanging){e.next=16;break}return console.log("local storage empty for",this.state.subs[n]),e.next=14,N.collection(this.state.subs[n]).get().then(function(){var e=Object(v.a)(g.a.mark((function e(a){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.forEach(function(){var e=Object(v.a)(g.a.mark((function e(n){var a,r,i,s,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.exists?(console.log("here"),a=n.data(),r=a.Description,(i=document.createElement("a")).innerHTML=r,s=i.textContent||i.innerText||"",c=new URL(a.Link).host,console.log(c),o.state.blockedSources.includes(c)||(console.log("blocked"),t.push({title:a.Title,link:a.Link,description:s,source:a.source,pubDate:a.pubDate}))):console.log("Cannot find anything in database.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r=a.metadata.fromCache?"local cache":"server",console.log("Sub Articles came from "+r),e.next=5,z.set({key:o.state.subs[n],value:JSON.stringify(t)});case 5:o.setState({articles:[].concat(Object(F.a)(o.state.articles),Object(F.a)(t))});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:e.next=18;break;case 16:this.setState({articles:[].concat(Object(F.a)(this.state.articles),Object(F.a)(JSON.parse(r.value)))}),console.log("taking from capacitor cache");case 18:this.setState({isChanging:!1});case 19:n++,e.next=3;break;case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doRefresh",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n,a,r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({articles:[]}),n=[],a=0;case 3:if(!(a<this.state.subs.length)){e.next=10;break}return n=[],e.next=7,N.collection(this.state.subs[a]).get().then(function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=Object(v.a)(g.a.mark((function e(t){var a,o,i,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.exists&&(console.log(r.state.blockedSources),a=t.data(),o=a.Description,(i=document.createElement("a")).innerHTML=o,s=i.textContent||i.innerText||"",n.push({title:a.Title,link:a.Link,description:s,source:a.source,pubDate:a.pubDate}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:a++,e.next=3;break;case 10:setTimeout((function(){console.log("refreshing ended"),t.detail.complete(),r.setState({articles:[].concat(Object(F.a)(r.state.articles),Object(F.a)(n))})}),500);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getId",value:function(){var e;return null===(e=k.currentUser)||void 0===e?void 0:e.uid}},{key:"toggleWeatherModal",value:function(){this.setState({isWeatherModalOpen:!this.state.isWeatherModalOpen})}},{key:"checkCollection",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N.collection(t).where("Title","!=","").onSnapshot(function(){var e=Object(v.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.b.getPending();case 2:if(a=e.sent,!1!==t.metadata.fromCache){e.next=12;break}return n.clear(),n.setState({isChanging:!0}),e.next=8,f.b.requestPermission();case 8:if(e.sent.granted){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,f.b.schedule({notifications:[{title:"Changes in your feed!",body:"Check them out!",id:1,schedule:{at:new Date((new Date).getTime()+6e4),repeats:!1}}]});case 12:a.notifications.length>0&&f.b.cancel(a),console.log(a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.clear();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"addSubscription",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=3;break}return e.next=3,w.collection("topicSubscription").doc(this.getId()).update({subList:y.firestore.FieldValue.arrayUnion(t)});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeSubscription",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.state.subs[t]){e.next=3;break}return e.next=3,w.collection("topicSubscription").doc(this.getId()).update({subList:y.firestore.FieldValue.arrayRemove(this.state.subs[t])});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleNewsModal",value:function(){this.setState({isSearchingModal:!0})}},{key:"searchTopic",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n,a=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({showLoading:!0}),this.setState({articlesSearched:[]}),null!==t&&void 0!==t&&""!==t){e.next=7;break}console.log("Enter a valid topic"),this.setState({showSearchAlert:!0}),e.next=11;break;case 7:return this.toggleNewsModal(),n=[],e.next=11,N.collection(t.toLowerCase()).get().then(function(){var e=Object(v.a)(g.a.mark((function e(r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.empty){e.next=5;break}return e.next=3,a.apiSearch(t,"search");case 3:e.next=8;break;case 5:console.log("collection exist, will pull data from that collection"),n=[],r.docChanges().forEach((function(e){if(e.doc.exists){var t=e.doc.data(),r=t.Description,o=document.createElement("a");o.innerHTML=r;var i=o.textContent||o.innerText||"";n.push({title:t.Title,link:t.Link,description:i,source:t.source,pubDate:t.pubDate})}a.setState({articlesSearched:n})}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:return this.setState({showLoading:!1}),e.abrupt("return",0);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&""!==t){e.next=4;break}console.log("Enter a valid topic"),e.next=6;break;case 4:return e.next=6,N.collection(t.toLowerCase()).get().then(function(){var e=Object(v.a)(g.a.mark((function e(a){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.empty){e.next=5;break}return e.next=3,n.apiSearch(t,"subscribe");case 3:e.next=8;break;case 5:return console.log("News about "+t+" has been found and will be subscribed."),e.next=8,n.addSubscription(t.toLowerCase());case 8:r=a.metadata.fromCache?"local cache":"server",console.log("Data came from "+r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){var e=Object(v.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("News about "+t+" has been found and will be unsubscribed."),e.next=3,this.removeSubscription(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"apiSearch",value:function(){var e=Object(v.a)(g.a.mark((function e(t,n){var a,r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,C()({method:"GET",url:"https://world-watchlist-server-8f86e.web.app/"+t}).then(function(){var e=Object(v.a)(g.a.mark((function e(o){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(o),e.next=3,o.data.forEach((function(e){var t=e.description,n=document.createElement("a");n.innerHTML=t;var r=n.textContent||n.innerText||"",o=e.link.split("/"),i=o[0]+"//"+o[2];a.push({title:e.title,link:e.link,description:r,source:i,pubDate:e.pubDate})}));case 3:if("search"!==n){e.next=7;break}r.setState({articlesSearched:a}),e.next=10;break;case 7:return a.forEach(function(){var e=Object(v.a)(g.a.mark((function e(n){var a,r,o,i,s,c,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.description,(r=document.createElement("a")).innerHTML=a,o=r.textContent||r.innerText||"",i=n.link.split("/"),s=i[0],c=i[2],l=s+"//"+c,e.next=10,N.collection(t.toLowerCase()).doc(n.title).set({Title:n.title,Link:n.link,Description:o,source:l,pubDate:n.pubDate});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=10,r.addSubscription(t.toLowerCase());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(p.u,null,r.a.createElement(p.l,null,r.a.createElement(G,{openWeather:function(){return e.setState({isWeatherModalOpen:!0})},showSubs:function(){e.setState({showSubscription:!0})},showModal:function(){e.setState({showModal:!0})}})),r.a.createElement(p.k,null,r.a.createElement(p.w,{slot:"fixed",pullFactor:.5,pullMin:100,pullMax:200,onIonRefresh:function(t){return e.doRefresh(t)}},r.a.createElement(p.x,null)),r.a.createElement(I,{toggleWeatherModal:this.toggleWeatherModal,isOpen:this.state.isWeatherModalOpen}),r.a.createElement(p.t,{isOpen:this.state.showModal,onDidDismiss:function(){return e.setState({showModal:!1})}},r.a.createElement(p.l,null,r.a.createElement(p.I,{class:"feedToolbar2"},r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{onClick:function(){e.setState({showModal:!1})},fill:"clear"},r.a.createElement(p.m,{id:"addFriendModalCloseIcon",icon:x.o}))),r.a.createElement(p.G,{class:"feedTitle2"},"Search Topics"))),r.a.createElement(p.k,null,r.a.createElement(p.A,{placeholder:"Enter a Topic or Location",value:this.state.topicSearched,onIonInput:function(t){return e.setState({topicSearched:t.target.value})},animated:!0}),r.a.createElement(p.d,{id:"searchButton",expand:"block",fill:"outline",type:"submit",shape:"round",onClick:Object(v.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searchTopic(e.state.topicSearched);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))},"Search"),r.a.createElement(p.a,{isOpen:this.state.showSearchAlert,onDidDismiss:function(){return e.setState({showSearchAlert:!1})},message:"Enter a valid topic or location"}),r.a.createElement(p.s,{isOpen:this.state.showLoading,message:"Loading...",duration:7e3}),r.a.createElement(p.t,{isOpen:this.state.isSearchingModal},r.a.createElement(p.l,null,r.a.createElement(p.I,{id:"newsToolbar"},r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{onClick:function(){return e.setState({isSearchingModal:!1})},fill:"clear"},r.a.createElement(p.m,{id:"addFriendModalCloseIcon",icon:x.o}))),r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.d,{onClick:function(){return e.subscribe(e.state.topicSearched)&&e.setState({showSubscribeAlert:!0})},fill:"clear"},r.a.createElement(p.m,{id:"addTopic",icon:x.a}))),r.a.createElement(p.G,{id:"newsTitle"},"News"))),r.a.createElement(p.k,null,r.a.createElement(B,{theArticleList:this.state.articlesSearched}),r.a.createElement(p.a,{isOpen:this.state.showSubscribeAlert,onDidDismiss:function(){return e.setState({showSubscribeAlert:!1,isSearchingModal:!1})},message:"Subscribed to "+this.state.topicSearched}))))),r.a.createElement(H,{showModal:this.state.showSubscription,closeButton:function(){e.setState({showSubscription:!1})},unsubButton:this.unsubscribe.bind(this),subscriptions:this.state.subs}),r.a.createElement(T,{headerName:"Recent News",articleList:this.state.articles})))}}]),n}(r.a.Component),W=(n(74),n(34)),X=n.n(W);n(122);var Z=function(e){return r.a.createElement("div",null,r.a.createElement(p.p,{class:"messageLabel",position:"stacked"},e.sender),r.a.createElement(p.o,{class:"messageItem"},r.a.createElement(p.c,{slot:"start"},r.a.createElement("img",{src:""!==e.photo?e.photo:X.a})),r.a.createElement(p.p,{class:"messageContent"},e.content)))};f.c.Storage;var J=function(e){return r.a.createElement(T,{headerName:e.headerName,articleList:e.articles})},K=(f.c.Storage,function(){var e=Object(v.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Temp add called"),""===t){e.next=4;break}return e.next=4,w.collection("topicSubscription").doc(n).update({subList:E.a.firestore.FieldValue.arrayUnion(t)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_=function(){var e=Object(v.a)(g.a.mark((function e(t,n,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("temp remove called"),""===a[t]){e.next=4;break}return e.next=4,w.collection("topicSubscription").doc(n).update({subList:E.a.firestore.FieldValue.arrayRemove(a[t])});case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Y=function(){var e=Object(v.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&""!==t){e.next=4;break}console.log("Enter a valid topic"),e.next=6;break;case 4:return e.next=6,N.collection(t.toLowerCase()).get().then(function(){var e=Object(v.a)(g.a.mark((function e(a){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.empty){e.next=5;break}return e.next=3,$(t,"subscribe",n);case 3:e.next=8;break;case 5:return console.log("News about "+t+" has been found and will be subscribed."),e.next=8,K(t.toLowerCase(),n);case 8:r=a.metadata.fromCache?"local cache":"server",console.log("Data came from "+r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(v.a)(g.a.mark((function e(t,n,a){var r,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],o=t.replace(/\ /g,"%2520"),i="https%3A%2F%2Fnews.google.com%2Frss%2Fsearch%3Fq%3D"+o+"%26hl%3Den-US%26gl%3DUS%26ceid%3DUS%3Aen",e.next=5,C()({method:"GET",url:"https://api.rss2json.com/v1/api.json?rss_url="+i+"&api_key=ygho9vm848pakf5b24oawteww7slkcj2ccgiu13w"}).then(function(){var e=Object(v.a)(g.a.mark((function e(o){var i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.data;case 2:return i=e.sent,console.log(i),e.next=6,i.items.forEach((function(e){var t=e.description,n=document.createElement("a");n.innerHTML=t;var a=n.textContent||n.innerText||"",o=e.link.split("/"),i=o[0]+"//"+o[2];r.push({title:e.title,link:e.link,description:a,source:i,pubDate:e.pubDate})}));case 6:if("search"!==n){e.next=10;break}return e.abrupt("return",r);case 10:return r.forEach(function(){var e=Object(v.a)(g.a.mark((function e(n){var a,r,o,i,s,c,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.description,(r=document.createElement("a")).innerHTML=a,o=r.textContent||r.innerText||"",i=n.link.split("/"),s=i[0],c=i[2],l=s+"//"+c,e.next=10,N.collection(t.toLowerCase()).doc(n.title).set({Title:n.title,Link:n.link,Description:o,source:l,pubDate:n.pubDate});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=13,K(t.toLowerCase(),a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ee=function(e){Object(u.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={articles:[],blockedSources:[],subscriptions:[],showSubscriptionModal:!1,groupSegment:"feed",groupViewPopoverEvent:void 0,isGroupViewPopoverOpen:!1,isSettingsModalOpen:!1,isMembersModalOpen:!1,isFriendsListModalOpen:!1,isNicknameReadOnly:!0,tempNickname:a.props.groupDetails.nickname,members:[],owner:{uid:"",displayName:"",photo:""},messages:[],photoDictionary:{},currentMessage:"",nameDictionary:{},blockedList:[]},a.realtime_db=y.database(),a.anchorRef=void 0,a.pullImage(),a.anchorRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=[];this.props.groupDetails.members.forEach((function(n){w.collection("profiles").doc(n).get().then((function(a){var r,o={photo:null===(r=a.data())||void 0===r?void 0:r.photo,displayName:a.data().displayName,uid:n};t.push(o),n===e.props.groupDetails.owner&&e.setState({owner:o})}))})),this.setState({members:t})}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.groupDetails.members.length!==this.props.groupDetails.members.length){var n;if(k.currentUser)w.collection("blockedUsers").doc(null===(n=k.currentUser)||void 0===n?void 0:n.uid).get().then((function(e){t.setState({blockedList:e.data().blocked})}));var a=[],r=new Object;r["World-Watchlist"]="https://firebasestorage.googleapis.com/v0/b/worldwatchlist.appspot.com/o/images%2Fearth.jpg?alt=media&token=8dfce470-5dac-4126-b3d2-4f3d42a07b8a";var o=new Object;o["World-Watchlist"]="World-Watchlist",this.props.groupDetails.members.forEach((function(e){w.collection("profiles").doc(e).get().then((function(n){var i,s={photo:null===(i=n.data())||void 0===i?void 0:i.photo,displayName:n.data().displayName,uid:e};a.push(s),r[s.uid]=s.photo,o[s.uid]=s.displayName,console.log(r[s.uid]),console.log(o[s.uid]),e===t.props.groupDetails.owner&&t.setState({owner:s})}))})),this.setState({members:a,photoDictionary:r,nameDictionary:o})}if(e.groupDetails.id!==this.props.groupDetails.id){this.setState({messages:[]});var i=[];this.realtime_db.ref(this.props.groupDetails.id).orderByKey().on("child_added",(function(e){i.push(Object(s.a)(Object(s.a)({},e.val()),{},{key:e.key})),console.log(Object(s.a)(Object(s.a)({},e.val()),{},{key:e.key})),t.setState({messages:i}),"messages"===t.state.groupSegment&&t.anchorRef.current.scrollIntoView()}))}}},{key:"pullImage",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.currentUser&&(y.storage(),t=y.storage().ref(),n="groupImages/"+this.props.groupDetails.id+".jpg",t.child(n).getDownloadURL().then((function(e){var t=document.getElementById("groupImage");null!=t&&t.setAttribute("src",e)})).catch((function(e){switch(e.code){case"storage/object-not-found":y.storage().ref().child("placeholder.png").getDownloadURL().then((function(e){var t=document.getElementById("groupImg");null!=t&&t.setAttribute("src",e)}))}})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadImage",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n,a,r,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t[0]){e.next=13;break}return n=y.storage().ref(),a=t[0],r=this.props.groupDetails.id,(o=n.child("groupImages/"+r+".jpg")).put(a),e.next=8,new Promise((function(e){return setTimeout(e,1e3)}));case 8:return e.next=10,o.getDownloadURL();case 10:i=e.sent,w.collection("groups").doc(this.props.groupDetails.id).update({profilePicture:i}),this.pullImage();case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e,t=Date.now();this.realtime_db.ref(this.props.groupDetails.id).child(t.toString()).set({message:this.state.currentMessage,sender:null===(e=k.currentUser)||void 0===e?void 0:e.uid}),this.setState({currentMessage:""})}},{key:"getId",value:function(){return this.props.groupDetails.id}},{key:"handleSegmentSwitch",value:function(e){var t=e.detail.value;this.setState({groupSegment:t}),"messages"===t&&(console.log("Messages selected"),this.anchorRef.current.scrollIntoView())}},{key:"closeButton",value:function(){this.setState({showSubscriptionModal:!1})}},{key:"unsubscribeButton",value:function(e){_(e,this.getId(),this.state.subscriptions)}},{key:"subscribeButton",value:function(e){Y(e,this.getId())}},{key:"render",value:function(){var e,t=this;return r.a.createElement("div",null,r.a.createElement(p.t,{swipeToClose:!1,isOpen:this.state.isMembersModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,null,r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{fill:"clear",onClick:function(){t.setState({isMembersModalOpen:!1})}},r.a.createElement(p.m,{className:"groupViewIcon",icon:x.k}))),r.a.createElement(p.G,null,"Members"))),r.a.createElement(p.k,null,r.a.createElement(p.r,null,"Owner"),r.a.createElement(p.q,null,r.a.createElement(p.o,null,r.a.createElement(p.G,null,this.state.owner.displayName))),r.a.createElement(p.r,null,"Members (",this.props.groupDetails.members.length-1,") "),r.a.createElement(p.q,null,this.state.members.map((function(e){return e.uid!==t.props.groupDetails.owner?r.a.createElement(p.o,{key:e.uid},r.a.createElement(p.G,null,e.displayName)):void 0}))))),r.a.createElement(p.t,{swipeToClose:!1,isOpen:this.state.isSettingsModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,null,r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{fill:"clear",onClick:function(){t.setState({isSettingsModalOpen:!1})}},r.a.createElement(p.m,{className:"groupViewIcon",icon:x.k}))),r.a.createElement(p.G,null,"Group Settings"))),r.a.createElement(p.k,null,this.props.groupDetails.owner===(null===(e=k.currentUser)||void 0===e?void 0:e.uid)?r.a.createElement("div",null,r.a.createElement(p.o,null,"Change Profile Picture",r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.d,{id:"submit"},r.a.createElement("input",{type:"file",id:"fileSelect",onChange:function(e){return t.uploadImage(e.target.files)}}),r.a.createElement(p.m,{id:"cloudUploadOutline",icon:x.r})))),r.a.createElement(p.o,null,r.a.createElement(p.n,{onIonChange:function(e){t.setState({tempNickname:e.target.value})},placeholder:this.props.groupDetails.nickname,readonly:this.state.isNicknameReadOnly,value:this.state.tempNickname}),r.a.createElement(p.d,{onClick:function(){t.setState({isNicknameReadOnly:!t.state.isNicknameReadOnly}),w.collection("groups").doc(t.props.groupDetails.id).update({nickname:t.state.tempNickname})},slot:"end",fill:"clear"},r.a.createElement(p.m,{icon:this.state.isNicknameReadOnly?x.y:x.i}))),r.a.createElement(p.o,{onClick:function(){t.setState({isSettingsModalOpen:!1}),t.props.deleteGroup()}},"Delete Group")):void 0)),r.a.createElement(p.t,{swipeToClose:!1,isOpen:this.state.isFriendsListModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,null,r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{fill:"clear",onClick:function(){t.setState({isFriendsListModalOpen:!1})}},r.a.createElement(p.m,{className:"groupViewIcon",icon:x.k}))),r.a.createElement(p.G,null,"Add Member"))),r.a.createElement(p.k,null,r.a.createElement(p.r,null,"Friends (",this.props.friendList.length,")"),r.a.createElement(p.q,null,this.props.friendList.map((function(e){return r.a.createElement(p.o,{key:e.uid},r.a.createElement(p.p,null,e.displayName),r.a.createElement(p.d,{onClick:function(){t.props.addFriendToGroup(e.uid,t.props.groupDetails.id)},fill:"clear"},r.a.createElement(p.m,{slot:"end",icon:t.props.groupDetails.members.includes(e.uid)?x.i:x.c})))}))))),r.a.createElement(H,{showModal:this.state.showSubscriptionModal,closeButton:this.closeButton.bind(this),unsubButton:this.unsubscribeButton.bind(this),subscriptions:this.state.subscriptions}),r.a.createElement(p.v,{cssClass:"groupViewPopover",event:this.state.groupViewPopoverEvent,isOpen:this.state.isGroupViewPopoverOpen,onDidDismiss:function(){t.setState({isGroupViewPopoverOpen:!1,groupViewPopoverEvent:void 0})}},r.a.createElement(p.k,null,r.a.createElement(p.q,null,r.a.createElement(p.r,{id:"groupViewPopoverListHeader"},r.a.createElement("b",null,"Group Options")),r.a.createElement(p.o,{button:!0,onClick:function(){t.setState({isGroupViewPopoverOpen:!1,isMembersModalOpen:!0})}},r.a.createElement(p.p,null,"Members"),r.a.createElement(p.m,{className:"groupViewPopoverIcon",slot:"end",icon:x.z})),r.a.createElement(p.o,{button:!0,onClick:function(){t.setState({isGroupViewPopoverOpen:!1,isFriendsListModalOpen:!0})}},r.a.createElement(p.p,null,"Add Member"),r.a.createElement(p.m,{className:"groupViewPopoverIcon",slot:"end",icon:x.c})),r.a.createElement(p.o,{button:!0,onClick:function(){t.setState({isGroupViewPopoverOpen:!1,isSettingsModalOpen:!0})}},r.a.createElement(p.p,null,"Settings"),r.a.createElement(p.m,{className:"groupViewPopoverIcon",slot:"end",icon:x.J})),r.a.createElement(p.o,{onClick:function(){t.setState({isGroupViewPopoverOpen:!1}),t.props.leaveGroup()},button:!0},r.a.createElement(p.p,{id:"leaveGroup"},"Leave Group"),r.a.createElement(p.m,{id:"groupViewPopoverLeave",slot:"end",icon:x.s}))))),r.a.createElement(p.t,{cssClass:"modalScroll",swipeToClose:!0,isOpen:this.props.isGroupModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,null,r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{fill:"clear",onClick:function(){t.props.toggleGroupModal()}},r.a.createElement(p.m,{className:"groupViewIcon",icon:x.o}))),r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.c,{onClick:function(e){e.persist(),t.setState({isGroupViewPopoverOpen:!0,groupViewPopoverEvent:e})},className:"groupViewProfilePicture"},r.a.createElement("img",{src:""!==this.props.groupDetails.profilePicture?this.props.groupDetails.profilePicture:X.a}))),r.a.createElement(p.G,null,this.props.groupDetails?this.props.groupDetails.nickname:void 0))),r.a.createElement(p.B,{id:"groupSegment",onIonChange:this.handleSegmentSwitch.bind(this),value:this.state.groupSegment},r.a.createElement(p.C,{value:"messages",class:"groupSegmentButton"},r.a.createElement(p.p,null,"Messages")),r.a.createElement(p.C,{value:"feed",class:"groupSegmentButton"},r.a.createElement(p.p,null,"Feed"))),"messages"===this.state.groupSegment?r.a.createElement(p.k,{className:"groupViewMessageContainer",scrollY:!0},r.a.createElement("div",{className:"messageContainerDiv"},this.state.messages.map((function(e){return t.state.blockedList.includes(e.sender)?r.a.createElement(Z,{key:e.key,sender:t.state.nameDictionary[e.sender],content:"This content is from a blocked user.",photo:t.state.photoDictionary[e.sender]}):r.a.createElement(Z,{key:e.key,sender:t.state.nameDictionary[e.sender],content:e.message,photo:t.state.photoDictionary[e.sender]})})),r.a.createElement("div",{className:"groupViewAnchor"}),r.a.createElement("div",{className:"groupViewAnchor2",ref:this.anchorRef})),r.a.createElement("div",{className:"groupViewMessageBox"},r.a.createElement(p.n,{value:this.state.currentMessage,onIonChange:function(e){t.setState({currentMessage:e.target.value})},className:"groupViewMessageInput"}),r.a.createElement(p.d,{onClick:function(){t.sendMessage()},fill:"clear",className:"groupViewMessageButton"},r.a.createElement(p.m,{slot:"icon-only",className:"groupViewMessageSend",icon:x.I}))),r.a.createElement("div",{className:"bottomSpaceFiller"})):r.a.createElement(p.k,null,r.a.createElement(J,{headerName:"Group News",articles:this.state.articles}))))}}]),n}(r.a.Component),te=(n(123),n(124),function(e){Object(u.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={targetUserId:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(p.t,{isOpen:this.props.isAddFriendModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,{class:"socialToolbar2"},r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{onClick:function(){e.props.toggleAddFriendModal()},id:"addFriendModalCloseButton",fill:"clear"},r.a.createElement(p.m,{id:"addFriendModalCloseIcon",icon:x.o}))),r.a.createElement(p.G,{class:"socialTitle2"},"Add Friend"))),r.a.createElement(p.k,null,r.a.createElement(p.p,{class:"addFriendDescription"},"Please input the email of the user you wish to add."),r.a.createElement(p.o,{lines:"none",id:"searchFriendItem"},r.a.createElement(p.n,{id:"addFriendSearch",onIonChange:function(t){e.setState({targetUserId:t.target.value})}}),r.a.createElement(p.d,{onClick:function(){e.props.addFriend(e.state.targetUserId)},slot:"end",id:"addFriendButton",fill:"clear"},r.a.createElement(p.m,{id:"addFriendButtonIcon",icon:x.b})))))}}]),n}(r.a.Component)),ne=function(e){Object(u.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={incomingFriends:[],outgoingFriends:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.incomingRequests.map((function(t){return w.collection("profiles").doc(t).get().then((function(n){n.data()&&e.setState({incomingFriends:[].concat(Object(F.a)(e.state.incomingFriends),[{displayName:n.data().displayName,uid:t,photo:n.data().photo}])})}))})),this.props.outgoingRequests.map((function(t){return w.collection("profiles").doc(t).get().then((function(n){n.data()&&e.setState({outgoingFriends:[].concat(Object(F.a)(e.state.outgoingFriends),[{displayName:n.data().displayName,uid:t,photo:n.data().photo}])})}))}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.incomingRequests!==e.incomingRequests&&(this.setState({incomingFriends:[]}),this.props.incomingRequests.map((function(e){return w.collection("profiles").doc(e).get().then((function(n){n.data()&&t.setState({incomingFriends:[].concat(Object(F.a)(t.state.incomingFriends),[{displayName:n.data().displayName,uid:e,photo:n.data().photo}])})}))}))),this.props.outgoingRequests!==e.outgoingRequests&&(this.setState({outgoingFriends:[]}),this.props.outgoingRequests.map(function(){var e=Object(v.a)(g.a.mark((function e(n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection("profiles").doc(n).get();case 2:(a=e.sent).data()&&t.setState({outgoingFriends:[].concat(Object(F.a)(t.state.outgoingFriends),[{displayName:a.data().displayName,uid:n,photo:a.data().photo}])});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},{key:"render",value:function(){var e=this;return r.a.createElement(p.t,{isOpen:this.props.isPendingRequestsModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,{class:"socialToolbar2"},r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{onClick:function(){e.props.togglePendingRequestsModal()},id:"addFriendModalCloseButton",fill:"clear"},r.a.createElement(p.m,{id:"addFriendModalCloseIcon",icon:x.o}))),r.a.createElement(p.G,{class:"socialTitle2"},"Pending Requests"))),r.a.createElement(p.k,null,r.a.createElement("h2",{id:"incomingFriendRequestHeader"},"Incoming Friend Requests"),this.state.incomingFriends.map((function(t){return r.a.createElement(p.o,{key:t.uid},r.a.createElement(p.p,null,t.displayName),r.a.createElement(p.d,{onClick:function(){e.props.acceptFriend(t.uid)},className:"acceptButton",slot:"end",fill:"clear"},r.a.createElement(p.m,{className:"addIcon",icon:x.b})),r.a.createElement(p.d,{onClick:function(){e.props.declineFriend(t.uid)},className:"denyButton",slot:"end",fill:"clear"},r.a.createElement(p.m,{className:"denyIcon",icon:x.o})))})),r.a.createElement("h2",{id:"outgoingFriendRequestHeader"},"Outgoing Friend Requests"),this.state.outgoingFriends.map((function(t){return r.a.createElement(p.o,{key:t.uid},r.a.createElement(p.p,null,t.displayName),r.a.createElement(p.d,{onClick:function(){e.props.cancelOutgingRequest(t.uid)},className:"denyButton",slot:"end",fill:"clear"},r.a.createElement(p.m,{className:"denyIcon",icon:x.o})))}))))}}]),n}(r.a.Component),ae=(n(125),function(e){Object(u.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={friendViewPopoverEvent:void 0,isFriendViewPopoverOpen:!1,isSettingsModalOpen:!1,isMembersModalOpen:!1,isFriendsListModalOpen:!1,messages:[],photoDictionary:{},currentMessage:"",nameDictionary:{}},a.realtime_db=y.database(),a.anchorRef=void 0,a.anchorRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.friendDetails.uid!==this.props.friendDetails.uid){var n;this.setState({messages:[]});var a=new Object;a["World-Watchlist"]="https://firebasestorage.googleapis.com/v0/b/worldwatchlist.appspot.com/o/images%2Fearth.jpg?alt=media&token=8dfce470-5dac-4126-b3d2-4f3d42a07b8a";var r=new Object;r["World-Watchlist"]="World-Watchlist",(null===(n=k.currentUser)||void 0===n?void 0:n.uid)&&w.collection("profiles").doc(k.currentUser.uid).get().then((function(e){r[k.currentUser.uid]=e.data().displayName,a[k.currentUser.uid]=e.data().photo,a[t.props.friendDetails.uid]=t.props.friendDetails.photo,r[t.props.friendDetails.uid]=t.props.friendDetails.displayName,console.log(t.props.friendDetails.photo)}));var o=[];""!==this.props.friendDetails.uuid&&this.realtime_db.ref(this.props.friendDetails.uuid).orderByKey().on("child_added",(function(e){o.push(Object(s.a)(Object(s.a)({},e.val()),{},{key:e.key})),console.log(Object(s.a)(Object(s.a)({},e.val()),{},{key:e.key})),t.setState({messages:o}),t.anchorRef.current.scrollIntoView()})),this.setState({photoDictionary:a,nameDictionary:r})}}},{key:"sendMessage",value:function(){var e,t=Date.now();this.realtime_db.ref(this.props.friendDetails.uuid).child(t.toString()).set({message:this.state.currentMessage,sender:null===(e=k.currentUser)||void 0===e?void 0:e.uid}),this.setState({currentMessage:""})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(p.v,{cssClass:"friendViewPopover",event:this.state.friendViewPopoverEvent,isOpen:this.state.isFriendViewPopoverOpen,onDidDismiss:function(){e.setState({isFriendViewPopoverOpen:!1,friendViewPopoverEvent:void 0})}},r.a.createElement(p.k,null,r.a.createElement(p.q,null,r.a.createElement(p.r,{id:"friendViewPopoverListHeader"},r.a.createElement("b",null,"Friend Options")),r.a.createElement(p.o,{button:!0,onClick:function(){e.props.removeFriend(e.props.friendDetails.uid)}},r.a.createElement(p.p,null,"Remove Friend"),r.a.createElement(p.m,{className:"friendViewPopoverIcon",slot:"end",icon:x.C}))))),r.a.createElement(p.t,{cssClass:"modalScroll",swipeToClose:!0,isOpen:this.props.isFriendModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,null,r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{fill:"clear",onClick:function(){e.props.toggleFriendModal()}},r.a.createElement(p.m,{className:"friendViewIcon",icon:x.o}))),r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.c,{onClick:function(t){t.persist(),e.setState({isFriendViewPopoverOpen:!0,friendViewPopoverEvent:t})},className:"friendViewProfilePicture"},r.a.createElement("img",{src:""!==this.props.friendDetails.photo&&void 0!==this.props.friendDetails.photo?this.props.friendDetails.photo:X.a}))),r.a.createElement(p.G,null,this.props.friendDetails?this.props.friendDetails.displayName:void 0))),r.a.createElement(p.k,{className:"friendViewMessageContainer",scrollY:!0},r.a.createElement("div",{className:"messageContainerDiv"},this.state.messages.map((function(t){return r.a.createElement(Z,{key:t.key,sender:e.state.nameDictionary[t.sender],content:t.message,photo:e.state.photoDictionary[t.sender]})})),r.a.createElement("div",{className:"friendViewAnchor"}),r.a.createElement("div",{className:"friendViewAnchor2",ref:this.anchorRef})),r.a.createElement("div",{className:"friendViewMessageBox"},r.a.createElement(p.n,{value:this.state.currentMessage,onIonChange:function(t){e.setState({currentMessage:t.target.value})},className:"friendViewMessageInput"}),r.a.createElement(p.d,{onClick:function(){e.sendMessage()},fill:"clear",className:"friendViewMessageButton"},r.a.createElement(p.m,{slot:"icon-only",className:"friendViewMessageSend",icon:x.I}))),r.a.createElement("div",{className:"bottomSpaceFiller"}))))}}]),n}(r.a.Component)),re=function(e){Object(u.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).realtime_db=y.database(),a.state={isAddFriendModalOpen:!1,targetUsername:"",friendsList:[],blockedUsers:[],isPendingRequestsModalOpen:!1,isMessengerModalOpen:!1,incomingRequests:[],outgoingRequests:[],messageRef:"",isSocialPopoverOpen:!1,socialPopoverEvent:void 0,isCreateGroupModalOpen:!1,groupNickname:"",groupArray:[],numGroups:0,unsubscribeGroupArray:[],groupDetails:{nickname:"",members:[],id:"",profilePicture:"",owner:""},friendDetails:{uuid:"",uid:"",displayName:"",photo:""},isGroupModalOpen:!1,unsubscribeFriendsList:function(){},unsubscribeBlockedUsers:null,unsubscribeIncomingRequests:function(){},unsubscribeOutgoingRequests:function(){},unsubscribeIndiviudalFriends:[],segmentSelected:"groups",activeMessages:[],isFriendModalOpen:!1},a.unsubscribeGroups=void 0,a.addFriend=a.addFriend.bind(Object(b.a)(a)),a.acceptFriend=a.acceptFriend.bind(Object(b.a)(a)),a.declineFriend=a.declineFriend.bind(Object(b.a)(a)),a.removeFriend=a.removeFriend.bind(Object(b.a)(a)),a.blockUser=a.blockUser.bind(Object(b.a)(a)),a.cancelOutgingRequest=a.cancelOutgingRequest.bind(Object(b.a)(a)),a.generateUniqueFriendId=a.generateUniqueFriendId.bind(Object(b.a)(a)),a.generateUniqueGroupId=a.generateUniqueGroupId.bind(Object(b.a)(a)),a.createGroup=a.createGroup.bind(Object(b.a)(a)),a.toggleGroupModal=a.toggleGroupModal.bind(Object(b.a)(a)),a.deleteGroup=a.deleteGroup.bind(Object(b.a)(a)),a.leaveGroup=a.leaveGroup.bind(Object(b.a)(a)),a.toggleGroupModal=a.toggleGroupModal.bind(Object(b.a)(a)),a.toggleAddFriendModal=a.toggleAddFriendModal.bind(Object(b.a)(a)),a.togglePendingRequestsModal=a.togglePendingRequestsModal.bind(Object(b.a)(a)),a.addFriendToGroup=a.addFriendToGroup.bind(Object(b.a)(a)),a.generateRandomString=a.generateRandomString.bind(Object(b.a)(a)),a.toggleFriendModal=a.toggleFriendModal.bind(Object(b.a)(a)),k.onAuthStateChanged((function(){k.currentUser&&w.collection("profiles").doc(k.currentUser.uid).get().then((function(e){if(e.data()){var t,n,r,o;w.collection("friends").doc(null===(t=k.currentUser)||void 0===t?void 0:t.uid).onSnapshot((function(e){e.data().friendsList.map((function(e){w.collection("profiles").doc(e).onSnapshot((function(t){var n;w.collection("friends").doc(null===(n=k.currentUser)||void 0===n?void 0:n.uid).collection("uuids").doc(e).get().then((function(n){var r,o=a.state.friendsList,i={photo:null===(r=t.data())||void 0===r?void 0:r.photo,displayName:t.data().displayName,uuid:n.data().uuid,uid:e},s=!0;o.map((function(e,t){o[t].uid===i.uid&&(o[t]=i,s=!1)})),s&&o.push(i),a.setState({friendsList:o})}))}))}))}));a.state.unsubscribeBlockedUsers=w.collection("blockedUsers").doc(null===(n=k.currentUser)||void 0===n?void 0:n.uid).onSnapshot((function(e){var t;e.exists&&void 0!==e.data().blocked?a.setState({blockedUsers:e.data().blocked}):(w.collection("blockedUsers").doc(null===(t=k.currentUser)||void 0===t?void 0:t.uid).set({blocked:[]}),a.setState({blockedUsers:[]}))}));var i=w.collection("incomingFriendRequests").doc(null===(r=k.currentUser)||void 0===r?void 0:r.uid).onSnapshot((function(e){e.data()&&(console.log(e.data().incomingFriendRequests),a.setState({incomingRequests:e.data().incomingFriendRequests}))})),s=w.collection("outgoingFriendRequests").doc(k.currentUser.uid).onSnapshot((function(e){e.data()&&(console.log(e.data().outgoingFriendRequests),a.setState({outgoingRequests:e.data().outgoingFriendRequests}))}));a.unsubscribeGroups=w.collection("profiles").doc(null===(o=k.currentUser)||void 0===o?void 0:o.uid).onSnapshot((function(e){if(e.data()){a.setState({numGroups:e.data().groups.length,groupArray:[]});for(var t=[],n=function(n){var r=w.collection("groups").doc(e.data().groups[n]).onSnapshot((function(e){var t=Object(F.a)(a.state.groupArray);if(e.data()){var r={nickname:e.data().nickname,members:e.data().members,id:e.data().id,profilePicture:e.data().profilePicture,owner:e.data().owner};t[n]=r,a.setState({groupArray:t}),a.state.groupDetails.id===r.id&&a.setState({groupDetails:r}),console.log(r)}}));t.push(r)},r=0;r<a.state.numGroups;r++)n(r);a.setState({unsubscribeGroupArray:t})}})),a.setState({unsubscribeIncomingRequests:i,unsubscribeOutgoingRequests:s})}}))})),a}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.state.unsubscribeFriendsList(),this.state.unsubscribeIncomingRequests(),this.state.unsubscribeOutgoingRequests();for(var e=0;e<this.state.unsubscribeGroupArray.length;e++)this.state.unsubscribeGroupArray[e]()}},{key:"subscribeGroups",value:function(){}},{key:"addFriend",value:function(e){var t;""!==e&&e!==(null===(t=k.currentUser)||void 0===t?void 0:t.email)&&w.collection("emails").doc(e).get().then((function(e){var t,n;e.exists&&(w.collection("incomingFriendRequests").doc(e.data().userid).update({incomingFriendRequests:y.firestore.FieldValue.arrayUnion(null===(t=k.currentUser)||void 0===t?void 0:t.uid)}),w.collection("outgoingFriendRequests").doc(null===(n=k.currentUser)||void 0===n?void 0:n.uid).update({outgoingFriendRequests:y.firestore.FieldValue.arrayUnion(e.data().userid)}))}))}},{key:"cancelOutgingRequest",value:function(e){var t,n,a;""!==e&&e!==(null===(t=k.currentUser)||void 0===t?void 0:t.email)&&(w.collection("incomingFriendRequests").doc(e).update({incomingFriendRequests:y.firestore.FieldValue.arrayRemove(null===(n=k.currentUser)||void 0===n?void 0:n.uid)}),w.collection("outgoingFriendRequests").doc(null===(a=k.currentUser)||void 0===a?void 0:a.uid).update({outgoingFriendRequests:y.firestore.FieldValue.arrayRemove(e)}))}},{key:"generateRandomString",value:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_~",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}},{key:"generateUniqueFriendId",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise((function(e,t){var a=n.generateRandomString(50);w.collection("friendIds").doc(a).get().then((function(t){var r;t.exists?(null===(r=t.data())||void 0===r?void 0:r.inUse)?n.generateUniqueFriendId():w.collection("friendIds").doc(a).set({inUse:!0}):(w.collection("friendIds").doc(a).set({inUse:!0}),e(a))}))})),e.next=3,t;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"generateUniqueGroupId",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise((function(e,t){var a=n.generateRandomString(50);w.collection("groudIds").doc(a).get().then((function(t){var r;t.exists?(null===(r=t.data())||void 0===r?void 0:r.inUse)?n.generateUniqueGroupId():w.collection("groupIds").doc(a).set({inUse:!0}):(w.collection("groupIds").doc(a).set({inUse:!0}),e(a))}))})),e.next=3,t;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"acceptFriend",value:function(e){var t=this;""!=e&&this.generateUniqueFriendId().then((function(n){var a,r,o,i,s,c,l;w.collection("outgoingFriendRequests").doc(e).update({outgoingFriendRequests:y.firestore.FieldValue.arrayRemove(null===(a=k.currentUser)||void 0===a?void 0:a.uid)}),w.collection("incomingFriendRequests").doc(null===(r=k.currentUser)||void 0===r?void 0:r.uid).update({incomingFriendRequests:y.firestore.FieldValue.arrayRemove(e)}),w.collection("friends").doc(null===(o=k.currentUser)||void 0===o?void 0:o.uid).update({friendsList:y.firestore.FieldValue.arrayUnion(e)}),w.collection("friends").doc(e).update({friendsList:y.firestore.FieldValue.arrayUnion(null===(i=k.currentUser)||void 0===i?void 0:i.uid)}),w.collection("friends").doc(null===(s=k.currentUser)||void 0===s?void 0:s.uid).collection("uuids").doc(e).set({uuid:n,friend:e}),w.collection("friends").doc(e).collection("uuids").doc(null===(c=k.currentUser)||void 0===c?void 0:c.uid).set({uuid:n,friend:null===(l=k.currentUser)||void 0===l?void 0:l.uid});var u=Date.now();t.realtime_db.ref(n).child(u.toString()).set({message:"Join the conversation! Send a message here to get started.",sender:"World-Watchlist"})}))}},{key:"declineFriend",value:function(e){var t,n;""!=e&&(w.collection("outgoingFriendRequests").doc(e).update({outgoingFriendRequests:y.firestore.FieldValue.arrayRemove(null===(t=k.currentUser)||void 0===t?void 0:t.uid)}),w.collection("incomingFriendRequests").doc(null===(n=k.currentUser)||void 0===n?void 0:n.uid).update({incomingFriendRequests:y.firestore.FieldValue.arrayRemove(e)}))}},{key:"removeFriend",value:function(e){var t,n=this;""!=e&&w.collection("friends").doc(null===(t=k.currentUser)||void 0===t?void 0:t.uid).collection("uuids").doc(e).get().then((function(t){var a,r,o,i;w.collection("friendIds").doc(t.data().uuid).update({inUse:!1}),w.collection("friends").doc(null===(a=k.currentUser)||void 0===a?void 0:a.uid).collection("uuids").doc(e).delete(),w.collection("friends").doc(e).collection("uuids").doc(null===(r=k.currentUser)||void 0===r?void 0:r.uid).delete(),w.collection("friends").doc(null===(o=k.currentUser)||void 0===o?void 0:o.uid).update({friendsList:y.firestore.FieldValue.arrayRemove(e)}),w.collection("friends").doc(e).update({friendsList:y.firestore.FieldValue.arrayRemove(null===(i=k.currentUser)||void 0===i?void 0:i.uid)}),n.setState({isFriendModalOpen:!1})}))}},{key:"blockUser",value:function(e){var t;""!==e&&(console.log("User exists, attempting to block"),w.collection("blockedUsers").doc(null===(t=k.currentUser)||void 0===t?void 0:t.uid).update({blocked:y.firestore.FieldValue.arrayUnion(e)}),console.log("User should be added to blocked list"))}},{key:"exists",value:function(e){return""!==e}},{key:"createGroup",value:function(){var e=this;this.generateUniqueGroupId().then((function(t){var n,a,r;w.collection("groups").doc(t).set({owner:null===(n=k.currentUser)||void 0===n?void 0:n.uid,members:[null===(a=k.currentUser)||void 0===a?void 0:a.uid],nickname:e.state.groupNickname,id:t,profilePicture:""}),w.collection("profiles").doc(null===(r=k.currentUser)||void 0===r?void 0:r.uid).update({groups:y.firestore.FieldValue.arrayUnion(t)});var o=Date.now();e.realtime_db.ref(t).child(o.toString()).set({message:"Join the conversation! Send a message here to get started.",sender:"World-Watchlist"})}))}},{key:"leaveGroup",value:function(){var e,t,n,a,r,o;(null===(e=k.currentUser)||void 0===e?void 0:e.uid)!==this.state.groupDetails.owner?w.collection("groups").doc(this.state.groupDetails.id).update({members:y.firestore.FieldValue.arrayRemove(null===(n=k.currentUser)||void 0===n?void 0:n.uid)}):1===this.state.groupDetails.members.length?this.deleteGroup():this.state.groupDetails.members[0]!==(null===(a=k.currentUser)||void 0===a?void 0:a.uid)?w.collection("groups").doc(this.state.groupDetails.id).update({owner:this.state.groupDetails.members[0],members:y.firestore.FieldValue.arrayRemove(null===(r=k.currentUser)||void 0===r?void 0:r.uid)}):w.collection("groups").doc(this.state.groupDetails.id).update({owner:this.state.groupDetails.members[1],members:y.firestore.FieldValue.arrayRemove(null===(o=k.currentUser)||void 0===o?void 0:o.uid)});w.collection("profiles").doc(null===(t=k.currentUser)||void 0===t?void 0:t.uid).update({groups:y.firestore.FieldValue.arrayRemove(this.state.groupDetails.id)}),this.setState({isGroupModalOpen:!1})}},{key:"deleteGroup",value:function(){var e,t=this;(null===(e=k.currentUser)||void 0===e?void 0:e.uid)===this.state.groupDetails.owner?(this.state.groupDetails.members.forEach((function(e){w.collection("profiles").doc(e).update({groups:y.firestore.FieldValue.arrayRemove(t.state.groupDetails.id)}),w.collection("groups").doc(t.state.groupDetails.id).delete()})),this.setState({isGroupModalOpen:!1})):console.log("User should not be able to use this function")}},{key:"addFriendToGroup",value:function(e,t){w.collection("profiles").doc(e).update({groups:y.firestore.FieldValue.arrayUnion(t)}),w.collection("groups").doc(t).update({members:y.firestore.FieldValue.arrayUnion(e)})}},{key:"toggleGroupModal",value:function(){this.setState({isGroupModalOpen:!this.state.isGroupModalOpen})}},{key:"toggleAddFriendModal",value:function(){this.setState({isAddFriendModalOpen:!this.state.isAddFriendModalOpen})}},{key:"togglePendingRequestsModal",value:function(){this.setState({isPendingRequestsModalOpen:!this.state.isPendingRequestsModalOpen})}},{key:"toggleFriendModal",value:function(){this.setState({isFriendModalOpen:!this.state.isFriendModalOpen})}},{key:"render",value:function(){var e=this;return r.a.createElement(p.u,null,r.a.createElement(te,Object.assign({},this.props,{isAddFriendModalOpen:this.state.isAddFriendModalOpen,toggleAddFriendModal:this.toggleAddFriendModal,addFriend:this.addFriend})),r.a.createElement(ne,Object.assign({},this.props,{incomingRequests:this.state.incomingRequests,outgoingRequests:this.state.outgoingRequests,acceptFriend:this.acceptFriend,declineFriend:this.declineFriend,cancelOutgingRequest:this.cancelOutgingRequest,isPendingRequestsModalOpen:this.state.isPendingRequestsModalOpen,togglePendingRequestsModal:this.togglePendingRequestsModal})),r.a.createElement(ee,Object.assign({isGroupModalOpen:this.state.isGroupModalOpen,groupDetails:this.state.groupDetails},this.props,{toggleGroupModal:this.toggleGroupModal,leaveGroup:this.leaveGroup,deleteGroup:this.deleteGroup,friendList:this.state.friendsList,addFriendToGroup:this.addFriendToGroup})),r.a.createElement(ae,Object.assign({},this.props,{friendDetails:this.state.friendDetails,isFriendModalOpen:this.state.isFriendModalOpen,toggleFriendModal:this.toggleFriendModal,removeFriend:this.removeFriend})),r.a.createElement(p.v,{cssClass:"socialPopover",event:this.state.socialPopoverEvent,isOpen:this.state.isSocialPopoverOpen,onDidDismiss:function(){e.setState({isSocialPopoverOpen:!1,socialPopoverEvent:void 0})}},r.a.createElement(p.k,null,r.a.createElement(p.q,null,r.a.createElement(p.r,{id:"socialPopoverListHeader"},r.a.createElement("b",null,"Social Options")),r.a.createElement(p.o,{button:!0,onClick:function(){e.setState({isSocialPopoverOpen:!1,isAddFriendModalOpen:!0})}},r.a.createElement(p.p,null,"Add Friend"),r.a.createElement(p.m,{className:"socialPopoverIcon",slot:"end",icon:x.A})),r.a.createElement(p.o,{button:!0,onClick:function(){e.setState({isSocialPopoverOpen:!1,isCreateGroupModalOpen:!0})}},r.a.createElement(p.p,null,"Create Group"),r.a.createElement(p.m,{className:"socialPopoverIcon",slot:"end",icon:x.b})),r.a.createElement(p.o,{button:!0},r.a.createElement(p.p,null,"New Message"),r.a.createElement(p.m,{className:"socialPopoverIcon",slot:"end",icon:x.I}))))),r.a.createElement(p.t,{isOpen:this.state.isCreateGroupModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,{class:"socialToolbar2"},r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{onClick:function(){e.setState({isCreateGroupModalOpen:!1})},fill:"clear"},r.a.createElement(p.m,{id:"closeCreateGroupModalIcon",icon:x.o}))),r.a.createElement(p.G,{class:"socialTitle2"},"Create Group"))),r.a.createElement(p.k,null,r.a.createElement(p.n,{className:"createGroupInput",placeholder:"Group Nickname",onIonChange:function(t){e.setState({groupNickname:t.target.value})}}),r.a.createElement(p.d,{onClick:function(){e.createGroup(),e.setState({isCreateGroupModalOpen:!1})},id:"createGroupButton"},"Create"))),r.a.createElement(p.l,null,r.a.createElement(p.I,{class:"socialToolbar"},r.a.createElement(p.G,{class:"socialTitle"},"Social"),r.a.createElement(p.e,{slot:"start"},r.a.createElement(p.d,{class:"socialHeaderButton",onClick:function(){e.setState({isPendingRequestsModalOpen:!0})},fill:"clear"},r.a.createElement(p.m,{icon:x.t}))),r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.d,{class:"socialHeaderButton",onClick:function(t){t.persist(),e.setState({isSocialPopoverOpen:!0,socialPopoverEvent:t})},fill:"clear"},r.a.createElement(p.m,{icon:x.c}))))),r.a.createElement(p.k,null,r.a.createElement(p.B,{onIonChange:function(t){return e.setState({segmentSelected:t.detail.value})},value:this.state.segmentSelected},r.a.createElement(p.C,{value:"groups"},r.a.createElement(p.p,null,"Groups")),r.a.createElement(p.C,{value:"friends"},r.a.createElement(p.p,null,"Friends"))),"groups"===this.state.segmentSelected?r.a.createElement("div",null,this.state.groupArray.map((function(t){return r.a.createElement(p.o,{onClick:function(){e.setState({groupDetails:t,isGroupModalOpen:!0})},lines:"none",button:!0,className:"socialGroupItem",key:t.id},r.a.createElement(p.c,{slot:"start",className:"socialGroupAvatar"},r.a.createElement("img",{src:t.profilePicture?t.profilePicture:X.a})),r.a.createElement(p.p,{className:"socialGroupLabel"},t.nickname))}))):r.a.createElement("div",null,this.state.friendsList.map((function(t){return r.a.createElement(p.o,{onClick:function(){e.setState({friendDetails:t,isFriendModalOpen:!0})},lines:"none",button:!0,className:"socialGroupItem",key:t.uid},r.a.createElement(p.c,{slot:"start",className:"socialGroupAvatar"},r.a.createElement("img",{src:t.photo?t.photo:X.a})),r.a.createElement(p.p,{className:"socialGroupLabel"},t.displayName))})))))}}]),n}(r.a.Component),oe=(n(126),f.c.PushNotifications),ie=f.c.Toast,se=f.a.isPluginAvailable("PushNotifications"),ce=f.c.FCMPlugin,le=function(e){Object(u.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isBlockSourceModalOpen:!1,isAccountSettingsModalOpen:!1,isChangePasswordModalOpen:!1,signOutAlert:!1,isChangeUsernameModalOpen:!1,isSignOutModalOpen:!1,blockedSources:[],topics:[],currentUserName:"",sourceToBlock:"",sourceToUnBlock:"",localList:[],isSubbed:!1,newPassword:"",newUsername:"",notifications:[{id:"id",title:"Test Push",body:"This is my first push notification"}]},console.log("Here"+a.state.currentUserName),a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.blockSource=a.blockSource.bind(Object(b.a)(a)),k.currentUser?w.collection("profiles").doc(k.currentUser.uid).get().then((function(e){if(e.data()){a.setState({currentUserName:e.data().displayName}),a.setState({currentUserName:e.data().isSubbed});w.collection("profiles").doc(y.auth().currentUser.uid).onSnapshot((function(e){e.data()}))}})):a.props.history.push("/landing"),a.pullImage(),console.log("I'm here "+a.state.currentUserName),a}return Object(l.a)(n,[{key:"show",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.show({text:"Hello!"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=this;oe.register();for(var t=this.state.topics,n=0;n<t.length;n++)oe.register().then((function(){console.log("subscribed to"+t[n]),ce.subscribeTo({topic:t[n]})})).catch((function(e){return console.log(e)}));oe.addListener("registration",(function(e){alert("Push registration success, token: "+e.value)})),oe.addListener("registrationError",(function(e){alert("Error on registration: "+JSON.stringify(e))})),oe.addListener("pushNotificationReceived",(function(t){var n=e.state.notifications;n.push({id:t.id,title:t.title,body:t.body}),e.setState({notifications:n})})),oe.addListener("pushNotificationActionPerformed",(function(t){var n=e.state.notifications;n.push({id:t.notification.data.id,title:t.notification.data.title,body:t.notification.data.body}),e.setState({notifications:n})}))}},{key:"handleChange",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n,a,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=12;break}return console.log(t),y.storage(),n=y.storage().ref(),a=t[0],r=y.auth().currentUser.uid,(o=n.child("profileImages/"+r+".jpg")).put(a),e.next=10,new Promise((function(e){return setTimeout(e,1e3)}));case 10:o.getDownloadURL().then((function(e){var t;w.collection("profiles").doc(null===(t=k.currentUser)||void 0===t?void 0:t.uid).update({photo:e})})),this.pullImage();case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"blockSource",value:function(e){var t=this;""!=e&&e.length>3&&(this.state.localList.includes(e)||this.state.localList.push(e),this.addToList(e),this.state.blockedSources.push(e),console.log(this.state.blockedSources),w.collection("usernames").doc(this.state.currentUserName).get().then((function(n){n.exists&&t.isValidSite(e)&&w.collection("usernames").doc(t.state.currentUserName).update({blockedSources:y.firestore.FieldValue.arrayUnion(e)})})))}},{key:"unBlockSource",value:function(e){var t=this;""!=e&&w.collection("usernames").doc(this.state.currentUserName).get().then((function(n){n.exists&&w.collection("usernames").doc(t.state.currentUserName).update({blockedSources:y.firestore.FieldValue.arrayRemove(e)})}))}},{key:"populate",value:function(){for(var e=this.state.blockedSources,t=e.length-1;t>=0;t--)this.addToList(e[t])}},{key:"isEmailAddress",value:function(e){return""!==e&&e.includes("@")}},{key:"changeEmail",value:function(e){k.currentUser&&this.isEmailAddress(e)&&k.currentUser.updateEmail(e).then((function(){})).catch((function(e){}))}},{key:"signOutUser",value:function(){k.currentUser&&(k.signOut(),this.props.history.push("/landing"));document.createElement("IonAlert")}},{key:"changePassword",value:function(e){k.currentUser&&k.currentUser.updatePassword(e).then((function(){})).catch((function(e){}))}},{key:"notify",value:function(){se&&this.state.isSubbed?this.push():this.state.isSubbed,w.collection("profiles").doc(y.auth().currentUser.uid).update({notifications:this.state.isSubbed})}},{key:"changeUsername",value:function(e){var t=this;void 0!=this.state.currentUserName&&e.length>3&&w.collection("profiles").doc(y.auth().currentUser.uid).get().then((function(n){n.exists&&(w.collection("profiles").doc(y.auth().currentUser.uid).update({displayName:e}),t.setState({currentUserName:e}))}))}},{key:"pullImage",value:function(){if(k.currentUser){y.storage();var e=y.storage().ref(),t="profileImages/"+y.auth().currentUser.uid+".jpg";e.child(t).getDownloadURL().then((function(e){var t=document.getElementById("myimg");null!=t&&t.setAttribute("src",e)})).catch((function(e){switch(e.code){case"storage/object-not-found":y.storage().ref().child("placeholder.png").getDownloadURL().then((function(e){var t=document.getElementById("myimg");null!=t&&t.setAttribute("src",e)}))}}))}}},{key:"uploadImage",value:function(){r.a.createRef(),y.storage(),y.storage().ref().child("images/new.jpg");var e=document.getElementById("image");null!=e&&e.addEventListener("change",(function(e){e.target}))}},{key:"addToList",value:function(e){if(!this.state.localList.includes(e)){var t=document.getElementById("blockedList"),n=document.createElement("li");n.setAttribute("id",e),n.appendChild(document.createTextNode(e)),null!=t&&t.appendChild(n),console.log(t)}}},{key:"isValidSite",value:function(e){if(""!=e&&e.length>4&&"."==e.substring(e.length-4,e.length-3)){var t=e.substring(e.length-3);if("com"==t||"org"==t||"net"==t)return!0}return!1}},{key:"render",value:function(){var e=this;this.state.notifications;return r.a.createElement(p.u,null,r.a.createElement(p.t,{isOpen:this.state.isBlockSourceModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,{class:"settingsToolbar2"},r.a.createElement(p.e,null,r.a.createElement(p.d,{onClick:function(){e.populate(),e.setState({isBlockSourceModalOpen:!1})},id:"toBlock",fill:"clear"},r.a.createElement(p.m,{id:"closeBlockIcon",icon:x.d}))),r.a.createElement(p.G,{class:"settingsTitle2"},"Block a Source"))),r.a.createElement(p.k,null,r.a.createElement(p.o,{lines:"none",id:"block"},r.a.createElement(p.n,{class:"addSource",onIonChange:function(t){e.setState({sourceToBlock:t.target.value})}}),r.a.createElement(p.d,{onClick:function(){e.blockSource(e.state.sourceToBlock)},fill:"clear"},r.a.createElement(p.m,{id:"addBlockIcon",icon:x.b}))),r.a.createElement("br",null),r.a.createElement(p.G,{id:"unblockText"},"Unblock a Source"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(p.o,{lines:"none",id:"block"},r.a.createElement(p.n,{class:"addSource",onIonChange:function(t){e.setState({sourceToUnBlock:t.target.value})}}),r.a.createElement(p.d,{onClick:function(){e.unBlockSource(e.state.sourceToUnBlock)},fill:"clear"},r.a.createElement(p.m,{id:"addBlockIcon",icon:x.b}))),r.a.createElement("br",null),r.a.createElement(p.l,{id:"blockedSourcesHeader"},"You Won't See Content From:"),r.a.createElement("br",null),r.a.createElement("ul",{id:"blockedList"}),this.state.blockedSources.map((function(e){return r.a.createElement(p.o,{key:e.toString()},r.a.createElement(p.o,{class:"blockedListEntry"},e.toString()))})))),r.a.createElement(p.t,{isOpen:this.state.isChangePasswordModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,{class:"settingsToolbar2"},r.a.createElement(p.e,null,r.a.createElement(p.d,{onClick:function(){e.setState({isChangePasswordModalOpen:!1})},id:"toBlock",fill:"clear"},r.a.createElement(p.m,{id:"closeBlockIcon",icon:x.d}))),r.a.createElement(p.G,{class:"settingsTitle2"},"Change Password"))),r.a.createElement(p.k,null,r.a.createElement(p.o,{lines:"none",id:"block"},r.a.createElement(p.n,{class:"addSource",onIonChange:function(t){e.setState({newPassword:t.target.value})}}),r.a.createElement(p.d,{onClick:function(){e.changePassword(e.state.newPassword)},fill:"clear",placeholder:"Enter new password"},r.a.createElement(p.m,{id:"addBlockIcon",icon:x.f}))))),r.a.createElement(p.t,{isOpen:this.state.isChangeUsernameModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,{class:"settingsToolbar2"},r.a.createElement(p.e,null,r.a.createElement(p.d,{onClick:function(){e.setState({isChangeUsernameModalOpen:!1})},id:"toBlock",fill:"clear"},r.a.createElement(p.m,{id:"closeBlockIcon",icon:x.d}))),r.a.createElement(p.G,{class:"settingsTitle2"},"Change Username"))),r.a.createElement(p.k,null,r.a.createElement(p.o,{lines:"none",id:"block"},r.a.createElement(p.n,{class:"addSource",onIonChange:function(t){e.setState({newUsername:t.target.value})}}),r.a.createElement(p.d,{onClick:function(){e.changeUsername(e.state.newUsername)},fill:"clear"},r.a.createElement(p.m,{id:"addBlockIcon",icon:x.f}))))),r.a.createElement(p.t,{isOpen:this.state.isAccountSettingsModalOpen},r.a.createElement(p.l,null,r.a.createElement(p.I,{class:"settingsToolbar2"},r.a.createElement(p.e,null,r.a.createElement(p.d,{onClick:function(){e.setState({isAccountSettingsModalOpen:!1})},id:"toBlock",fill:"clear"},r.a.createElement(p.m,{id:"closeBlockIcon",icon:x.d}))),r.a.createElement(p.G,{class:"settingsTitle2"},"Account Settings"))),r.a.createElement(p.k,null,r.a.createElement(p.o,{id:"changeUsername"},"Sign Out",r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.d,{onClick:function(){e.setState({signOutAlert:!0})},fill:"clear"},r.a.createElement(p.m,{id:"userNameChangeButton",icon:x.s})),r.a.createElement(p.a,{isOpen:this.state.signOutAlert,onDidDismiss:function(){return e.setState({signOutAlert:!1})},header:"Are you sure you want to sign out?",buttons:[{text:"No",role:"cancel",cssClass:"secondary",handler:function(e){console.log("Confirm Cancel: blah")}},{text:"Yes",handler:function(){e.signOutUser(),e.setState({isAccountSettingsModalOpen:!1})}}]}))),r.a.createElement(p.o,{id:"changeUsername"},"Change Display Name",r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.d,{onClick:function(){e.setState({isChangeUsernameModalOpen:!0})},fill:"clear"},r.a.createElement(p.m,{id:"userNameChangeButton",icon:x.B})))),r.a.createElement(p.o,{id:"updateEmail"},"Change Password",r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.d,{onClick:function(){e.setState({isChangePasswordModalOpen:!0})},fill:"clear"},r.a.createElement(p.m,{id:"emailChangeButton",icon:x.u})))))),r.a.createElement(p.l,null,r.a.createElement(p.I,{class:"settingsToolbar"},r.a.createElement(p.G,{class:"settingsTitle"},"Settings"))),r.a.createElement(p.o,null,r.a.createElement(p.c,null,r.a.createElement("img",{id:"myimg"})),this.state.currentUserName,console.log("testname "+this.state.currentUserName)),r.a.createElement(p.o,null,r.a.createElement(p.p,null,"Notifications"),r.a.createElement(p.H,{checked:this.state.isSubbed,onClick:function(){e.state.isSubbed=!e.state.isSubbed,e.notify()},value:"Notifications"})),r.a.createElement(p.k,null,r.a.createElement(p.o,null,"Content Filter",r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.d,{onClick:function(){e.setState({isBlockSourceModalOpen:!0})},fill:"clear"},r.a.createElement(p.m,{id:"contentFilterButton",icon:x.x})))),r.a.createElement(p.o,{id:"updateEmail"},"Change Profile Picture",r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.d,{id:"submit"},r.a.createElement("input",{type:"file",id:"fileSelect",onChange:function(t){return e.handleChange(t.target.files)}}),r.a.createElement(p.m,{id:"cloudUploadOutline",icon:x.r})))),r.a.createElement(p.o,{id:"changeUsername"},"Account Settings",r.a.createElement(p.e,{slot:"end"},r.a.createElement(p.d,{onClick:function(){e.setState({isAccountSettingsModalOpen:!0})},fill:"clear"},r.a.createElement(p.m,{id:"userNameChangeButton",icon:x.B}))))))}}]),n}(r.a.Component),ue=(n(127),function(){return r.a.createElement(p.F,null,r.a.createElement(p.z,null,r.a.createElement(d.b,{path:"/main",exact:!0,render:function(){return r.a.createElement(d.a,{to:"/main/feed"})}}),r.a.createElement(d.b,{path:"/main/feed",component:Q,exact:!0}),r.a.createElement(d.b,{path:"/main/social",component:re,exact:!0}),r.a.createElement(d.b,{path:"/main/settings",component:le,exact:!0})),r.a.createElement(p.D,{color:"dark",class:"tabToolbar",slot:"bottom"},r.a.createElement(p.E,{class:"tabIcon",tab:"feed",href:"/main/feed"},r.a.createElement(p.m,{icon:x.x}),r.a.createElement(p.p,null,"Feed")),r.a.createElement(p.E,{class:"tabIcon",tab:"social",href:"/main/social"},r.a.createElement(p.m,{icon:x.z}),r.a.createElement(p.p,null,"Social")),r.a.createElement(p.E,{class:"tabIcon",tab:"settings",href:"/main/settings"},r.a.createElement(p.m,{icon:x.J}),r.a.createElement(p.p,null,"Settings"))))}),Ae=(n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),f.c.PushNotifications),de={notifications:[{id:"id",title:"Test Push",body:"This is my first push notification"}]},pe=(r.a.Component,function(){return r.a.createElement(p.b,null,r.a.createElement(m.a,null,r.a.createElement(p.z,null,r.a.createElement(d.b,{path:"/main",component:ue}),r.a.createElement(d.b,{path:"/Weather",component:I}),r.a.createElement(d.b,{path:"/feed",component:Q}),r.a.createElement(d.b,{path:"/main",component:ue}),r.a.createElement(d.b,{path:"/landing",component:O,exact:!0}),r.a.createElement(d.b,{exact:!0,path:"/",render:function(){return r.a.createElement(d.a,{to:"/landing"})}}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},34:function(e,t){e.exports="data:image/png;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAQAAAAAAAAAAAAAAAAAAAAAA8J8HasaIBWRZAAAAAElFTkSuQmCC"},74:function(e,t,n){},81:function(e,t,n){e.exports=n(139)},87:function(e,t,n){var a={"./ion-action-sheet.entry.js":[141,5],"./ion-alert.entry.js":[142,6],"./ion-app_8.entry.js":[143,7],"./ion-avatar_3.entry.js":[144,18],"./ion-back-button.entry.js":[145,19],"./ion-backdrop.entry.js":[146,43],"./ion-button_2.entry.js":[147,20],"./ion-card_5.entry.js":[148,21],"./ion-checkbox.entry.js":[149,22],"./ion-chip.entry.js":[150,23],"./ion-col_3.entry.js":[151,44],"./ion-datetime_3.entry.js":[152,10],"./ion-fab_3.entry.js":[153,24],"./ion-img.entry.js":[154,45],"./ion-infinite-scroll_2.entry.js":[155,46],"./ion-input.entry.js":[156,25],"./ion-item-option_3.entry.js":[157,26],"./ion-item_8.entry.js":[158,27],"./ion-loading.entry.js":[159,28],"./ion-menu_3.entry.js":[160,29],"./ion-modal.entry.js":[161,8],"./ion-nav_2.entry.js":[162,15],"./ion-popover.entry.js":[163,9],"./ion-progress-bar.entry.js":[164,30],"./ion-radio_2.entry.js":[165,31],"./ion-range.entry.js":[166,32],"./ion-refresher_2.entry.js":[167,11],"./ion-reorder_2.entry.js":[168,17],"./ion-ripple-effect.entry.js":[169,47],"./ion-route_4.entry.js":[170,33],"./ion-searchbar.entry.js":[171,34],"./ion-segment_2.entry.js":[172,35],"./ion-select_3.entry.js":[173,36],"./ion-slide_2.entry.js":[174,48],"./ion-spinner.entry.js":[175,13],"./ion-split-pane.entry.js":[176,49],"./ion-tab-bar_2.entry.js":[177,37],"./ion-tab_2.entry.js":[178,16],"./ion-text.entry.js":[179,38],"./ion-textarea.entry.js":[180,39],"./ion-toast.entry.js":[181,40],"./ion-toggle.entry.js":[182,12],"./ion-virtual-scroll.entry.js":[183,50]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=87,e.exports=r},89:function(e,t,n){var a={"./ion-icon.entry.js":[187,57]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=89,e.exports=r},94:function(e,t,n){}},[[81,3,4]]]);
//# sourceMappingURL=main.e1f62e26.chunk.js.map